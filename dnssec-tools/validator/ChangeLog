------------------------------------------------------------------------
r5527 | hardaker | 2011-03-24 14:23:43 -0700 (Thu, 24 Mar 2011) | 1 line

added a makerelease script for libval
------------------------------------------------------------------------
r5518 | hserus | 2011-03-24 06:24:03 -0700 (Thu, 24 Mar 2011) | 4 lines

change root.hints location specified from AC_PROMPT_USER_NO_DEFINE to 
AC_PROMPT_USER, since the defaults root.hints value is apparently set to 
NULL if this is not done

------------------------------------------------------------------------
r5502 | hardaker | 2011-03-23 13:14:27 -0700 (Wed, 23 Mar 2011) | 1 line

include arpa/nameserv.h ahead of resolver.h
------------------------------------------------------------------------
r5501 | hardaker | 2011-03-23 13:14:02 -0700 (Wed, 23 Mar 2011) | 1 line

install the validator-config.h file
------------------------------------------------------------------------
r5500 | hardaker | 2011-03-23 13:13:40 -0700 (Wed, 23 Mar 2011) | 1 line

define USE_EDNS0 and libsres_msg_getflag
------------------------------------------------------------------------
r5499 | hardaker | 2011-03-23 13:13:24 -0700 (Wed, 23 Mar 2011) | 1 line

make the nameser.h and arpa header inclusions work.
------------------------------------------------------------------------
r5498 | hardaker | 2011-03-23 13:13:06 -0700 (Wed, 23 Mar 2011) | 1 line

reinclude arpa/nameser.h
------------------------------------------------------------------------
r5497 | hardaker | 2011-03-23 13:12:47 -0700 (Wed, 23 Mar 2011) | 2 lines

- return error strings with failures
- fix tests to correct them
------------------------------------------------------------------------
r5496 | hardaker | 2011-03-23 13:12:26 -0700 (Wed, 23 Mar 2011) | 1 line

rev 1 of beginning framework
------------------------------------------------------------------------
r5495 | hardaker | 2011-03-23 13:12:10 -0700 (Wed, 23 Mar 2011) | 1 line

recent pod2man update
------------------------------------------------------------------------
r5493 | hardaker | 2011-03-23 13:11:24 -0700 (Wed, 23 Mar 2011) | 1 line

install the config.h file
------------------------------------------------------------------------
r5492 | hardaker | 2011-03-23 13:11:08 -0700 (Wed, 23 Mar 2011) | 1 line

use correct current bit value for the DO bit if the system doesn't define it
------------------------------------------------------------------------
r5491 | hardaker | 2011-03-23 13:10:53 -0700 (Wed, 23 Mar 2011) | 1 line

libsres' get() does *not* have a edns0 arg
------------------------------------------------------------------------
r5490 | hardaker | 2011-03-23 13:10:42 -0700 (Wed, 23 Mar 2011) | 1 line

print IP addresses tested on a big screen
------------------------------------------------------------------------
r5489 | hardaker | 2011-03-23 13:10:30 -0700 (Wed, 23 Mar 2011) | 1 line

return a successful description of what was achieved
------------------------------------------------------------------------
r5488 | hardaker | 2011-03-23 13:10:19 -0700 (Wed, 23 Mar 2011) | 2 lines

- return error strings with failures
- fix tests to correct them
------------------------------------------------------------------------
r5487 | hardaker | 2011-03-23 13:10:08 -0700 (Wed, 23 Mar 2011) | 1 line

compile dnssec_checks
------------------------------------------------------------------------
r5486 | hardaker | 2011-03-23 13:09:57 -0700 (Wed, 23 Mar 2011) | 1 line

rev 1 of beginning framework
------------------------------------------------------------------------
r5485 | hardaker | 2011-03-23 13:09:41 -0700 (Wed, 23 Mar 2011) | 1 line

enable nsec3 by default
------------------------------------------------------------------------
r5484 | rstory | 2011-03-23 10:26:34 -0700 (Wed, 23 Mar 2011) | 1 line

fix partially checked in fix
------------------------------------------------------------------------
r5483 | rstory | 2011-03-23 10:26:25 -0700 (Wed, 23 Mar 2011) | 1 line

revert accidental checking of debug message
------------------------------------------------------------------------
r5482 | rstory | 2011-03-23 10:26:12 -0700 (Wed, 23 Mar 2011) | 1 line

add top_q to async_status to more closely mimic async flow
------------------------------------------------------------------------
r5481 | rstory | 2011-03-23 10:26:02 -0700 (Wed, 23 Mar 2011) | 15 lines

fix access to freed memory; various cleanup

  consolidate free functions
  - add free_val_rrset, val_free_authentication_chain_structure,
    clear_query_chain_structure
  - make free_query_chain_structure actually do free

  add log message when async query completes
  free incomplete results to prevent leak
  use printable name in log message instead of compressed name
  fix async check loop to handle current item being removed from list
  add various error checks
  clear copied ptrs before calling structure free
  clear next ptrs before calling structure free
  cancel outstanding queries when freeing query chain
------------------------------------------------------------------------
r5480 | rstory | 2011-03-23 10:25:50 -0700 (Wed, 23 Mar 2011) | 1 line

fix in_flight count test, bump level of log msg
------------------------------------------------------------------------
r5479 | rstory | 2011-03-23 10:25:37 -0700 (Wed, 23 Mar 2011) | 1 line

don't loop over queries, _free_qfq_chain does it recursively
------------------------------------------------------------------------
r5478 | rstory | 2011-03-23 10:25:28 -0700 (Wed, 23 Mar 2011) | 1 line

don't decompress/alloc 0 byte rdata
------------------------------------------------------------------------
r5477 | rstory | 2011-03-23 10:25:19 -0700 (Wed, 23 Mar 2011) | 1 line

fix reversed logic test
------------------------------------------------------------------------
r5476 | rstory | 2011-03-23 10:25:06 -0700 (Wed, 23 Mar 2011) | 1 line

don't try to read empty file
------------------------------------------------------------------------
r5475 | rstory | 2011-03-23 10:24:56 -0700 (Wed, 23 Mar 2011) | 1 line

clear whole structure (not that it should matter)
------------------------------------------------------------------------
r5458 | tewok | 2011-03-21 13:44:48 -0700 (Mon, 21 Mar 2011) | 2 lines

Added -Version code.

------------------------------------------------------------------------
r5457 | tewok | 2011-03-21 13:17:26 -0700 (Mon, 21 Mar 2011) | 2 lines

Added -Version code.

------------------------------------------------------------------------
r5455 | hserus | 2011-03-21 08:27:44 -0700 (Mon, 21 Mar 2011) | 2 lines

Use namecmp instead of memcmp for comparing names

------------------------------------------------------------------------
r5454 | hserus | 2011-03-21 08:27:13 -0700 (Mon, 21 Mar 2011) | 2 lines

Minor change to a log message

------------------------------------------------------------------------
r5445 | rstory | 2011-03-17 21:07:54 -0700 (Thu, 17 Mar 2011) | 1 line

fix level of debug log messages
------------------------------------------------------------------------
r5444 | rstory | 2011-03-17 21:07:45 -0700 (Thu, 17 Mar 2011) | 1 line

count printf doesn't make sense for async
------------------------------------------------------------------------
r5443 | rstory | 2011-03-17 21:07:38 -0700 (Thu, 17 Mar 2011) | 1 line

turn on res_io debug when debug_level is 8 or higher
------------------------------------------------------------------------
r5442 | rstory | 2011-03-17 21:07:30 -0700 (Thu, 17 Mar 2011) | 3 lines

add val_log_highest_debug_level

 returns the highest debug_level of all log targets
------------------------------------------------------------------------
r5441 | rstory | 2011-03-17 21:07:21 -0700 (Thu, 17 Mar 2011) | 1 line

fix typo in help text
------------------------------------------------------------------------
r5440 | rstory | 2011-03-17 21:07:13 -0700 (Thu, 17 Mar 2011) | 6 lines

support for asynchronous queries for testsuites

 - add in_flight/remaining counts to testsuite
 - add async_status / val_response to testcase struct
 - add -I/--inflight option to validate
 - add run_suite_async (only used when --inflight > 1 specified)
------------------------------------------------------------------------
r5439 | rstory | 2011-03-17 21:07:05 -0700 (Thu, 17 Mar 2011) | 8 lines

add asynchronous val functions

 - set VAL_QUERY_ASYNC flag when chasing query if set on top query
 - add val_async_status_free
 - add val_async_submit
 - add val_async_async_check
 - cleanup pending async queries when releasing context
 - return error if non-async function called for async query
------------------------------------------------------------------------
r5438 | rstory | 2011-03-17 21:06:56 -0700 (Thu, 17 Mar 2011) | 1 line

use async query routines if VAL_QUERY_ASYNC set
------------------------------------------------------------------------
r5437 | rstory | 2011-03-17 21:06:47 -0700 (Thu, 17 Mar 2011) | 1 line

move duplicated code to new func _free_w_results()
------------------------------------------------------------------------
r5436 | rstory | 2011-03-17 21:06:39 -0700 (Thu, 17 Mar 2011) | 3 lines

extract context refresh code to val_context.c

  new: val_refresh_context() and val_create_or_refresh_context()
------------------------------------------------------------------------
r5435 | rstory | 2011-03-17 21:06:30 -0700 (Thu, 17 Mar 2011) | 4 lines

break ask_resolver into 3 pieces

  _resolver_submit, _resolver_submit_one
  _resolver_rcv_one
------------------------------------------------------------------------
r5434 | rstory | 2011-03-17 21:06:22 -0700 (Thu, 17 Mar 2011) | 1 line

move most of ask_cache into new ask_cache_one
------------------------------------------------------------------------
r5433 | rstory | 2011-03-17 21:06:13 -0700 (Thu, 17 Mar 2011) | 1 line

init/cleanup qc_ea in queries; add query/qfq chain remove/free funcs
------------------------------------------------------------------------
r5432 | rstory | 2011-03-17 21:06:02 -0700 (Thu, 17 Mar 2011) | 1 line

add async send/rcv functions for libval
------------------------------------------------------------------------
r5431 | hserus | 2011-03-16 19:35:00 -0700 (Wed, 16 Mar 2011) | 2 lines

Properly initialize rrset variable when trying to identify zonecuts

------------------------------------------------------------------------
r5430 | hserus | 2011-03-16 13:38:28 -0700 (Wed, 16 Mar 2011) | 2 lines

Fix improper check of soa bitfield in NSEC3 proofs, 

------------------------------------------------------------------------
r5424 | hserus | 2011-03-10 17:50:36 -0800 (Thu, 10 Mar 2011) | 2 lines

Look for correct alias target when returning an answer that does not contain any answers 

------------------------------------------------------------------------
r5420 | hserus | 2011-03-07 10:30:25 -0800 (Mon, 07 Mar 2011) | 2 lines

Enable nsec3, dlv and ipv6 by default

------------------------------------------------------------------------
r5418 | hardaker | 2011-02-28 10:08:13 -0800 (Mon, 28 Feb 2011) | 1 line

added a log message when an RRSIG was verified
------------------------------------------------------------------------
r5417 | hardaker | 2011-02-28 10:00:45 -0800 (Mon, 28 Feb 2011) | 1 line

enable nsec3 by default
------------------------------------------------------------------------
r5415 | hserus | 2011-02-28 09:34:14 -0800 (Mon, 28 Feb 2011) | 2 lines

Grab correct lock while reading negative answer cache

------------------------------------------------------------------------
r5414 | hserus | 2011-02-25 10:30:35 -0800 (Fri, 25 Feb 2011) | 3 lines

When looking for zonecuts move up the delegation chain when we get an
out-of-bailiwick answer for an soa record.

------------------------------------------------------------------------
r5413 | hserus | 2011-02-25 10:28:25 -0800 (Fri, 25 Feb 2011) | 2 lines

When searching for soa records look in the negative cache also.

------------------------------------------------------------------------
r5412 | rstory | 2011-02-22 20:47:53 -0800 (Tue, 22 Feb 2011) | 7 lines

res_io_read_udp updates:

 - don't use FIONREAD to figure out how much to read. I was getting
   0 bytes for FIONREAD even though select was reporting fd was
   ready to read.
 - always allocate fixed buffer of max size. 8k isn't that much, and
   the memory isn't around that long
------------------------------------------------------------------------
r5411 | rstory | 2011-02-22 20:47:46 -0800 (Tue, 22 Feb 2011) | 1 line

add debugging to res_io_select_sockets
------------------------------------------------------------------------
r5410 | rstory | 2011-02-22 20:47:36 -0800 (Tue, 22 Feb 2011) | 1 line

add res_nsfallback_ea; fix potential fd leak
------------------------------------------------------------------------
r5409 | rstory | 2011-02-22 20:47:28 -0800 (Tue, 22 Feb 2011) | 1 line

add missing return to non-void functions
------------------------------------------------------------------------
r5408 | rstory | 2011-02-22 20:47:21 -0800 (Tue, 22 Feb 2011) | 4 lines

update res_io cancle/finished functionality

 - add  'all' versions which follow ea_next chain
 - add missing prototype for cancel function
------------------------------------------------------------------------
r5407 | rstory | 2011-02-22 20:47:13 -0800 (Tue, 22 Feb 2011) | 4 lines

add functions to check expected_arrival internals

  - is using a stream transport
  - has a file descriptor that is active in given fdser
------------------------------------------------------------------------
r5406 | hardaker | 2011-02-21 14:22:11 -0800 (Mon, 21 Feb 2011) | 1 line

Added a rule for creating a TAGS file
------------------------------------------------------------------------
r5391 | hardaker | 2011-01-25 15:50:21 -0800 (Tue, 25 Jan 2011) | 1 line

Made log_insert default to the default log_head if NULL is specified
------------------------------------------------------------------------
r5374 | hardaker | 2011-01-04 10:36:36 -0800 (Tue, 04 Jan 2011) | 1 line

2011 copyright update
------------------------------------------------------------------------
r5364 | hserus | 2010-11-15 10:50:24 -0800 (Mon, 15 Nov 2010) | 2 lines

Fix logic for checking if a bit is set in the NSEC bitmap 

------------------------------------------------------------------------
r5363 | hserus | 2010-11-15 10:47:58 -0800 (Mon, 15 Nov 2010) | 6 lines

Define a macro for filtering types that cannot be followed using
CNAMEs/DNAMEs. Use this macro while reading data from cache, while identifying
the answer kind, and while digesting the OTW response.
Ensure that we properly consume saved referral information when we are
returning a hand-crafted error response.

------------------------------------------------------------------------
r5360 | hserus | 2010-11-05 12:04:11 -0700 (Fri, 05 Nov 2010) | 2 lines

Don't match cnames/dnames in cache with queries for records that should not exist with cnames/dnames

------------------------------------------------------------------------
r5359 | rstory | 2010-11-05 11:28:25 -0700 (Fri, 05 Nov 2010) | 1 line

move debug outside conditional
------------------------------------------------------------------------
r5358 | rstory | 2010-11-05 11:28:18 -0700 (Fri, 05 Nov 2010) | 1 line

add prototype for res_async_query_free, use instead of res_free_ea_list
------------------------------------------------------------------------
r5357 | rstory | 2010-11-05 11:28:09 -0700 (Fri, 05 Nov 2010) | 1 line

check for bad fd before using FD_* macros; fix compiler warnings
------------------------------------------------------------------------
r5356 | hserus | 2010-11-05 10:30:10 -0700 (Fri, 05 Nov 2010) | 2 lines

Include arpa/inet.h for inet_pton()

------------------------------------------------------------------------
r5355 | rstory | 2010-11-05 08:22:51 -0700 (Fri, 05 Nov 2010) | 6 lines

misc cleanup

- wrap macro in do while(0)
- add res_free_ea_list
- minimize time lock held during cleanup
- don't free lock if we immediately try to reaquire it
------------------------------------------------------------------------
r5354 | rstory | 2010-11-05 08:22:39 -0700 (Fri, 05 Nov 2010) | 1 line

free transaction resources before returning from get()
------------------------------------------------------------------------
r5353 | rstory | 2010-11-05 08:22:26 -0700 (Fri, 05 Nov 2010) | 1 line

add functions to query/set res_io_debug
------------------------------------------------------------------------
r5352 | rstory | 2010-11-05 08:22:10 -0700 (Fri, 05 Nov 2010) | 1 line

add asynchronous api and test app
------------------------------------------------------------------------
r5351 | rstory | 2010-11-05 08:20:09 -0700 (Fri, 05 Nov 2010) | 5 lines

move parse_name_server from libval to libsres

- change prototype; return ptr to nameserver, instead
  of having a pointer to a pointer as a parameter
- make create_nsaddr_array a function
------------------------------------------------------------------------
r5350 | rstory | 2010-11-05 08:19:52 -0700 (Fri, 05 Nov 2010) | 5 lines

update select related functions

- add handling of timeout and nfds in new res_io_select_info
- call res_io_select_info from res_io_collect_sockets
- flush debug before calling select
------------------------------------------------------------------------
r5349 | hserus | 2010-11-05 08:02:07 -0700 (Fri, 05 Nov 2010) | 2 lines

Decrement the rrset TTL to reflect the actual outstanding time within the cache

------------------------------------------------------------------------
r5348 | rstory | 2010-11-05 08:01:02 -0700 (Fri, 05 Nov 2010) | 4 lines

update res_io_get_a_response

- only allocate space for one nameserver for response
- skip cancelled/expired attempts
------------------------------------------------------------------------
r5347 | rstory | 2010-11-05 08:00:49 -0700 (Fri, 05 Nov 2010) | 6 lines

overhaul res_io_read

- loop over ea_list instead of all possible file descriptors
- change prototype from returning void to integer count of the
  number of sockets that were read from
- close socket when switching to tcp
------------------------------------------------------------------------
r5346 | rstory | 2010-11-05 08:00:35 -0700 (Fri, 05 Nov 2010) | 9 lines

overhaul transaction queue handling

- use ea_remaining_time of -1 to indicate cancel/expired attempt,
  do not remove from the transaction list
- break up res_io_check
  - new function res_io_next_address to move to new name server
    (reduces redundant/copied code)
  - res_io_check_one, called by res_io_check in a loop, handles
    one transaction at a time (prep for async patches)
------------------------------------------------------------------------
r5345 | rstory | 2010-11-05 08:00:20 -0700 (Fri, 05 Nov 2010) | 1 line

check for bad transaction id before getting lock
------------------------------------------------------------------------
r5344 | rstory | 2010-11-05 08:00:07 -0700 (Fri, 05 Nov 2010) | 1 line

rename res_timeout() -> res_get_timeout()
------------------------------------------------------------------------
r5343 | rstory | 2010-11-05 07:59:53 -0700 (Fri, 05 Nov 2010) | 1 line

move send specific code into res_io_send
------------------------------------------------------------------------
r5342 | rstory | 2010-11-05 07:59:36 -0700 (Fri, 05 Nov 2010) | 1 line

merge two node creation calls into one earlier call
------------------------------------------------------------------------
r5340 | hserus | 2010-11-04 07:54:10 -0700 (Thu, 04 Nov 2010) | 2 lines

Changed copyright date

------------------------------------------------------------------------
r5332 | hserus | 2010-10-28 23:02:24 -0700 (Thu, 28 Oct 2010) | 2 lines

In is_trusted_key() look for multiple matching trust anchors within the keyset. 

------------------------------------------------------------------------
r5331 | hserus | 2010-10-28 22:56:55 -0700 (Thu, 28 Oct 2010) | 3 lines

For a keyset containing a locally configured TA, set the assertion status to
VAL_AC_TRUST only if the assertion was verified by the TA. 

------------------------------------------------------------------------
r5329 | hserus | 2010-10-22 11:16:51 -0700 (Fri, 22 Oct 2010) | 2 lines

Perform more sanity check of SOA record returned for DS request. 

------------------------------------------------------------------------
r5328 | hserus | 2010-10-22 07:31:26 -0700 (Fri, 22 Oct 2010) | 2 lines

Set domain name string size to NS_MAXDNAME instead of arbitrarily limiting it to 100 bytes.

------------------------------------------------------------------------
r5327 | hserus | 2010-10-22 07:28:02 -0700 (Fri, 22 Oct 2010) | 2 lines

Don't return EAI_FAIL if getservbyport() fails since we may still have an address to work with.

------------------------------------------------------------------------
r5326 | hserus | 2010-10-21 13:31:05 -0700 (Thu, 21 Oct 2010) | 2 lines

Try validating through dlv if our local TA is broken and we only prefer the closest TA.

------------------------------------------------------------------------
r5325 | hserus | 2010-10-21 10:18:08 -0700 (Thu, 21 Oct 2010) | 2 lines

In val_getnameinfo() use different port type based on address family

------------------------------------------------------------------------
r5324 | hserus | 2010-10-21 07:52:25 -0700 (Thu, 21 Oct 2010) | 2 lines

Slight modification to getnameinfo() to ensure that we don't use an uninitialized variable.

------------------------------------------------------------------------
r5323 | hserus | 2010-10-21 07:46:43 -0700 (Thu, 21 Oct 2010) | 2 lines

Replace inet_ntoa with inet_ntop

------------------------------------------------------------------------
r5320 | hserus | 2010-10-20 07:49:25 -0700 (Wed, 20 Oct 2010) | 5 lines

Fixed memory leak when re-reading policy files (e.g. if app_policy is set)
Renamed dnsval_list variable to dlist to keep it distinct from struct
dnsval_list


------------------------------------------------------------------------
r5319 | rstory | 2010-10-19 18:16:33 -0700 (Tue, 19 Oct 2010) | 1 line

rearrange conditional to performal local checks before function call
------------------------------------------------------------------------
r5314 | hserus | 2010-10-19 14:16:00 -0700 (Tue, 19 Oct 2010) | 2 lines

Fix memory leak when checking for provably insecure condition.

------------------------------------------------------------------------
r5313 | hserus | 2010-10-19 13:43:45 -0700 (Tue, 19 Oct 2010) | 2 lines

Use zonecut information from rrsig whenever available.

------------------------------------------------------------------------
r5312 | hserus | 2010-10-19 13:41:33 -0700 (Tue, 19 Oct 2010) | 2 lines

Initialize response structure to zeros.

------------------------------------------------------------------------
r5311 | hserus | 2010-10-19 13:40:58 -0700 (Tue, 19 Oct 2010) | 2 lines

Fix memory leak while copying respondent server information.

------------------------------------------------------------------------
r5301 | hserus | 2010-10-14 06:59:55 -0700 (Thu, 14 Oct 2010) | 4 lines

- fix potential memleak while freeing up val_result_chain structure
- check for DLV ANC proof in the queries_for_query chain as apposed to the query chain


------------------------------------------------------------------------
r5299 | hserus | 2010-10-12 11:37:44 -0700 (Tue, 12 Oct 2010) | 2 lines

Check proper message size bounds when parsing response data

------------------------------------------------------------------------
r5298 | hserus | 2010-10-12 11:20:03 -0700 (Tue, 12 Oct 2010) | 2 lines

Initialize response structure prior to running test case

------------------------------------------------------------------------
r5291 | hserus | 2010-10-08 22:11:33 -0700 (Fri, 08 Oct 2010) | 3 lines

Add support to free the complete val_query_chain since we no longer have the
free_query_chain() function

------------------------------------------------------------------------
r5290 | hserus | 2010-10-08 22:10:09 -0700 (Fri, 08 Oct 2010) | 6 lines

Do away with the free_query_chain() function
Removed locks on query structure. Locks on the assertion chain should be 
sufficient to ensure that no two threads modify the query element at the same
time.


------------------------------------------------------------------------
r5289 | hserus | 2010-10-08 22:09:21 -0700 (Fri, 08 Oct 2010) | 6 lines

Fix a memory leak. Properly initialize the soa TTL value. 
Do away with the free_query_structure
Removed locks on query structure. Locks on the assertion chain should be 
sufficient to ensure that no two threads modify the query element at the same
time.

------------------------------------------------------------------------
r5288 | hserus | 2010-10-08 22:07:41 -0700 (Fri, 08 Oct 2010) | 7 lines

When resetting a query do not free the query chain, just free the internal
structure.
Removed locks on query structure. Locks on the assertion chain should be
sufficient to ensure that no two threads modify the query element at the same
time.
Fix a memory leak.

------------------------------------------------------------------------
r5286 | hserus | 2010-10-08 10:04:58 -0700 (Fri, 08 Oct 2010) | 2 lines

Fix couple of memory leaks

------------------------------------------------------------------------
r5285 | hserus | 2010-10-07 07:36:41 -0700 (Thu, 07 Oct 2010) | 2 lines

Acuire the transaction array mutex before reading from the array.

------------------------------------------------------------------------
r5284 | hserus | 2010-10-07 07:34:36 -0700 (Thu, 07 Oct 2010) | 2 lines

Set default valuse for certain variables.

------------------------------------------------------------------------
r5283 | hserus | 2010-10-07 07:33:48 -0700 (Thu, 07 Oct 2010) | 4 lines

Don't modify the cache when we don't hold an exclusive lock (i.e. during a
catch fetch operation). The cache is only updated during a stow()
operation, when we actually hold the exclusive lock.

------------------------------------------------------------------------
r5276 | hserus | 2010-09-30 06:28:45 -0700 (Thu, 30 Sep 2010) | 2 lines

Set qc_flags as opposed to qfq_flags

------------------------------------------------------------------------
r5275 | hserus | 2010-09-29 10:38:43 -0700 (Wed, 29 Sep 2010) | 2 lines

Set the correct flag to re-enable EDNS0 when previously disabled 

------------------------------------------------------------------------
r5273 | hserus | 2010-09-29 07:49:33 -0700 (Wed, 29 Sep 2010) | 2 lines

Use the global policy knob "closest-ta-only yes/no" to control if validation should continue above a broken TA.

------------------------------------------------------------------------
r5270 | hserus | 2010-09-29 06:34:13 -0700 (Wed, 29 Sep 2010) | 5 lines

- Add support to force re-querying of records using the VAL_QUERY_REFRESH_QCACHE flag
- Do DLV validation only if the ZSE for that zone is validate
- Add VAL_IGNORE_VALIDATION as another case where DLV will be attempted
- Allow validation to work for delegations whose ZSE are marked "validate" for a parent zone whose ZSE is marked "ignored" if we have the TA configured for the parent.

------------------------------------------------------------------------
r5269 | hserus | 2010-09-29 06:27:44 -0700 (Wed, 29 Sep 2010) | 3 lines

Rename VAL_QUERY_REFRESH_CACHE to VAL_QUERY_REFRESH_QCACHE so that it is 24
chars long (helps in Net::DNS::SEC::Validator)

------------------------------------------------------------------------
r5268 | hserus | 2010-09-29 06:01:30 -0700 (Wed, 29 Sep 2010) | 2 lines

More restructuring of VAL_QUERY_ flags

------------------------------------------------------------------------
r5245 | hserus | 2010-09-23 20:50:59 -0700 (Thu, 23 Sep 2010) | 2 lines

Don't treat a CNAME/DNAME response for an SOA query as a valid alias chain.

------------------------------------------------------------------------
r5243 | hserus | 2010-09-23 13:51:08 -0700 (Thu, 23 Sep 2010) | 2 lines

Don't retrieve the zonecut information for a name from its DS proof of non-existance.

------------------------------------------------------------------------
r5242 | hserus | 2010-09-23 13:49:24 -0700 (Thu, 23 Sep 2010) | 2 lines

Fix parsing of nsec3 records

------------------------------------------------------------------------
r5240 | hserus | 2010-09-23 10:43:38 -0700 (Thu, 23 Sep 2010) | 2 lines

Treat responses with only addition section data (e.g. EDNS0 opt records) as empty responses

------------------------------------------------------------------------
r5239 | hardaker | 2010-09-21 21:43:23 -0700 (Tue, 21 Sep 2010) | 1 line

update the library version number since there has been a lot of changes
------------------------------------------------------------------------
r5230 | hserus | 2010-09-20 22:28:35 -0700 (Mon, 20 Sep 2010) | 5 lines

Try to clean up passing of pointers by value and reference in various cases.
Use the edns0 size from the name server structure. Set the initial value from
the dnsval.conf policy and fallback to smaller values when the query returns
with a failure condition.

------------------------------------------------------------------------
r5229 | hserus | 2010-09-20 22:28:15 -0700 (Mon, 20 Sep 2010) | 8 lines

Try to be more liberal in what we receive when we query zones that are not
capable of handling EDNS0. When querying for SOA records be prepared to handle
empty non-existence responses in the PNE checks.
Try to be more consistent in the definition and use of VAL_QUERY_ flags.
Specifically, use qc_flags for user-level flags and qfq_flags for maintainting
internal state.
Use the correct DLV break-off condition. DLV does not work quite right yet.

------------------------------------------------------------------------
r5228 | hserus | 2010-09-20 22:27:50 -0700 (Mon, 20 Sep 2010) | 2 lines

Added #ifdefs for IPV6-specific code

------------------------------------------------------------------------
r5227 | hserus | 2010-09-20 22:27:22 -0700 (Mon, 20 Sep 2010) | 4 lines

Restructured stow_ functions(). This will undergo further changes in
the near future such that the cache also keeps track of query flags and EDNS0
information while matching queries.

------------------------------------------------------------------------
r5226 | hserus | 2010-09-20 22:27:05 -0700 (Mon, 20 Sep 2010) | 2 lines

Set EDNS0 size in the name server structure.

------------------------------------------------------------------------
r5225 | hserus | 2010-09-20 22:26:42 -0700 (Mon, 20 Sep 2010) | 4 lines

Store the edns0 size within the the name server structure instead of passing
this value explicitly to different functions.
Use res_create_query_payload() as the means to create the query payload

------------------------------------------------------------------------
r5224 | hserus | 2010-09-20 22:26:21 -0700 (Mon, 20 Sep 2010) | 2 lines

Define new function to try different EDNS0 sizes when a query fails. 

------------------------------------------------------------------------
r5223 | hserus | 2010-09-20 22:25:42 -0700 (Mon, 20 Sep 2010) | 3 lines

Create a new function to create a query payload on demand. We need this when
we're falling back from EDNS0 to non-EDNS0 queries.

------------------------------------------------------------------------
r5222 | hserus | 2010-09-20 22:25:04 -0700 (Mon, 20 Sep 2010) | 3 lines

Restructured query flag definitions. Tried to separate user-defined flags from
purely internal state flags.

------------------------------------------------------------------------
r5221 | hserus | 2010-09-20 22:24:48 -0700 (Mon, 20 Sep 2010) | 3 lines

Store the edns0 size within the the name server structure instead of passing
this value explicitly to different functions.

------------------------------------------------------------------------
r5220 | hserus | 2010-09-20 21:38:18 -0700 (Mon, 20 Sep 2010) | 3 lines

Replace the dnssec-tools.org TAs with the root TA. Set the zone security
expectation accordingly.

------------------------------------------------------------------------
r5183 | rstory | 2010-08-26 21:38:47 -0700 (Thu, 26 Aug 2010) | 3 lines

fix bug#83; don't DEFINE VAL_ROOT_HINTS until after we're done
modifying it.

------------------------------------------------------------------------
r5178 | hserus | 2010-08-19 06:35:25 -0700 (Thu, 19 Aug 2010) | 3 lines

Proofs in the delegation_info structure need to be handled differently for
referrals and for alias chains. 

------------------------------------------------------------------------
r5177 | hserus | 2010-08-18 21:12:10 -0700 (Wed, 18 Aug 2010) | 2 lines

Add better support for proofs accompanying wildcard responses

------------------------------------------------------------------------
r5170 | hserus | 2010-08-06 07:46:00 -0700 (Fri, 06 Aug 2010) | 2 lines

Fix DSA signature verification (thanks tom.fowler).

------------------------------------------------------------------------
r5169 | hserus | 2010-08-04 10:57:53 -0700 (Wed, 04 Aug 2010) | 2 lines

Set the proper array size while computing and comparing SHA hashes 

------------------------------------------------------------------------
r5164 | hserus | 2010-07-22 11:34:20 -0700 (Thu, 22 Jul 2010) | 2 lines

s/global-policy/global-options

------------------------------------------------------------------------
r5163 | hserus | 2010-07-20 09:30:29 -0700 (Tue, 20 Jul 2010) | 3 lines

s/Unsecure/Insecure


------------------------------------------------------------------------
r5162 | hserus | 2010-07-16 09:38:11 -0700 (Fri, 16 Jul 2010) | 2 lines

Fix logic for determining when VAL_QUERY_NO_EDNS0 needs to be reset

------------------------------------------------------------------------
r5161 | hserus | 2010-07-16 08:50:40 -0700 (Fri, 16 Jul 2010) | 2 lines

If we're at a trust point, ensure that EDNS0 is not disabled because we previously encountered a DS pne

------------------------------------------------------------------------
r5160 | hserus | 2010-07-16 08:21:56 -0700 (Fri, 16 Jul 2010) | 2 lines

Define a new flag for disabling EDNS0 in a query: VAL_QUERY_NO_EDNS0

------------------------------------------------------------------------
r5159 | hserus | 2010-07-16 08:21:00 -0700 (Fri, 16 Jul 2010) | 2 lines

Use a pne while following referrals as a hint that DNSSEC may be off below this level (pinsecure zones). Disable EDNS0 in such cases.

------------------------------------------------------------------------
r5158 | hserus | 2010-07-16 08:16:22 -0700 (Fri, 16 Jul 2010) | 2 lines

Disable asking specifically for rrsigs when validating a response 

------------------------------------------------------------------------
r5156 | hserus | 2010-07-07 05:31:32 -0700 (Wed, 07 Jul 2010) | 2 lines

regenerated configure using configure.in from r5155

------------------------------------------------------------------------
r5155 | rstory | 2010-07-06 20:50:38 -0700 (Tue, 06 Jul 2010) | 1 line

make lack of sha-256 support an error; add --disable-sha256-check to turn it into a warning
------------------------------------------------------------------------
r5154 | hserus | 2010-07-06 13:24:13 -0700 (Tue, 06 Jul 2010) | 2 lines

Add SHA1 hash for dnssec-tools TA

------------------------------------------------------------------------
r5144 | hserus | 2010-06-30 08:51:14 -0700 (Wed, 30 Jun 2010) | 2 lines

Keep the api document in sync with current changes. The -08 version is still unpublished.

------------------------------------------------------------------------
r5136 | hardaker | 2010-06-30 07:25:58 -0700 (Wed, 30 Jun 2010) | 1 line

updated root.hints from a recent pull
------------------------------------------------------------------------
r5125 | hserus | 2010-06-29 09:51:45 -0700 (Tue, 29 Jun 2010) | 2 lines

Log entry into val_getaddrinfo() and val_getnameinfo() functions

------------------------------------------------------------------------
r5123 | hserus | 2010-06-29 09:46:11 -0700 (Tue, 29 Jun 2010) | 2 lines

Increment libval revision number

------------------------------------------------------------------------
r5121 | hserus | 2010-06-29 08:59:27 -0700 (Tue, 29 Jun 2010) | 3 lines

Set default ends0 size to a lower value till such time that we have EDNS0 size
fallback implemented

------------------------------------------------------------------------
r5120 | hserus | 2010-06-29 08:53:44 -0700 (Tue, 29 Jun 2010) | 2 lines

Rename free_validator_state as val_free_validator_state

------------------------------------------------------------------------
r5093 | hserus | 2010-06-23 05:47:12 -0700 (Wed, 23 Jun 2010) | 2 lines

Return EAI_FAIL in cases of DNS errors, not EAI_NONAME

------------------------------------------------------------------------
r5092 | hserus | 2010-06-23 05:43:02 -0700 (Wed, 23 Jun 2010) | 2 lines

Don't set the recursive bit when we are iteratively resolving

------------------------------------------------------------------------
r5076 | hserus | 2010-06-16 09:52:22 -0700 (Wed, 16 Jun 2010) | 2 lines

Merge cached responses into answer even when we traverse multiple CNAME/DNAME links

------------------------------------------------------------------------
r5073 | hserus | 2010-06-09 13:08:24 -0700 (Wed, 09 Jun 2010) | 2 lines

Add support for RSASHA256/512 validation (untested)

------------------------------------------------------------------------
r5068 | hserus | 2010-06-02 08:57:05 -0700 (Wed, 02 Jun 2010) | 2 lines

Fetch proper proof assertion when the answer is provably insecure

------------------------------------------------------------------------
r5055 | hserus | 2010-04-20 10:10:00 -0700 (Tue, 20 Apr 2010) | 1 line


------------------------------------------------------------------------
r5050 | hserus | 2010-04-13 13:39:38 -0700 (Tue, 13 Apr 2010) | 2 lines

Add a target for universal build

------------------------------------------------------------------------
r5044 | hserus | 2010-04-09 09:42:42 -0700 (Fri, 09 Apr 2010) | 3 lines

Add backwards compatibility support for the (now deprecated) 
trust-local-answers policy in dnsval.conf

------------------------------------------------------------------------
r5043 | hserus | 2010-04-09 08:53:51 -0700 (Fri, 09 Apr 2010) | 2 lines

Implement couple of fixes for DLV support

------------------------------------------------------------------------
r5041 | hserus | 2010-04-05 11:05:26 -0700 (Mon, 05 Apr 2010) | 2 lines

Removed newline

------------------------------------------------------------------------
r5040 | hserus | 2010-04-05 10:42:19 -0700 (Mon, 05 Apr 2010) | 2 lines

reverted

------------------------------------------------------------------------
r5039 | hserus | 2010-04-05 10:40:38 -0700 (Mon, 05 Apr 2010) | 2 lines

testing commit

------------------------------------------------------------------------
r5032 | hserus | 2010-03-15 07:09:29 -0700 (Mon, 15 Mar 2010) | 2 lines

Updated list of test cases

------------------------------------------------------------------------
r5031 | hserus | 2010-03-15 07:07:18 -0700 (Mon, 15 Mar 2010) | 3 lines

Add another special case for PI checks, so that we won't go into a loop trying to prove the non-existence of RRSIGs for an existing
DS record.

------------------------------------------------------------------------
r5026 | hserus | 2010-03-01 08:06:57 -0800 (Mon, 01 Mar 2010) | 4 lines

- ignore wildcard check for DS non-existence only for NOERROR responses
- when checking for provably insecure names check trustworthiness of names
  using val_istrusted instead of val_isvalidated, to account for optout zones

------------------------------------------------------------------------
r5024 | hserus | 2010-02-28 19:49:35 -0800 (Sun, 28 Feb 2010) | 8 lines

Fix following issues:
- find trust anchors that are at the level of the top-query
- fix some of the error messages
- don't check wildcard proofs while verifying DS non-existence in opt-out zones
- check correct pointer value when NCN proof is missing
- Fix another instance of using a cached zonecut when availabile
- Use VAL_NOTRUST in place of VAL_VERIFIED_CHAIN

------------------------------------------------------------------------
r5023 | hserus | 2010-02-28 19:42:42 -0800 (Sun, 28 Feb 2010) | 2 lines

Try to correctly distinguish between referral and a no data response with NS records

------------------------------------------------------------------------
r5022 | hserus | 2010-02-28 19:39:13 -0800 (Sun, 28 Feb 2010) | 2 lines

Remove unnecessary (and misleading) error code VAL_VERIFIED_CHAIN

------------------------------------------------------------------------
r5021 | hserus | 2010-02-28 19:38:29 -0800 (Sun, 28 Feb 2010) | 2 lines

lower all domain names while verifying signatures

------------------------------------------------------------------------
r5017 | hardaker | 2010-02-12 10:57:41 -0800 (Fri, 12 Feb 2010) | 1 line

change parameter from class to pclass to not conflict with C++ terms
------------------------------------------------------------------------
r5014 | baerm | 2010-02-11 09:57:50 -0800 (Thu, 11 Feb 2010) | 4 lines


Fixed 64-bit segfault issue.


------------------------------------------------------------------------
r4963 | hserus | 2010-01-11 06:28:02 -0800 (Mon, 11 Jan 2010) | 2 lines

Check for proper return value from DSA_verfiy and RSA_verify functions

------------------------------------------------------------------------
r4962 | hserus | 2010-01-08 12:49:45 -0800 (Fri, 08 Jan 2010) | 2 lines

If we already have a DNSKEY we can use to validate, don't try to look for one again

------------------------------------------------------------------------
r4954 | rstory | 2009-12-30 19:09:02 -0800 (Wed, 30 Dec 2009) | 1 line

use libsres_msg_getflag iff ns_msg_getflag is not defined
------------------------------------------------------------------------
r4951 | hardaker | 2009-12-24 10:09:38 -0800 (Thu, 24 Dec 2009) | 1 line

remove the apps/.libs directory on make clean
------------------------------------------------------------------------
r4932 | hserus | 2009-12-11 10:08:50 -0800 (Fri, 11 Dec 2009) | 2 lines

In get_ac_trust check for trust anchors before trying to query for DS or DNSKEY records

------------------------------------------------------------------------
r4931 | hserus | 2009-12-11 09:02:53 -0800 (Fri, 11 Dec 2009) | 2 lines

Supply better fix for breaking out of loop around trust anchor with expired sigs

------------------------------------------------------------------------
r4930 | hserus | 2009-12-11 08:48:02 -0800 (Fri, 11 Dec 2009) | 2 lines

Revert previous change - breaks other tests

------------------------------------------------------------------------
r4929 | hserus | 2009-12-11 08:43:44 -0800 (Fri, 11 Dec 2009) | 4 lines

Set the correct status if the unchecked trust anchor fails to validate. Still
need to fix the extra DS query generation when there is clearly no trust anchor
above.

------------------------------------------------------------------------
r4897 | rstory | 2009-11-18 13:35:25 -0800 (Wed, 18 Nov 2009) | 2 lines

check for EAI_NODATA before using it

------------------------------------------------------------------------
r4883 | rstory | 2009-11-13 09:25:42 -0800 (Fri, 13 Nov 2009) | 2 lines

don't unwrap ipv4 addrs if NI_NUMERICHOST set; strip leading 0s in ipv6 addrs

------------------------------------------------------------------------
r4882 | rstory | 2009-11-13 07:23:17 -0800 (Fri, 13 Nov 2009) | 3 lines

bugfixes: do ipv4 lookup for ipv6 mapped ipv4 addrs; use u_char for addrs;
code cleanup: use sizeof instead of calculating size of array

------------------------------------------------------------------------
r4881 | rstory | 2009-11-12 08:40:11 -0800 (Thu, 12 Nov 2009) | 1 line

fixes for getname ipv6 support
------------------------------------------------------------------------
r4880 | rstory | 2009-11-11 13:34:30 -0800 (Wed, 11 Nov 2009) | 1 line

add ipv6 support to getname app
------------------------------------------------------------------------
r4879 | rstory | 2009-11-11 09:08:21 -0800 (Wed, 11 Nov 2009) | 1 line

tabs to spaces
------------------------------------------------------------------------
r4877 | baerm | 2009-11-10 16:49:46 -0800 (Tue, 10 Nov 2009) | 5 lines


adjusted flags and some length checks,
NUMERICHOST and NAMEREQD flags should work correctly


------------------------------------------------------------------------
r4876 | rstory | 2009-11-10 13:57:04 -0800 (Tue, 10 Nov 2009) | 1 line

fix another typo in new macro
------------------------------------------------------------------------
r4868 | rstory | 2009-11-09 11:53:54 -0800 (Mon, 09 Nov 2009) | 1 line

fix typo in macro
------------------------------------------------------------------------
r4857 | rstory | 2009-11-05 13:22:19 -0800 (Thu, 05 Nov 2009) | 1 line

add VAL_GET*INFO_HAS_STATUS macros; dont use C++ keywords as agruments/struct members
------------------------------------------------------------------------
r4856 | rstory | 2009-11-05 13:20:12 -0800 (Thu, 05 Nov 2009) | 1 line

add extern C wrapper so header can be included in C++ fiels
------------------------------------------------------------------------
r4842 | hserus | 2009-10-30 11:04:52 -0700 (Fri, 30 Oct 2009) | 2 lines

Add current DS record for dnssec-tools.org as a trust anchor

------------------------------------------------------------------------
r4834 | hserus | 2009-10-26 14:56:56 -0700 (Mon, 26 Oct 2009) | 2 lines

Do away with the assertion cache within val_context_t

------------------------------------------------------------------------
r4832 | hserus | 2009-10-26 14:39:28 -0700 (Mon, 26 Oct 2009) | 2 lines

Fixed wrong pointer increment

------------------------------------------------------------------------
r4831 | hserus | 2009-10-26 14:38:39 -0700 (Mon, 26 Oct 2009) | 3 lines

Fixed source of compilation warnings - const correctness and checking for
always true conditions.

------------------------------------------------------------------------
r4830 | hserus | 2009-10-26 14:36:23 -0700 (Mon, 26 Oct 2009) | 2 lines

Fixed const correctness

------------------------------------------------------------------------
r4829 | hserus | 2009-10-26 14:34:34 -0700 (Mon, 26 Oct 2009) | 2 lines

Ifdef NSEC3-specific label

------------------------------------------------------------------------
r4828 | hardaker | 2009-10-26 11:14:04 -0700 (Mon, 26 Oct 2009) | 1 line

ifdef out the nsec3 printing case if not building with nsec3 support
------------------------------------------------------------------------
r4776 | hserus | 2009-10-13 14:55:05 -0700 (Tue, 13 Oct 2009) | 2 lines

Don't display zonecut in log message since this can be null

------------------------------------------------------------------------
r4775 | hserus | 2009-10-13 14:49:57 -0700 (Tue, 13 Oct 2009) | 2 lines

Add couple of log statements

------------------------------------------------------------------------
r4774 | hserus | 2009-10-13 14:41:59 -0700 (Tue, 13 Oct 2009) | 2 lines

Don't fetch glue if we're already fetching glue -- do this properly.

------------------------------------------------------------------------
r4762 | hserus | 2009-10-13 08:23:32 -0700 (Tue, 13 Oct 2009) | 2 lines

Use correct stagger value when querying different name servers

------------------------------------------------------------------------
r4761 | hserus | 2009-10-13 08:21:30 -0700 (Tue, 13 Oct 2009) | 2 lines

Log the name of the correct function being invoked

------------------------------------------------------------------------
r4749 | hserus | 2009-09-30 07:31:20 -0700 (Wed, 30 Sep 2009) | 2 lines

Fix nsec bitmap type checking

------------------------------------------------------------------------
r4744 | hserus | 2009-09-24 13:59:36 -0700 (Thu, 24 Sep 2009) | 2 lines

Fix potential issue with IPv6 glue

------------------------------------------------------------------------
r4742 | hserus | 2009-09-23 09:36:41 -0700 (Wed, 23 Sep 2009) | 2 lines

Q_LAME_SERVER is not a very useful code since other Q_REFERRAL_ERROR may also indicate that we have a lame nameserver.

------------------------------------------------------------------------
r4741 | hserus | 2009-09-23 09:36:10 -0700 (Wed, 23 Sep 2009) | 2 lines

Q_LAME_SERVER is not a very useful code since other Q_REFERRAL_ERROR may also indicate that we have a lame nameserver.

------------------------------------------------------------------------
r4739 | hserus | 2009-09-23 09:13:40 -0700 (Wed, 23 Sep 2009) | 3 lines

Check for referral loops before we bootstrap the new referral. Don't free up the referral structure if we have errors, since we want to be
able to detect referral errors for responses returned from other nameservers too.

------------------------------------------------------------------------
r4738 | hserus | 2009-09-23 07:13:58 -0700 (Wed, 23 Sep 2009) | 2 lines

Return correct type of buffer

------------------------------------------------------------------------
r4736 | hserus | 2009-09-23 06:55:09 -0700 (Wed, 23 Sep 2009) | 3 lines

When verifying proof for wildcard expansion don't rely on trusted but
non-validated proof components

------------------------------------------------------------------------
r4735 | hserus | 2009-09-23 06:52:21 -0700 (Wed, 23 Sep 2009) | 2 lines

Remove unused constant

------------------------------------------------------------------------
r4734 | hserus | 2009-09-22 21:32:49 -0700 (Tue, 22 Sep 2009) | 3 lines

Add initial suport for NSEC3. Also rewrote much of the prove_nonexistence logic
so that it was consistent between nsec and nsec3 proof checking.

------------------------------------------------------------------------
r4733 | hserus | 2009-09-22 21:30:07 -0700 (Tue, 22 Sep 2009) | 2 lines

Allow for 0 length NSEC3 bitfields

------------------------------------------------------------------------
r4732 | hserus | 2009-09-22 21:28:53 -0700 (Tue, 22 Sep 2009) | 2 lines

Minor formatting fixes

------------------------------------------------------------------------
r4731 | hserus | 2009-09-22 21:27:49 -0700 (Tue, 22 Sep 2009) | 2 lines

Support printing of NSEC3 and DS/SHA256 esource records

------------------------------------------------------------------------
r4730 | hserus | 2009-09-22 21:26:10 -0700 (Tue, 22 Sep 2009) | 3 lines

define identifiers for SHA1 and SHA256. Although validator.h contains these
definitions, we don't want libsres to have to depend on validator.h

------------------------------------------------------------------------
r4721 | hserus | 2009-09-14 06:16:34 -0700 (Mon, 14 Sep 2009) | 2 lines

Don't recurse from root if we have a local nameserver listed in resolv.conf

------------------------------------------------------------------------
r4719 | hserus | 2009-09-11 12:57:24 -0700 (Fri, 11 Sep 2009) | 2 lines

Remove DLV and NSEC3 related config params for now

------------------------------------------------------------------------
r4718 | hserus | 2009-09-11 12:29:15 -0700 (Fri, 11 Sep 2009) | 2 lines

remove snip zones

------------------------------------------------------------------------
r4717 | hserus | 2009-09-11 12:25:38 -0700 (Fri, 11 Sep 2009) | 15 lines

Changed the glue fetching logic -- now only fetch glue if none of our existing
name servers are useful. This means that we now keep pending glue around and
have a separate pointer referencing the current glue being fetched.
bootstrap_referral() may return partial glue, never expect complete sets. Use
new functions in libsres to control when we want to skip the current ns and
when we want to cancel the query entirely.

Misc fixes associated with this change:
- set zonecut where appropriate
- fix find_next_zonecut()
- in verify_provably_insecure() try to use existing zonecut information before
attempting to find one using find_next_zonecut()
- dont fetch DNSKEYs too early in a referral chain    


------------------------------------------------------------------------
r4716 | hserus | 2009-09-11 12:06:07 -0700 (Fri, 11 Sep 2009) | 2 lines

Define new query error state denoting a lame server

------------------------------------------------------------------------
r4715 | hserus | 2009-09-11 12:03:52 -0700 (Fri, 11 Sep 2009) | 2 lines

Rely on libval to control query transactions

------------------------------------------------------------------------
r4714 | hserus | 2009-09-11 12:03:09 -0700 (Fri, 11 Sep 2009) | 3 lines

Define new functions that allow libval to control libsres query transactions to
some extent

------------------------------------------------------------------------
r4713 | hserus | 2009-09-11 12:01:39 -0700 (Fri, 11 Sep 2009) | 4 lines

Define functions that enables validator to control libsres query transactions to some extent.
Define new parameter that sets how far apart we should stagger queries to
different authoritative name servers

------------------------------------------------------------------------
r4691 | hserus | 2009-09-04 22:10:48 -0700 (Fri, 04 Sep 2009) | 5 lines

Force query to nameserver listed in validator context before trying other options. 
Fix zonecut information only if we receive answer with aa bit set. 
Cache name server information returned in response only if we did not ask for recursion.
Force RD off when we are not sending to the name server listed in the validator context

------------------------------------------------------------------------
r4690 | hserus | 2009-09-04 19:47:50 -0700 (Fri, 04 Sep 2009) | 3 lines

Fix validation of authentication chains that contain DS records with an
incorrect keytag but with a correct hash of the child key

------------------------------------------------------------------------
r4689 | hserus | 2009-09-04 19:43:12 -0700 (Fri, 04 Sep 2009) | 2 lines

In CREATE_NSADDR_ARRAY break as soon as we run out of memory

------------------------------------------------------------------------
r4688 | hserus | 2009-09-04 19:40:14 -0700 (Fri, 04 Sep 2009) | 2 lines

Change return code from val_parse_ds_rdata if hash algorithm is unknown

------------------------------------------------------------------------
r4687 | hserus | 2009-09-04 19:29:34 -0700 (Fri, 04 Sep 2009) | 2 lines

Add resolver.h to be consistent with other files

------------------------------------------------------------------------
r4686 | hserus | 2009-09-04 19:28:08 -0700 (Fri, 04 Sep 2009) | 2 lines

Include validator-internal.h to get certain structure definitions

------------------------------------------------------------------------
r4685 | hserus | 2009-09-04 19:13:18 -0700 (Fri, 04 Sep 2009) | 2 lines

Add log support for VAL_AC_NO_LINK and VAL_AC_INVALID_DS error codes

------------------------------------------------------------------------
r4684 | hserus | 2009-09-04 19:12:30 -0700 (Fri, 04 Sep 2009) | 3 lines

Break out of potential infinite loop when recursive name server gives bad name
server hints for DS record

------------------------------------------------------------------------
r4683 | hserus | 2009-09-04 19:11:33 -0700 (Fri, 04 Sep 2009) | 2 lines

Fix signed/unsigned mismatch

------------------------------------------------------------------------
r4682 | hserus | 2009-09-04 19:11:05 -0700 (Fri, 04 Sep 2009) | 2 lines

Rename VAL_AC_NO_TRUST_ANCHOR to VAL_AC_NO_LINK

------------------------------------------------------------------------
r4681 | hserus | 2009-09-04 19:10:02 -0700 (Fri, 04 Sep 2009) | 3 lines

Rename VAL_AC_NO_TRUST_ANCHOR to VAL_AC_NO_LINK; add description for
VAL_AC_INVALID_DS

------------------------------------------------------------------------
r4680 | hserus | 2009-09-04 19:08:14 -0700 (Fri, 04 Sep 2009) | 3 lines

Rename VAL_AC_NO_TRUST_ANCHOR to VAL_AC_NO_LINK; update possible error codes
for DS record sets

------------------------------------------------------------------------
r4679 | hserus | 2009-09-04 19:04:30 -0700 (Fri, 04 Sep 2009) | 3 lines

Add error code for VAL_AC_INVALID_DS. Also rename VAL_AC_TRUST_ANCHOR to
VAL_AC_NO_LINK

------------------------------------------------------------------------
r4642 | baerm | 2009-08-20 08:52:55 -0700 (Thu, 20 Aug 2009) | 5 lines


Added to parsing of resolv.conf nameserver token
'[address]:port' format can now be used


------------------------------------------------------------------------
r4541 | hserus | 2009-06-05 09:03:44 -0700 (Fri, 05 Jun 2009) | 2 lines

Changed copyright date to 2009

------------------------------------------------------------------------
r4517 | hardaker | 2009-05-05 06:57:03 -0700 (Tue, 05 May 2009) | 1 line

check for socket() in -lsocket if needed
------------------------------------------------------------------------
r4462 | hardaker | 2009-04-17 08:51:25 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4461 | hardaker | 2009-04-17 08:49:27 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4453 | hardaker | 2009-04-17 08:38:24 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4452 | hardaker | 2009-04-17 08:37:37 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4451 | hardaker | 2009-04-17 08:36:56 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4450 | hardaker | 2009-04-17 08:36:24 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4449 | hardaker | 2009-04-17 08:36:00 -0700 (Fri, 17 Apr 2009) | 1 line


------------------------------------------------------------------------
r4432 | hardaker | 2009-03-20 12:06:13 -0700 (Fri, 20 Mar 2009) | 1 line

update to add sys/types inclusion ahead of arpa/nameser.h
------------------------------------------------------------------------
r4431 | hardaker | 2009-03-20 12:04:42 -0700 (Fri, 20 Mar 2009) | 1 line

update libtool version
------------------------------------------------------------------------
r4423 | marz | 2009-03-17 08:04:45 -0700 (Tue, 17 Mar 2009) | 1 line

fix make clean to clean up old libs
------------------------------------------------------------------------
r4422 | hserus | 2009-03-13 16:00:27 -0700 (Fri, 13 Mar 2009) | 2 lines

Don't try and free val_result_chain when val_resolve_and_check returns an error

------------------------------------------------------------------------
r4421 | hserus | 2009-03-13 14:42:59 -0700 (Fri, 13 Mar 2009) | 2 lines

Fix nsec_sig_match check

------------------------------------------------------------------------
r4420 | hserus | 2009-03-13 14:42:36 -0700 (Fri, 13 Mar 2009) | 2 lines

Add couple of checks for NULL

------------------------------------------------------------------------
r4411 | hserus | 2009-03-04 06:28:55 -0800 (Wed, 04 Mar 2009) | 2 lines

Ensure that rr_next points to NULL.

------------------------------------------------------------------------
r4410 | hserus | 2009-03-04 06:28:15 -0800 (Wed, 04 Mar 2009) | 2 lines

Use appropriate routine for freeing up val_rr_rec structure

------------------------------------------------------------------------
r4409 | hserus | 2009-03-04 06:27:30 -0800 (Wed, 04 Mar 2009) | 2 lines

Reorder some params in structure

------------------------------------------------------------------------
r4403 | hserus | 2009-02-28 02:05:30 -0800 (Sat, 28 Feb 2009) | 4 lines

Add flag to specify if spaces are to be used as delimiters in val_get_token
Make the quote in the trust-anchor dnsval.conf statement optional. This allows us to use the trust
anchor format specified for BIND

------------------------------------------------------------------------
r4399 | hserus | 2009-02-27 06:48:13 -0800 (Fri, 27 Feb 2009) | 3 lines

Trigger DLV logic only when security expectation is set to validate and 
we don't have a trust anchor available 

------------------------------------------------------------------------
r4398 | hserus | 2009-02-27 06:46:37 -0800 (Fri, 27 Feb 2009) | 4 lines

Fetch DNSSEC meta-data when security-expectation is set to validate _and_ we
have a (possible) trust point available
Don't free the respondent server when we create an empty nonexitence proof

------------------------------------------------------------------------
r4383 | hardaker | 2009-02-16 14:17:19 -0800 (Mon, 16 Feb 2009) | 1 line

copyright year update
------------------------------------------------------------------------
r4346 | hardaker | 2009-02-05 14:22:05 -0800 (Thu, 05 Feb 2009) | 1 line

consistent wording in the configure output
------------------------------------------------------------------------
r4345 | hardaker | 2009-02-05 14:20:14 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define gethostbyname: take 3
------------------------------------------------------------------------
r4344 | hardaker | 2009-02-05 14:18:41 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define gethostbyname: take 2
------------------------------------------------------------------------
r4343 | hardaker | 2009-02-05 14:16:44 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define gethostbyname: take 1
------------------------------------------------------------------------
r4342 | hardaker | 2009-02-05 14:03:12 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define getnameinfo: take 3
------------------------------------------------------------------------
r4341 | hardaker | 2009-02-05 14:00:37 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define getnameinfo: take 2
------------------------------------------------------------------------
r4340 | hardaker | 2009-02-05 13:56:17 -0800 (Thu, 05 Feb 2009) | 1 line

attempt to carefully define getnameinfo
------------------------------------------------------------------------
r4330 | hserus | 2009-02-05 08:48:53 -0800 (Thu, 05 Feb 2009) | 2 lines

Set the value of the addrinfo return param

------------------------------------------------------------------------
r4329 | hserus | 2009-02-05 08:48:21 -0800 (Thu, 05 Feb 2009) | 2 lines

Fix logic in removal of first element of the zoneinfo linked list

------------------------------------------------------------------------
r4324 | hserus | 2009-01-30 09:28:10 -0800 (Fri, 30 Jan 2009) | 2 lines

Version submitted as -07

------------------------------------------------------------------------
r4323 | hserus | 2009-01-29 12:36:39 -0800 (Thu, 29 Jan 2009) | 2 lines

reorder rr_next element to be last in the val_rr_rec structure

------------------------------------------------------------------------
r4322 | hserus | 2009-01-29 12:07:04 -0800 (Thu, 29 Jan 2009) | 2 lines

Add reference to new IPR text 

------------------------------------------------------------------------
r4320 | hserus | 2009-01-29 11:38:37 -0800 (Thu, 29 Jan 2009) | 2 lines

Set zonecut when restarting query from root

------------------------------------------------------------------------
r4319 | hserus | 2009-01-29 10:53:49 -0800 (Thu, 29 Jan 2009) | 2 lines

Make DS query less dependent on zonecut information (DNSKEY name is sufficient)

------------------------------------------------------------------------
r4318 | hserus | 2009-01-29 10:40:37 -0800 (Thu, 29 Jan 2009) | 2 lines

restructure code for digest_response

------------------------------------------------------------------------
r4317 | hserus | 2009-01-29 10:37:00 -0800 (Thu, 29 Jan 2009) | 2 lines

 No longer keep separate caches for key and DS records

------------------------------------------------------------------------
r4316 | hserus | 2009-01-29 10:36:11 -0800 (Thu, 29 Jan 2009) | 2 lines

Set the RD bit only if the RES_RECURSE option is specified

------------------------------------------------------------------------
r4315 | hserus | 2009-01-29 10:31:53 -0800 (Thu, 29 Jan 2009) | 2 lines

Display the query state in error response log message

------------------------------------------------------------------------
r4314 | hserus | 2009-01-29 10:11:46 -0800 (Thu, 29 Jan 2009) | 2 lines

Retry queries at least once 

------------------------------------------------------------------------
r4311 | hserus | 2009-01-28 12:28:48 -0800 (Wed, 28 Jan 2009) | 2 lines

Keep documentation in sync with API

------------------------------------------------------------------------
r4310 | hserus | 2009-01-28 12:27:10 -0800 (Wed, 28 Jan 2009) | 2 lines

Current version of validator API to be submitted as -07

------------------------------------------------------------------------
r4305 | hserus | 2009-01-28 11:49:13 -0800 (Wed, 28 Jan 2009) | 24 lines

* Changes to status codes
    - removed the VAL_AC_TRUSTED_ZONE and VAL_TRUSTED_ZONE codes
    - renamed *PROVABLY_INSECURE* to *PINSECURE*
    - renamed VAL_LOCAL_ANSWER to VAL_OOB_ANSWER
* Changes to types
    - using u_char in place of u_int8_t to represent character buffers
    - using size_t where appropriate
    - Decoupled val_rrset_rec from other internal structures. Moved members
    from older val_rrset_digested structure to rrset_rec structure
    - No longer store complete header information in val_rrset_rec; only keep
    rcode information
* Changes to function prototypes
    - using higher order types instead of u_int* variants for exported
    functions
    - val_add_valpolicy() now takes a void * as the second argument
    - No longer pass OTW format domain names for val_resolve_and_check()
* policy-related
    - No longer define a "trusted" zone security expectation since there is no
    way to give it special treatment in the high-level API; the "ignore"
    condition subsumes the "trusted" condition.
    - Define new libval_policy_definition_t structure to encapsulate the
    libval-specific policy definition parameters in val_add_valpolicy()


------------------------------------------------------------------------
r4293 | hardaker | 2009-01-22 15:45:13 -0800 (Thu, 22 Jan 2009) | 1 line

move arpa/nameserv include higher since it's needed before the validator headers
------------------------------------------------------------------------
r4282 | hardaker | 2009-01-07 09:53:42 -0800 (Wed, 07 Jan 2009) | 1 line

rename ns_msg_getflag to libsres_msg_getflag to avoid tricky compiling issues
------------------------------------------------------------------------
r4263 | hardaker | 2008-12-09 16:24:40 -0800 (Tue, 09 Dec 2008) | 1 line

rename a variable so it doesn't conflict with the structure name with stricter compilers
------------------------------------------------------------------------
r4239 | hserus | 2008-09-26 11:22:45 -0700 (Fri, 26 Sep 2008) | 3 lines

Fix buffer overflow problem. Still need to figure out how RSAMD5 keys need to be parsed. 


------------------------------------------------------------------------
r4238 | hserus | 2008-09-26 08:06:18 -0700 (Fri, 26 Sep 2008) | 2 lines

Do some more sanity checking of input values

------------------------------------------------------------------------
r4225 | hardaker | 2008-08-14 10:53:40 -0700 (Thu, 14 Aug 2008) | 1 line

Add configure checks to test for gethostby* function conformance
------------------------------------------------------------------------
r4214 | hserus | 2008-07-22 07:01:21 -0700 (Tue, 22 Jul 2008) | 2 lines

Don't use random()

------------------------------------------------------------------------
r4213 | hserus | 2008-07-22 06:16:19 -0700 (Tue, 22 Jul 2008) | 2 lines

Use random source port and transaction ids

------------------------------------------------------------------------
r4212 | hserus | 2008-07-09 14:08:06 -0700 (Wed, 09 Jul 2008) | 2 lines

Revert previous change. Code not ready for prime time.

------------------------------------------------------------------------
r4211 | hserus | 2008-07-09 12:52:17 -0700 (Wed, 09 Jul 2008) | 2 lines

Randomize the source port. Code is still not IPv6 safe. 

------------------------------------------------------------------------
r4210 | hserus | 2008-07-09 12:46:56 -0700 (Wed, 09 Jul 2008) | 2 lines

Add correct type code for nsec3

------------------------------------------------------------------------
r4161 | hserus | 2008-06-18 14:12:03 -0700 (Wed, 18 Jun 2008) | 2 lines

Add getname objects to the list of files to be cleaned up 

------------------------------------------------------------------------
r4160 | hserus | 2008-06-18 13:42:28 -0700 (Wed, 18 Jun 2008) | 2 lines

Initialize retval to NO_ERROR to keep compiler happy

------------------------------------------------------------------------
r4158 | hardaker | 2008-06-18 13:28:08 -0700 (Wed, 18 Jun 2008) | 1 line

use 2.59 and remove double target check
------------------------------------------------------------------------
r4157 | hserus | 2008-06-18 13:25:48 -0700 (Wed, 18 Jun 2008) | 2 lines

Use autoconf 2.59 to create configure script

------------------------------------------------------------------------
r4155 | hardaker | 2008-06-18 13:18:10 -0700 (Wed, 18 Jun 2008) | 1 line

honor datarootdir
------------------------------------------------------------------------
r4148 | hardaker | 2008-06-11 15:02:18 -0700 (Wed, 11 Jun 2008) | 1 line

define getprogname for solaris
------------------------------------------------------------------------
r4147 | hardaker | 2008-06-11 14:06:50 -0700 (Wed, 11 Jun 2008) | 1 line

allow for other types of _r functions to be overridden depending on the system type
------------------------------------------------------------------------
r4146 | hardaker | 2008-06-11 14:05:50 -0700 (Wed, 11 Jun 2008) | 1 line

include LDFLAGS in the shim compilation
------------------------------------------------------------------------
r4145 | hardaker | 2008-06-11 14:05:05 -0700 (Wed, 11 Jun 2008) | 1 line

define a -D flag for setting the operating system type we're compiling for
------------------------------------------------------------------------
r4144 | hardaker | 2008-06-06 16:58:50 -0700 (Fri, 06 Jun 2008) | 1 line

include the validator config file so it picks up the typedefs being used
------------------------------------------------------------------------
r4143 | hserus | 2008-06-04 05:36:24 -0700 (Wed, 04 Jun 2008) | 2 lines

Continue to operate if included file does not exist

------------------------------------------------------------------------
r4142 | hserus | 2008-06-03 16:42:59 -0700 (Tue, 03 Jun 2008) | 2 lines

create a default context if function argument is NULL

------------------------------------------------------------------------
r4141 | hserus | 2008-06-03 16:39:40 -0700 (Tue, 03 Jun 2008) | 2 lines

create a default context if function argument is NULL

------------------------------------------------------------------------
r4140 | hserus | 2008-06-03 16:37:11 -0700 (Tue, 03 Jun 2008) | 2 lines

- create a default context if function argument is NULL

------------------------------------------------------------------------
r4139 | hserus | 2008-06-03 16:31:45 -0700 (Tue, 03 Jun 2008) | 2 lines

NULL check

------------------------------------------------------------------------
r4128 | hserus | 2008-05-30 07:54:44 -0700 (Fri, 30 May 2008) | 2 lines

Set correct defaults for val_astatus_t and val_status_t

------------------------------------------------------------------------
r4127 | hserus | 2008-05-30 07:54:13 -0700 (Fri, 30 May 2008) | 2 lines

Add man files corresponding to the changed pod

------------------------------------------------------------------------
r4126 | hserus | 2008-05-29 12:24:40 -0700 (Thu, 29 May 2008) | 2 lines

Reorder values for VAL_QUERY_DONT_VALIDATE and VAL_QUERY_NO_AC_DETAIL

------------------------------------------------------------------------
r4122 | hardaker | 2008-05-27 15:29:18 -0700 (Tue, 27 May 2008) | 1 line

clean up whitespace
------------------------------------------------------------------------
r4117 | hserus | 2008-05-27 09:57:18 -0700 (Tue, 27 May 2008) | 2 lines

version submitted as draft-hayatnagarkar-dnsext-validator-api-06

------------------------------------------------------------------------
r4116 | hserus | 2008-05-26 15:15:18 -0700 (Mon, 26 May 2008) | 2 lines

More tweaks to API

------------------------------------------------------------------------
r4108 | hardaker | 2008-05-26 08:17:03 -0700 (Mon, 26 May 2008) | 1 line

version number update
------------------------------------------------------------------------
r4107 | hardaker | 2008-05-26 08:14:28 -0700 (Mon, 26 May 2008) | 1 line

update libtool version
------------------------------------------------------------------------
r4106 | hardaker | 2008-05-26 08:09:12 -0700 (Mon, 26 May 2008) | 1 line

copyright updates
------------------------------------------------------------------------
r4100 | hserus | 2008-05-22 19:13:41 -0700 (Thu, 22 May 2008) | 10 lines

* Create function for resetting query params so that it will use EDNS0 
  the next time it sends out the query
* Set EDNS0 in find_nslist_for_query() in ask_resolver(). Set EDNS0 when we are
  looking for some DNSSEC meta-data or if the zone expection is validation. 
* Reissue query with EDNS0 if a negative response was returned by a zone 
  that was authoritative for both parent and child, but only child had a
  zone security expectation of validate
* Do not reissue query for positive answers, since this can mess up cname
  chains 

------------------------------------------------------------------------
r4099 | hserus | 2008-05-22 19:00:50 -0700 (Thu, 22 May 2008) | 2 lines

Add macro to identify DNSSEC meta-data query types

------------------------------------------------------------------------
r4085 | hserus | 2008-05-20 09:53:29 -0700 (Tue, 20 May 2008) | 2 lines

Add a note that, for DLV, zones should not be marked trusted or untrusted

------------------------------------------------------------------------
r4084 | hserus | 2008-05-20 09:48:51 -0700 (Tue, 20 May 2008) | 2 lines

Don't do DLV validation if we've explicitly marked a zone as trusted or untrusted

------------------------------------------------------------------------
r4079 | hserus | 2008-05-19 11:31:36 -0700 (Mon, 19 May 2008) | 2 lines

Expand environment variables in the dnsval.conf "include" line

------------------------------------------------------------------------
r4069 | hardaker | 2008-05-14 16:19:51 -0700 (Wed, 14 May 2008) | 1 line

changed failure wording to use succeeded instead
------------------------------------------------------------------------
r4061 | hserus | 2008-05-12 11:32:04 -0700 (Mon, 12 May 2008) | 2 lines

Return non-existence status codes when available

------------------------------------------------------------------------
r4060 | hserus | 2008-05-12 11:29:01 -0700 (Mon, 12 May 2008) | 2 lines

Print validation status value

------------------------------------------------------------------------
r4059 | hserus | 2008-05-12 10:31:01 -0700 (Mon, 12 May 2008) | 2 lines

Use val_does_not_exist() instead of checking for proof count (which may be 0 when no authentication chain details are returned)

------------------------------------------------------------------------
r4056 | hserus | 2008-05-12 08:36:08 -0700 (Mon, 12 May 2008) | 2 lines

Set correct default return value

------------------------------------------------------------------------
r4050 | hserus | 2008-05-09 06:02:09 -0700 (Fri, 09 May 2008) | 2 lines

Reset the cache head when the current head element times out. 

------------------------------------------------------------------------
r4026 | hserus | 2008-05-01 07:23:22 -0700 (Thu, 01 May 2008) | 2 lines

Define freeaddrinfo() if it does not exist

------------------------------------------------------------------------
r4015 | hserus | 2008-04-30 12:23:03 -0700 (Wed, 30 Apr 2008) | 2 lines

Don't increment number of proofs in result structure if we're not going to be storing details about them

------------------------------------------------------------------------
r4014 | hserus | 2008-04-30 12:22:39 -0700 (Wed, 30 Apr 2008) | 2 lines

Specify the VAL_QUERY_NO_AC_DETAIL flag to val_resolve_and_check

------------------------------------------------------------------------
r4013 | hserus | 2008-04-30 12:22:02 -0700 (Wed, 30 Apr 2008) | 2 lines

The -m option is no longer defined.

------------------------------------------------------------------------
r4012 | hserus | 2008-04-30 12:21:26 -0700 (Wed, 30 Apr 2008) | 2 lines

Obsolete val_query/val_free_response and the VAL_QUERY_MERGE_RRSETS flag

------------------------------------------------------------------------
r4009 | hserus | 2008-04-23 10:04:55 -0700 (Wed, 23 Apr 2008) | 2 lines

Change flag size to u_int32_t

------------------------------------------------------------------------
r4008 | hserus | 2008-04-23 10:03:50 -0700 (Wed, 23 Apr 2008) | 2 lines

Change flag size to u_int32_t

------------------------------------------------------------------------
r4007 | hserus | 2008-04-23 10:02:49 -0700 (Wed, 23 Apr 2008) | 2 lines

Change flag size to u_int32_t

------------------------------------------------------------------------
r4006 | hserus | 2008-04-23 10:01:56 -0700 (Wed, 23 Apr 2008) | 2 lines

Change flag size to u_int32_t

------------------------------------------------------------------------
r4005 | hserus | 2008-04-23 08:19:50 -0700 (Wed, 23 Apr 2008) | 2 lines

Make error list ordering consistent with API draft

------------------------------------------------------------------------
r4004 | hserus | 2008-04-23 08:19:30 -0700 (Wed, 23 Apr 2008) | 7 lines

Use single error codes VAL_AC_DNS_ERROR and VAL_DNS_ERROR instead of all the
possible variants
Rename unsecure to insecure
Rename VAL_DONT_GO_FURTHER to VAL_BARE_TRUST_KEY
Use single VAL_BOGUS state instead of differentiating between
VAL_BOGUS_PROVABLE and VAL_BOGUS_UNPROVABLE

------------------------------------------------------------------------
r4003 | hserus | 2008-04-23 08:18:57 -0700 (Wed, 23 Apr 2008) | 2 lines

Rename unsecure to insecure

------------------------------------------------------------------------
r4002 | hserus | 2008-04-23 08:18:35 -0700 (Wed, 23 Apr 2008) | 4 lines

rename unsecure to insecure
Print config file information as LOG_NOTICE
Check for NULL before using global options

------------------------------------------------------------------------
r4001 | hserus | 2008-04-23 08:18:17 -0700 (Wed, 23 Apr 2008) | 2 lines

Use single VAL_DNS_ERROR condition instead of a bunch of types

------------------------------------------------------------------------
r4000 | hserus | 2008-04-23 08:17:55 -0700 (Wed, 23 Apr 2008) | 2 lines

bring doc in sync with current code

------------------------------------------------------------------------
r3999 | hserus | 2008-04-23 08:16:53 -0700 (Wed, 23 Apr 2008) | 4 lines

Document val_get_rrset()
Change size of flags to 32 bits
Change UNSECURE to INSECURE

------------------------------------------------------------------------
r3998 | hserus | 2008-04-23 08:16:10 -0700 (Wed, 23 Apr 2008) | 2 lines

Document val_get_rrset()

------------------------------------------------------------------------
r3997 | hserus | 2008-04-23 08:15:34 -0700 (Wed, 23 Apr 2008) | 2 lines

Add documentation for various command line programs

------------------------------------------------------------------------
r3996 | hserus | 2008-04-23 08:14:38 -0700 (Wed, 23 Apr 2008) | 2 lines

Rename unsecure to insecure

------------------------------------------------------------------------
r3995 | hserus | 2008-04-23 08:14:14 -0700 (Wed, 23 Apr 2008) | 3 lines

Use the dnsval.conf file given with the -d option, else use the system
dnsval.conf file

------------------------------------------------------------------------
r3994 | hserus | 2008-04-23 08:13:45 -0700 (Wed, 23 Apr 2008) | 2 lines

Add usage for -o option

------------------------------------------------------------------------
r3993 | hserus | 2008-04-23 08:13:05 -0700 (Wed, 23 Apr 2008) | 2 lines

Use latest set of error codes from val_errors.h

------------------------------------------------------------------------
r3992 | hserus | 2008-04-23 08:11:44 -0700 (Wed, 23 Apr 2008) | 2 lines

Renamed unsecure to insecure

------------------------------------------------------------------------
r3991 | hserus | 2008-04-23 08:11:18 -0700 (Wed, 23 Apr 2008) | 5 lines

Remove all out of date comments
Replace all DNS error codes with a single error code
Make error list ordering consistent with API draft
Renamed UNSECURE to INSECURE

------------------------------------------------------------------------
r3985 | hserus | 2008-04-21 11:24:27 -0700 (Mon, 21 Apr 2008) | 2 lines

Remande val_query to val_res_query

------------------------------------------------------------------------
r3984 | hserus | 2008-04-21 11:22:49 -0700 (Mon, 21 Apr 2008) | 2 lines

Remove reference to val_query

------------------------------------------------------------------------
r3983 | hserus | 2008-04-17 09:21:55 -0700 (Thu, 17 Apr 2008) | 4 lines

Add documentation on val_log_add_optarg()
Remove description for functions that allow users to manipulate locations for
various configuration files

------------------------------------------------------------------------
r3982 | hserus | 2008-04-16 10:28:59 -0700 (Wed, 16 Apr 2008) | 2 lines

Document some of the new policy hooks

------------------------------------------------------------------------
r3981 | hserus | 2008-04-15 13:38:09 -0700 (Tue, 15 Apr 2008) | 2 lines

Incremental fix for EDNS0; still have to figure out best way to handle EDNS0 queries

------------------------------------------------------------------------
r3980 | hserus | 2008-04-15 13:29:28 -0700 (Tue, 15 Apr 2008) | 3 lines

changes to make dlv logic work a little better. EDNS0 logic in dlv still needs
to be fine-tuned

------------------------------------------------------------------------
r3979 | hserus | 2008-04-15 13:23:34 -0700 (Tue, 15 Apr 2008) | 2 lines

Move code for reading VAL_LOG_TARGET to val_policy

------------------------------------------------------------------------
r3978 | hserus | 2008-04-15 13:22:38 -0700 (Tue, 15 Apr 2008) | 3 lines

Remove existing log targets before adding new ones during a conf file
re-read

------------------------------------------------------------------------
r3977 | hserus | 2008-04-15 13:21:29 -0700 (Tue, 15 Apr 2008) | 4 lines

change val_log_add_* functions so that we add log target to the given list
instead of a static object
Add new funtion val_log_add_optarg_to_list() to add a log target to given list

------------------------------------------------------------------------
r3976 | hserus | 2008-04-15 13:20:25 -0700 (Tue, 15 Apr 2008) | 2 lines

Add log target to context

------------------------------------------------------------------------
r3965 | hserus | 2008-04-10 08:06:58 -0700 (Thu, 10 Apr 2008) | 2 lines

read VAL_LOG_TARGET only after context is created

------------------------------------------------------------------------
r3964 | hserus | 2008-04-10 08:03:50 -0700 (Thu, 10 Apr 2008) | 3 lines

check for in-bailiwick condition before attempting to store name server
information to cache

------------------------------------------------------------------------
r3963 | hserus | 2008-04-10 08:02:44 -0700 (Thu, 10 Apr 2008) | 2 lines

Ensure that log target from environment is specified at the correct time. 

------------------------------------------------------------------------
r3960 | marz | 2008-03-27 16:07:39 -0700 (Thu, 27 Mar 2008) | 1 line

fix for linux progname
------------------------------------------------------------------------
r3959 | marz | 2008-03-26 07:23:19 -0700 (Wed, 26 Mar 2008) | 1 line

libval_shim changes related to logging env. var. support in libval
------------------------------------------------------------------------
r3958 | hserus | 2008-03-19 12:28:23 -0700 (Wed, 19 Mar 2008) | 2 lines

Check for non-existence

------------------------------------------------------------------------
r3957 | hserus | 2008-03-19 11:13:55 -0700 (Wed, 19 Mar 2008) | 1 line

rename gopt to g_opt
------------------------------------------------------------------------
r3956 | hserus | 2008-03-19 11:08:07 -0700 (Wed, 19 Mar 2008) | 2 lines

Save current log channel to context

------------------------------------------------------------------------
r3955 | hserus | 2008-03-19 10:28:36 -0700 (Wed, 19 Mar 2008) | 2 lines

Add support for reading logging preference from the VAL_LOG_TARGET env variable and from a "log" global option

------------------------------------------------------------------------
r3954 | hserus | 2008-03-19 10:26:14 -0700 (Wed, 19 Mar 2008) | 2 lines

Add definition for log_target

------------------------------------------------------------------------
r3953 | marz | 2008-03-19 10:23:51 -0700 (Wed, 19 Mar 2008) | 1 line

related changes to support moving policy context label enviroment variable app name logic to libval itself
------------------------------------------------------------------------
r3952 | hserus | 2008-03-18 12:51:06 -0700 (Tue, 18 Mar 2008) | 2 lines

Add default for env-policy and app-policy

------------------------------------------------------------------------
r3951 | hserus | 2008-03-18 12:49:40 -0700 (Tue, 18 Mar 2008) | 4 lines

* rename the_null_context to the_default_context
* the default context is not necessarily the "null" context, since labels may be overriden by global
options. In such cases, the default policy is the overriding policy.

------------------------------------------------------------------------
r3950 | hserus | 2008-03-18 12:49:17 -0700 (Tue, 18 Mar 2008) | 2 lines

Modify prototype for read_val_config_file() function

------------------------------------------------------------------------
r3949 | hserus | 2008-03-18 12:49:05 -0700 (Tue, 18 Mar 2008) | 6 lines

* Add logic to parse new fields in global options
* if there is duplication in policy, use the first definition and ignore later
(instead of doing the reverse)
* Change the dnsval.conf file parsing logic -- allow the app-policy and
env-policy options to control how the files get (re-)read with the correct label.

------------------------------------------------------------------------
r3948 | hserus | 2008-03-18 12:48:16 -0700 (Tue, 18 Mar 2008) | 2 lines

add definitions for app-policy and env-policy global options

------------------------------------------------------------------------
r3947 | hserus | 2008-03-18 08:30:35 -0700 (Tue, 18 Mar 2008) | 2 lines

Check in modified man page

------------------------------------------------------------------------
r3946 | hserus | 2008-03-18 08:04:52 -0700 (Tue, 18 Mar 2008) | 2 lines

Add test program from val_res_query()

------------------------------------------------------------------------
r3945 | hserus | 2008-03-17 08:23:47 -0700 (Mon, 17 Mar 2008) | 2 lines

Remove policy bits that are no longer pertinent

------------------------------------------------------------------------
r3944 | hserus | 2008-03-17 06:41:10 -0700 (Mon, 17 Mar 2008) | 2 lines

Remove keys that had grown stale

------------------------------------------------------------------------
r3941 | hserus | 2008-03-12 07:24:19 -0700 (Wed, 12 Mar 2008) | 2 lines

Change value for VAL_QUERY_MERGE_RRSETS flag

------------------------------------------------------------------------
r3940 | marz | 2008-03-08 11:24:19 -0800 (Sat, 08 Mar 2008) | 1 line

changes relsated to recent API update
------------------------------------------------------------------------
r3939 | hserus | 2008-03-07 07:22:00 -0800 (Fri, 07 Mar 2008) | 3 lines

Use addrinfo instead of val_addrinfo
Use val_get_rrset() instead of val_resolve_and_check()

------------------------------------------------------------------------
r3938 | hserus | 2008-03-07 07:21:44 -0800 (Fri, 07 Mar 2008) | 3 lines

Add new flag to bootstrap_referral() to allow the calling function to specify
that it does not want any partial name server information returned

------------------------------------------------------------------------
r3937 | hserus | 2008-03-07 07:21:23 -0800 (Fri, 07 Mar 2008) | 7 lines

* Rename struct val_rrset to struct val_rrset_rec
* Populate new values of val_result_chain structure: val_rc_rrset and
 val_rc_alias
* Rename VAL_QFLAGS_AFFECTS_CACHING to VAL_Q_ONLY_MATCHING_FLAGS
* Do not return complete authentication chain(s) if VAL_QUERY_NO_AC_DETAIL was
 specified

------------------------------------------------------------------------
r3936 | hserus | 2008-03-07 07:21:02 -0800 (Fri, 07 Mar 2008) | 3 lines

remove elements in cache that have reached their expiry time
Ensure that nameservers returned from cache are not incomplete

------------------------------------------------------------------------
r3935 | hserus | 2008-03-07 07:20:49 -0800 (Fri, 07 Mar 2008) | 2 lines

Rename struct val_rrset to struct val_rrset_rec

------------------------------------------------------------------------
r3934 | hserus | 2008-03-07 07:20:11 -0800 (Fri, 07 Mar 2008) | 2 lines

Add definition for val_get_rrset() and val_free_answer_chain() functions

------------------------------------------------------------------------
r3933 | hserus | 2008-03-07 07:19:04 -0800 (Fri, 07 Mar 2008) | 2 lines

Use addrinfo instead of val_addrinfo

------------------------------------------------------------------------
r3932 | hserus | 2008-03-07 07:18:38 -0800 (Fri, 07 Mar 2008) | 2 lines

Add new utility for testing the val_get_rrset() function

------------------------------------------------------------------------
r3931 | hserus | 2008-03-07 07:16:17 -0800 (Fri, 07 Mar 2008) | 3 lines

Add description for VAL_QUERY_NO_AC_DETAIL and changes in structure
definitions.

------------------------------------------------------------------------
r3930 | hserus | 2008-03-07 07:15:45 -0800 (Fri, 07 Mar 2008) | 2 lines

Use addrinfo instead of val_addrinfo

------------------------------------------------------------------------
r3929 | hserus | 2008-03-07 07:15:01 -0800 (Fri, 07 Mar 2008) | 3 lines

Remove help for val_query() and val_free_response(). These functions will soon
be obsoleted; only val_res_query() will remain.

------------------------------------------------------------------------
r3928 | hserus | 2008-03-07 07:14:08 -0800 (Fri, 07 Mar 2008) | 19 lines

* Add new flag VAL_QUERY_NO_AC_DETAIL to prevent authentication chain details
 from being returned
* Rename VAL_QFLAGS_AFFECTS_CACHING to VAL_Q_ONLY_MATCHING_FLAGS
* Define new struct rr_rec, containing only rr information
* Reorder elements of struct val_rr_rec so that it can be directly typecast to
 struct rr_rec
* Rename struct val_rrset to struct val_rrset_rec
* Add two new members to the val_result_chain structure:
  - val_rc_alias points to name referenced by the cname/dname alias in result
  (if any)
  - val_rc_rrset points to the val_rrset_rec structure for the answer
    returned in val_rc_answer
* Define new structure val_answer_chain that contains only rrset
 information (without details) and validation status for a given
 name/class/type
* Add prototypes for new val_get_rrset() and val_free_answer_chain()
 functions


------------------------------------------------------------------------
r3927 | hserus | 2008-03-07 07:12:46 -0800 (Fri, 07 Mar 2008) | 2 lines

Rename struct val_rrset to struct val_rrset_rec

------------------------------------------------------------------------
r3925 | marz | 2008-02-25 12:45:04 -0800 (Mon, 25 Feb 2008) | 1 line

libval-shim doc makefile change
------------------------------------------------------------------------
r3924 | marz | 2008-02-25 12:41:48 -0800 (Mon, 25 Feb 2008) | 1 line

libval_shim docs
------------------------------------------------------------------------
r3919 | hserus | 2008-02-22 08:31:27 -0800 (Fri, 22 Feb 2008) | 2 lines

Global search and replace rr_rec to val_rr_rec

------------------------------------------------------------------------
r3918 | hserus | 2008-02-22 08:21:51 -0800 (Fri, 22 Feb 2008) | 2 lines

Dont use the policy label from the enviroment. Delegate this to libval_shim

------------------------------------------------------------------------
r3917 | hserus | 2008-02-22 06:45:18 -0800 (Fri, 22 Feb 2008) | 3 lines

Look for a label specified in the environment VAL_CONTEXT_LABEL if one is not
specified by the application

------------------------------------------------------------------------
r3916 | hserus | 2008-02-22 06:43:10 -0800 (Fri, 22 Feb 2008) | 4 lines

Don't fail if one of the included dnsval.conf files is missing.
Fix order for included dnsval.conf files
Use default /etc/resolv.conf file if user-specified file is missing

------------------------------------------------------------------------
r3915 | hserus | 2008-02-22 06:39:41 -0800 (Fri, 22 Feb 2008) | 3 lines

Define VAL_CONTEXT_LABEL and VAL_DEFAULT_RESOLV_CONF. Also fix algorithm
identifiers for NSEC3

------------------------------------------------------------------------
r3914 | hserus | 2008-02-21 13:16:43 -0800 (Thu, 21 Feb 2008) | 2 lines

Try to operate even if root.hints was missing

------------------------------------------------------------------------
r3913 | hserus | 2008-02-21 10:26:01 -0800 (Thu, 21 Feb 2008) | 2 lines

Don't lose the value of matched_q->qc_ns_list during cname lookup 

------------------------------------------------------------------------
r3912 | hserus | 2008-02-21 10:24:50 -0800 (Thu, 21 Feb 2008) | 2 lines

Swap big and little arguments to namename

------------------------------------------------------------------------
r3911 | hserus | 2008-02-21 10:24:23 -0800 (Thu, 21 Feb 2008) | 2 lines

Properly read the "forward" line

------------------------------------------------------------------------
r3910 | hserus | 2008-02-20 11:16:00 -0800 (Wed, 20 Feb 2008) | 2 lines

Updated root.hints

------------------------------------------------------------------------
r3909 | hserus | 2008-02-20 09:46:22 -0800 (Wed, 20 Feb 2008) | 2 lines

Minor fixes

------------------------------------------------------------------------
r3908 | hserus | 2008-02-19 17:29:47 -0800 (Tue, 19 Feb 2008) | 2 lines

Support DS record trust anchors 

------------------------------------------------------------------------
r3907 | hserus | 2008-02-18 12:57:20 -0800 (Mon, 18 Feb 2008) | 2 lines

Changes to the API based on comments received

------------------------------------------------------------------------
r3906 | marz | 2008-02-18 08:16:59 -0800 (Mon, 18 Feb 2008) | 1 line

handle val_addrinfo platform specific structure definition
------------------------------------------------------------------------
r3905 | marz | 2008-02-18 08:05:43 -0800 (Mon, 18 Feb 2008) | 1 line

macosx compile
------------------------------------------------------------------------
r3904 | marz | 2008-02-18 08:02:51 -0800 (Mon, 18 Feb 2008) | 1 line

macosx compile
------------------------------------------------------------------------
r3903 | marz | 2008-02-18 07:59:26 -0800 (Mon, 18 Feb 2008) | 1 line

macosx compile
------------------------------------------------------------------------
r3902 | marz | 2008-02-18 07:53:39 -0800 (Mon, 18 Feb 2008) | 1 line

 handle getprogname() vs program_invocation_shortname
------------------------------------------------------------------------
r3901 | hserus | 2008-02-18 07:09:42 -0800 (Mon, 18 Feb 2008) | 2 lines

Use autoconf version 2.59

------------------------------------------------------------------------
r3900 | marz | 2008-02-17 10:59:43 -0800 (Sun, 17 Feb 2008) | 1 line

Makefile fixes
------------------------------------------------------------------------
r3899 | marz | 2008-02-17 10:58:55 -0800 (Sun, 17 Feb 2008) | 1 line

add libval_shim suport to validator makefile
------------------------------------------------------------------------
r3898 | marz | 2008-02-17 10:57:54 -0800 (Sun, 17 Feb 2008) | 1 line

add libval_shim support to configure
------------------------------------------------------------------------
r3875 | hserus | 2008-02-14 13:16:48 -0800 (Thu, 14 Feb 2008) | 2 lines

Add another log message during glue fetch operation

------------------------------------------------------------------------
r3874 | hserus | 2008-02-14 13:11:54 -0800 (Thu, 14 Feb 2008) | 2 lines

revert previous change

------------------------------------------------------------------------
r3873 | hserus | 2008-02-14 13:04:28 -0800 (Thu, 14 Feb 2008) | 3 lines

Return EINVAL if address family is neither AF_INET6 nor AF_INET. 


------------------------------------------------------------------------
r3872 | hserus | 2008-02-14 12:51:28 -0800 (Thu, 14 Feb 2008) | 2 lines

Fix ciritical bug in validation algorithm: the chain was being marked valid without checking if the key marked as the trust anchor has a signature over the apex DNSKEY RRset.

------------------------------------------------------------------------
r3871 | hserus | 2008-02-14 12:30:03 -0800 (Thu, 14 Feb 2008) | 2 lines

Allow clock skew policy to contain negative values

------------------------------------------------------------------------
r3870 | hserus | 2008-02-14 11:56:36 -0800 (Thu, 14 Feb 2008) | 2 lines

Change order of VAL_FROM_* definitions so that API reads better

------------------------------------------------------------------------
r3864 | marz | 2008-02-13 08:37:54 -0800 (Wed, 13 Feb 2008) | 1 line

doc fixes, fail on unimplemented wrapper
------------------------------------------------------------------------
r3862 | marz | 2008-02-12 17:27:46 -0800 (Tue, 12 Feb 2008) | 1 line

libval shim README
------------------------------------------------------------------------
r3861 | marz | 2008-02-12 15:45:27 -0800 (Tue, 12 Feb 2008) | 1 line

handle context creation based on app name or env var LIBVAL_SHIM_CONTEXT
------------------------------------------------------------------------
r3857 | marz | 2008-02-11 16:00:12 -0800 (Mon, 11 Feb 2008) | 1 line

set logging only once
------------------------------------------------------------------------
r3856 | marz | 2008-02-11 13:54:22 -0800 (Mon, 11 Feb 2008) | 1 line

fixes to val_getnameinfo() and val_getaddrinfo() flag handling
------------------------------------------------------------------------
r3850 | marz | 2008-02-08 10:39:40 -0800 (Fri, 08 Feb 2008) | 1 line

libval_shim fixes
------------------------------------------------------------------------
r3849 | marz | 2008-02-07 08:32:19 -0800 (Thu, 07 Feb 2008) | 1 line

fix port and service handling in getnameinfo
------------------------------------------------------------------------
r3848 | marz | 2008-02-07 08:30:30 -0800 (Thu, 07 Feb 2008) | 1 line

fix port passing
------------------------------------------------------------------------
r3847 | marz | 2008-02-06 14:02:02 -0800 (Wed, 06 Feb 2008) | 1 line

make support
------------------------------------------------------------------------
r3846 | marz | 2008-02-06 12:32:50 -0800 (Wed, 06 Feb 2008) | 1 line

make support
------------------------------------------------------------------------
r3845 | marz | 2008-02-06 09:32:53 -0800 (Wed, 06 Feb 2008) | 1 line

fix getaddrinfo for locally trusted answer
------------------------------------------------------------------------
r3844 | marz | 2008-02-04 15:29:42 -0800 (Mon, 04 Feb 2008) | 1 line

fixed return of trusted result
------------------------------------------------------------------------
r3843 | marz | 2008-02-04 13:38:36 -0800 (Mon, 04 Feb 2008) | 1 line

wrappers for key functions
------------------------------------------------------------------------
r3842 | marz | 2008-02-04 12:47:02 -0800 (Mon, 04 Feb 2008) | 1 line

testprogram for getnameinfo
------------------------------------------------------------------------
r3826 | marz | 2008-01-24 12:09:48 -0800 (Thu, 24 Jan 2008) | 1 line

libval_shim infrastructure
------------------------------------------------------------------------
r3825 | marz | 2008-01-24 11:47:20 -0800 (Thu, 24 Jan 2008) | 1 line

libval_shim infrastructure
------------------------------------------------------------------------
r3812 | rstory | 2008-01-08 15:44:48 -0800 (Tue, 08 Jan 2008) | 1 line

ignore generated files
------------------------------------------------------------------------
r3811 | rstory | 2008-01-08 15:42:42 -0800 (Tue, 08 Jan 2008) | 1 line

ignore generated files
------------------------------------------------------------------------
r3810 | rstory | 2008-01-08 15:29:58 -0800 (Tue, 08 Jan 2008) | 1 line

use $(RM) instead of rm
------------------------------------------------------------------------
r3767 | hserus | 2007-10-29 13:14:40 -0700 (Mon, 29 Oct 2007) | 2 lines

Add new key for dnssec-tools.org

------------------------------------------------------------------------
r3766 | hserus | 2007-10-29 13:03:23 -0700 (Mon, 29 Oct 2007) | 2 lines

Add SNIP zones to dnsval.conf file

------------------------------------------------------------------------
r3762 | rstory | 2007-10-09 08:18:25 -0700 (Tue, 09 Oct 2007) | 1 line

add OpenBSD to list of systems w/non const res_sym
------------------------------------------------------------------------
r3761 | rstory | 2007-10-09 08:15:04 -0700 (Tue, 09 Oct 2007) | 3 lines

do not include local arpa/header.h if system one exists
define NS_ versions of (H|Q|RR)FIXEDSZ if needed

------------------------------------------------------------------------
r3760 | rstory | 2007-10-09 08:12:38 -0700 (Tue, 09 Oct 2007) | 1 line

do not include local arpa/header.h if system one exists
------------------------------------------------------------------------
r3759 | rstory | 2007-10-09 06:47:35 -0700 (Tue, 09 Oct 2007) | 1 line

define various constants if not found in any system header
------------------------------------------------------------------------
r3758 | rstory | 2007-10-09 06:46:19 -0700 (Tue, 09 Oct 2007) | 1 line

do not include local arpa/header.h if system one exists
------------------------------------------------------------------------
r3757 | rstory | 2007-10-09 06:44:24 -0700 (Tue, 09 Oct 2007) | 1 line

use EINVAL instead of EBADMSG
------------------------------------------------------------------------
r3756 | rstory | 2007-10-09 06:43:43 -0700 (Tue, 09 Oct 2007) | 1 line

include pthreads if needed
------------------------------------------------------------------------
r3754 | hserus | 2007-10-05 06:48:49 -0700 (Fri, 05 Oct 2007) | 3 lines

Define the EAI_NODATA code if it is not defined by the system (FreeBSD for
example)

------------------------------------------------------------------------
r3753 | hserus | 2007-10-05 06:17:25 -0700 (Fri, 05 Oct 2007) | 2 lines

Use the predefined __NetBSD__ instead of defining a new macro

------------------------------------------------------------------------
r3752 | hserus | 2007-10-05 06:06:50 -0700 (Fri, 05 Oct 2007) | 2 lines

Export ns_get(put)16(32) symbols from libsres

------------------------------------------------------------------------
r3751 | hserus | 2007-10-05 06:01:23 -0700 (Fri, 05 Oct 2007) | 2 lines

Hack to declare different prototypes for ns_(get/put)(16/32)

------------------------------------------------------------------------
r3750 | hserus | 2007-10-04 12:29:53 -0700 (Thu, 04 Oct 2007) | 2 lines

Use select if pselect is not available

------------------------------------------------------------------------
r3749 | hserus | 2007-10-04 08:31:18 -0700 (Thu, 04 Oct 2007) | 2 lines

Use exact sizes for ttl and clock skew

------------------------------------------------------------------------
r3748 | hserus | 2007-10-04 08:08:45 -0700 (Thu, 04 Oct 2007) | 2 lines

Be precise about sizes

------------------------------------------------------------------------
r3746 | hserus | 2007-09-28 06:50:27 -0700 (Fri, 28 Sep 2007) | 2 lines

Add closing bracket if nsec3 is not defined

------------------------------------------------------------------------
r3745 | hserus | 2007-09-26 13:13:51 -0700 (Wed, 26 Sep 2007) | 3 lines

Set the default resolv.conf file to be empty, so that validate has a better chance of succeeding.


------------------------------------------------------------------------
r3744 | hserus | 2007-09-25 20:28:49 -0700 (Tue, 25 Sep 2007) | 2 lines

Revert previous change. Better to check for portability before commiting this change in.

------------------------------------------------------------------------
r3743 | hserus | 2007-09-25 20:26:12 -0700 (Tue, 25 Sep 2007) | 2 lines

Export symbols for ns_getxx and ns_putxx. This will probabaly have some portability issues, so it will need to be tested.

------------------------------------------------------------------------
r3732 | hserus | 2007-09-25 07:32:40 -0700 (Tue, 25 Sep 2007) | 2 lines

Re-introduce the ns_netint.c file

------------------------------------------------------------------------
r3731 | hserus | 2007-09-25 07:31:39 -0700 (Tue, 25 Sep 2007) | 4 lines

Use label_bytes_cmp in place of nsec3_order_cmp.
Changed log levels for certain log messages
Perform sanity check of zonecut seen on RRSIGs for DS records

------------------------------------------------------------------------
r3730 | hserus | 2007-09-25 07:28:21 -0700 (Tue, 25 Sep 2007) | 5 lines

No longer using recursive logic for labelcmp. Instead, break this function into
two sub-functions: label_bytes_cmp and labelcmp. No longer using
nsec3_order_cmp since this is exactly the same as label_bytes_cmp.


------------------------------------------------------------------------
r3729 | hserus | 2007-09-25 07:16:47 -0700 (Tue, 25 Sep 2007) | 2 lines

Do not bypass zonecut saving logic when current zonecut is NULL

------------------------------------------------------------------------
r3728 | hserus | 2007-09-25 07:14:33 -0700 (Tue, 25 Sep 2007) | 2 lines

Change log level for an informational message

------------------------------------------------------------------------
r3727 | hserus | 2007-09-25 07:12:12 -0700 (Tue, 25 Sep 2007) | 2 lines

flush log data once we write to the file

------------------------------------------------------------------------
r3724 | rstory | 2007-09-18 12:45:42 -0700 (Tue, 18 Sep 2007) | 1 line

include netinet/in.h (FreeBSD needs it)
------------------------------------------------------------------------
r3707 | rstory | 2007-09-14 12:44:54 -0700 (Fri, 14 Sep 2007) | 1 line

usr DESTDIR when removing old man files
------------------------------------------------------------------------
r3706 | rstory | 2007-09-14 12:37:40 -0700 (Fri, 14 Sep 2007) | 1 line

use DESTDIR when creating directories
------------------------------------------------------------------------
r3702 | hardaker | 2007-09-14 09:13:01 -0700 (Fri, 14 Sep 2007) | 1 line

make libval-config use the proper PACKAGE_VERSION autoconf variable
------------------------------------------------------------------------
r3694 | tewok | 2007-09-13 20:58:21 -0700 (Thu, 13 Sep 2007) | 3 lines


Typo fix.

------------------------------------------------------------------------
r3673 | hserus | 2007-09-12 07:34:31 -0700 (Wed, 12 Sep 2007) | 2 lines

Fix info message

------------------------------------------------------------------------
r3670 | tewok | 2007-09-11 09:53:19 -0700 (Tue, 11 Sep 2007) | 3 lines


Pod mods.

------------------------------------------------------------------------
r3668 | tewok | 2007-09-11 08:52:32 -0700 (Tue, 11 Sep 2007) | 3 lines


Pod mods.

------------------------------------------------------------------------
r3664 | hserus | 2007-09-11 07:14:50 -0700 (Tue, 11 Sep 2007) | 2 lines

Initialize global option members to correct values

------------------------------------------------------------------------
r3659 | tewok | 2007-09-10 19:03:47 -0700 (Mon, 10 Sep 2007) | 3 lines


Pod mods.

------------------------------------------------------------------------
r3658 | tewok | 2007-09-10 13:25:35 -0700 (Mon, 10 Sep 2007) | 3 lines


Pod mods.

------------------------------------------------------------------------
r3657 | tewok | 2007-09-10 11:59:22 -0700 (Mon, 10 Sep 2007) | 3 lines


Pod mods.

------------------------------------------------------------------------
r3647 | hardaker | 2007-09-07 16:56:01 -0700 (Fri, 07 Sep 2007) | 1 line

update libtool components to matching versions
------------------------------------------------------------------------
r3645 | hardaker | 2007-09-07 16:06:48 -0700 (Fri, 07 Sep 2007) | 1 line

make full validator test cases path to include DESTDIR
------------------------------------------------------------------------
r3644 | hardaker | 2007-09-07 16:02:34 -0700 (Fri, 07 Sep 2007) | 1 line

PROPERLY escape a dollar sign
------------------------------------------------------------------------
r3643 | hardaker | 2007-09-07 15:58:14 -0700 (Fri, 07 Sep 2007) | 1 line

escape a non-make dollar sign
------------------------------------------------------------------------
r3638 | hserus | 2007-09-07 08:00:48 -0700 (Fri, 07 Sep 2007) | 2 lines

Use the configure script generated by autoconf version 2.59 

------------------------------------------------------------------------
r3637 | rstory | 2007-09-06 11:50:33 -0700 (Thu, 06 Sep 2007) | 1 line

use crypto/sha2.h if available
------------------------------------------------------------------------
r3636 | rstory | 2007-09-06 11:50:08 -0700 (Thu, 06 Sep 2007) | 1 line

check for crypto/sha2.h header
------------------------------------------------------------------------
r3635 | rstory | 2007-09-06 11:46:24 -0700 (Thu, 06 Sep 2007) | 1 line

use ifdefs around defines that might be missing
------------------------------------------------------------------------
r3634 | rstory | 2007-09-06 10:49:49 -0700 (Thu, 06 Sep 2007) | 1 line

move unlock a little earlier to prevent deadlock
------------------------------------------------------------------------
r3606 | rstory | 2007-08-24 07:32:31 -0700 (Fri, 24 Aug 2007) | 1 line

add ifdef for testing multi-threaded default ctx creation
------------------------------------------------------------------------
r3605 | rstory | 2007-08-24 07:28:28 -0700 (Fri, 24 Aug 2007) | 1 line

fix deadlock when freeing default context
------------------------------------------------------------------------
r3604 | rstory | 2007-08-24 07:12:33 -0700 (Fri, 24 Aug 2007) | 3 lines

- use PTHREAD_MUTEX_INITIALIZER to eliminate race condition initializing mutex
- when creating default context, hold lock until done creating context

------------------------------------------------------------------------
r3603 | hserus | 2007-08-23 14:18:31 -0700 (Thu, 23 Aug 2007) | 4 lines

Use RES_GET/PUT in place of NS_GET/PUT. These macros automatically increment the buf pointer as it reads or
stores data.
Also use u_int16_t class, u_int16_t type in the res_val_nmkquery prototype

------------------------------------------------------------------------
r3602 | hserus | 2007-08-23 14:15:18 -0700 (Thu, 23 Aug 2007) | 2 lines

Add macros for RES_PUT16 and RES_PUT32

------------------------------------------------------------------------
r3601 | rstory | 2007-08-22 10:26:40 -0700 (Wed, 22 Aug 2007) | 1 line

use new internal header
------------------------------------------------------------------------
r3600 | rstory | 2007-08-22 10:25:22 -0700 (Wed, 22 Aug 2007) | 1 line

dont define RES_USE_EDNS0 if it's already defined
------------------------------------------------------------------------
r3599 | rstory | 2007-08-22 10:24:27 -0700 (Wed, 22 Aug 2007) | 2 lines

move some structures to an internal, non-installed header

------------------------------------------------------------------------
r3597 | hserus | 2007-08-21 14:01:20 -0700 (Tue, 21 Aug 2007) | 2 lines

Removed ns_netint.c. Used NS_PUT/GET in place of ns_put/get 

------------------------------------------------------------------------
r3593 | hserus | 2007-08-20 14:17:01 -0700 (Mon, 20 Aug 2007) | 2 lines

Account for NULL trust anchors when zone security expectation is validate

------------------------------------------------------------------------
r3592 | hserus | 2007-08-20 13:24:59 -0700 (Mon, 20 Aug 2007) | 2 lines

hack for res_sym_const should not be used on NetBSD systems

------------------------------------------------------------------------
r3591 | hserus | 2007-08-20 10:58:56 -0700 (Mon, 20 Aug 2007) | 2 lines

Add target for libval_check_conf

------------------------------------------------------------------------
r3590 | hserus | 2007-08-20 10:57:19 -0700 (Mon, 20 Aug 2007) | 2 lines

Added -D_GNU_SOURCE compile flag

------------------------------------------------------------------------
r3586 | hserus | 2007-08-02 09:17:42 -0700 (Thu, 02 Aug 2007) | 2 lines

Add documentation for the libval_check_conf utility.

------------------------------------------------------------------------
r3585 | hserus | 2007-07-31 11:12:44 -0700 (Tue, 31 Jul 2007) | 2 lines

Give detailed log message when duplicate policy labels are detected

------------------------------------------------------------------------
r3584 | hserus | 2007-07-31 11:09:51 -0700 (Tue, 31 Jul 2007) | 2 lines

Set default debug level to 5

------------------------------------------------------------------------
r3583 | hserus | 2007-07-31 11:04:59 -0700 (Tue, 31 Jul 2007) | 2 lines

remove stray newline character

------------------------------------------------------------------------
r3582 | hserus | 2007-07-31 10:54:54 -0700 (Tue, 31 Jul 2007) | 2 lines

Add sample global-options policy and a placeholder for other included files

------------------------------------------------------------------------
r3581 | hserus | 2007-07-31 10:48:12 -0700 (Tue, 31 Jul 2007) | 4 lines

Moved definition for "global-policy" string to val_policy.h
Define a new structure for specifying a list of dnsval.conf files. Each file has its own last-modified 
timstamp. Add this structure in place of the dnsval_conf member in val_context_t

------------------------------------------------------------------------
r3580 | hserus | 2007-07-31 10:47:39 -0700 (Tue, 31 Jul 2007) | 3 lines

val_refresh_resolver_policy, val_refresh_root_hints and val_refresh_validator_policy now return an error
code instead of void.

------------------------------------------------------------------------
r3579 | hserus | 2007-07-31 10:47:24 -0700 (Tue, 31 Jul 2007) | 4 lines

val_refresh_resolver_policy, val_refresh_root_hints and val_refresh_validator_policy now return an error
code based on the locking status instead of void.
Initialize dnsval.conf list instead of single element

------------------------------------------------------------------------
r3578 | hserus | 2007-07-31 10:47:03 -0700 (Tue, 31 Jul 2007) | 5 lines

val_refresh_resolver_policy, val_refresh_root_hints and val_refresh_validator_policy now return an error 
code instead of void.
When checking if conf files have changed, look at all dnsval.conf files in the list maintained within 
val_context_t

------------------------------------------------------------------------
r3577 | hserus | 2007-07-31 10:46:47 -0700 (Tue, 31 Jul 2007) | 2 lines

Add definitions for "global-policy" and "include" strings

------------------------------------------------------------------------
r3576 | hserus | 2007-07-31 10:46:27 -0700 (Tue, 31 Jul 2007) | 4 lines

Recognize the "include" policy fragment in the dnsval.conf file
Free up  dnsval list structure in destroy_valpol()
Parse all dnsval.conf files included using the "include" clause

------------------------------------------------------------------------
r3575 | hserus | 2007-07-31 09:48:20 -0700 (Tue, 31 Jul 2007) | 2 lines

initialize clock_skew to 0

------------------------------------------------------------------------
r3574 | hserus | 2007-07-31 09:45:56 -0700 (Tue, 31 Jul 2007) | 2 lines

include <sys/time.h> for struct timeval definition 

------------------------------------------------------------------------
r3573 | hserus | 2007-07-31 09:37:54 -0700 (Tue, 31 Jul 2007) | 2 lines

Add dnsval.conf check program

------------------------------------------------------------------------
r3548 | hardaker | 2007-07-11 15:55:12 -0700 (Wed, 11 Jul 2007) | 1 line

add sys/fcntl.h which is required at least on solaris
------------------------------------------------------------------------
r3546 | hserus | 2007-07-11 08:57:30 -0700 (Wed, 11 Jul 2007) | 2 lines

No longer treating VAL_LOCAL_ANSWER as trusted by default.

------------------------------------------------------------------------
r3545 | hserus | 2007-07-11 08:57:12 -0700 (Wed, 11 Jul 2007) | 3 lines

Set the validation status for local answers to one of either VAL_TRUSTED_ANSWER or VAL_LOCAL_ANSWER
depending on the "trust-local-answers" global option.

------------------------------------------------------------------------
r3544 | hserus | 2007-07-11 08:56:45 -0700 (Wed, 11 Jul 2007) | 4 lines

Removed policies that we're not implementing.
Add parse routines for dnsval.conf global options
Add function to test if dnsval.conf defines local answers as trusted

------------------------------------------------------------------------
r3543 | hserus | 2007-07-11 08:56:19 -0700 (Wed, 11 Jul 2007) | 6 lines

Moved EDNS_UDP_SIZE from resolver.h to validator.h
Removed policy definitions that we're not implementing.
Added policy definitions for global options.
Define new structure for global options; add it as a member of val_context_t.
Added definitions for SHA-256 DS algorithm

------------------------------------------------------------------------
r3542 | hserus | 2007-07-11 08:56:06 -0700 (Wed, 11 Jul 2007) | 3 lines

Moved EDNS_UDP_SIZE from resolver.h to validator.h
Allow edns0 buf size to be specified as an argument to query_send()

------------------------------------------------------------------------
r3541 | hserus | 2007-07-11 08:55:41 -0700 (Wed, 11 Jul 2007) | 2 lines

Allow edns0 buf size to be specified as an argument to query_send()

------------------------------------------------------------------------
r3540 | hserus | 2007-07-11 08:54:14 -0700 (Wed, 11 Jul 2007) | 2 lines

Add support for SHA-256 DS algorithm

------------------------------------------------------------------------
r3539 | hserus | 2007-07-11 08:44:08 -0700 (Wed, 11 Jul 2007) | 2 lines

Replace atoi() with strtol()

------------------------------------------------------------------------
r3538 | hserus | 2007-07-11 08:28:20 -0700 (Wed, 11 Jul 2007) | 2 lines

Removed the VAL_AC_LOCAL_ANSWER state

------------------------------------------------------------------------
r3537 | hserus | 2007-07-11 07:54:14 -0700 (Wed, 11 Jul 2007) | 2 lines

Fixed typo

------------------------------------------------------------------------
r3532 | hserus | 2007-07-06 12:18:55 -0700 (Fri, 06 Jul 2007) | 2 lines

Use VAL_DNS_RESPONSE_ERROR in place of VAL_ERROR

------------------------------------------------------------------------
r3531 | hserus | 2007-07-06 12:17:45 -0700 (Fri, 06 Jul 2007) | 4 lines

Use new status values from validator-api-04
Add new "proof" param to get_ac_trust, which controls the type of assertion (answer or proof) that is
returned; use the proof to identify loops in DS nonexistence answers

------------------------------------------------------------------------
r3530 | hserus | 2007-07-06 12:09:59 -0700 (Fri, 06 Jul 2007) | 2 lines

USE new Q_ERROR status values instead of storing offsets to resolver errors

------------------------------------------------------------------------
r3529 | hserus | 2007-07-06 12:08:44 -0700 (Fri, 06 Jul 2007) | 2 lines

Handled newly defined types from validator-api-04

------------------------------------------------------------------------
r3528 | hserus | 2007-07-06 12:07:15 -0700 (Fri, 06 Jul 2007) | 2 lines

Return servfail as the rcode on error responses created in val_res_query()

------------------------------------------------------------------------
r3527 | hserus | 2007-07-06 12:06:20 -0700 (Fri, 06 Jul 2007) | 2 lines

Use SR_HEADER_ERROR for all header errors in libsres

------------------------------------------------------------------------
r3526 | hserus | 2007-07-06 12:05:35 -0700 (Fri, 06 Jul 2007) | 2 lines

Use new validator status code definitions

------------------------------------------------------------------------
r3525 | hserus | 2007-07-06 12:04:35 -0700 (Fri, 06 Jul 2007) | 2 lines

Renaming and re-arranging status codes. Sync'd up with latest validator API draft.

------------------------------------------------------------------------
r3524 | hserus | 2007-07-06 11:29:08 -0700 (Fri, 06 Jul 2007) | 2 lines

Don't set qc_state if there was a parse error in cached data; simply pretend that data was not available.

------------------------------------------------------------------------
r3523 | hserus | 2007-07-06 11:13:55 -0700 (Fri, 06 Jul 2007) | 2 lines

Use VAL_LOCAL_ANSWER status if answer was obtained locally

------------------------------------------------------------------------
r3522 | hserus | 2007-07-06 11:11:08 -0700 (Fri, 06 Jul 2007) | 2 lines

Use VAL_AC_ALGORITHM_NOT_SUPPORTED in plac eof VAL_AC_UNKNOWN_ALGORITHM

------------------------------------------------------------------------
r3521 | hserus | 2007-07-06 11:09:06 -0700 (Fri, 06 Jul 2007) | 2 lines

Bring pod in sync with draft-hayatnagarkar-dnsext-validator-api-04

------------------------------------------------------------------------
r3520 | hserus | 2007-07-06 11:07:58 -0700 (Fri, 06 Jul 2007) | 2 lines

Version that was submitted as draft-hayatnagarkar-dnsext-validator-api-04

------------------------------------------------------------------------
r3517 | hserus | 2007-07-05 06:19:47 -0700 (Thu, 05 Jul 2007) | 2 lines

Create the default NULL context in val_context.c

------------------------------------------------------------------------
r3514 | hserus | 2007-07-04 09:02:58 -0700 (Wed, 04 Jul 2007) | 2 lines

Do a better job of identifying the wildcard proof

------------------------------------------------------------------------
r3513 | hserus | 2007-07-04 09:02:35 -0700 (Wed, 04 Jul 2007) | 2 lines

Don't erase key status when we use a cached assertion

------------------------------------------------------------------------
r3510 | hserus | 2007-07-03 11:42:26 -0700 (Tue, 03 Jul 2007) | 2 lines

Add separator between different proof components

------------------------------------------------------------------------
r3501 | hserus | 2007-06-28 19:10:36 -0700 (Thu, 28 Jun 2007) | 2 lines

Change timestamp format

------------------------------------------------------------------------
r3500 | hserus | 2007-06-28 18:31:37 -0700 (Thu, 28 Jun 2007) | 3 lines

Check return values for val_parse_...() functions
Display timestamps on log messages

------------------------------------------------------------------------
r3499 | hserus | 2007-06-28 18:31:25 -0700 (Thu, 28 Jun 2007) | 2 lines

Removing trailing newline characters in log messages

------------------------------------------------------------------------
r3498 | hserus | 2007-06-28 18:31:06 -0700 (Thu, 28 Jun 2007) | 3 lines

Check return values for val_parse_...() functions
Use both ends of the NSEC span while determining the closest enclosure

------------------------------------------------------------------------
r3497 | hserus | 2007-06-28 18:30:53 -0700 (Thu, 28 Jun 2007) | 2 lines

Check return values for val_parse_...() functions

------------------------------------------------------------------------
r3496 | hserus | 2007-06-28 18:30:33 -0700 (Thu, 28 Jun 2007) | 3 lines

perform proper clean-up of query when we have a valid answer
Perform early timeout when DNS errors occur

------------------------------------------------------------------------
r3495 | hserus | 2007-06-28 18:30:11 -0700 (Thu, 28 Jun 2007) | 2 lines

Add new function for performing early timeouts DNS errors occur

------------------------------------------------------------------------
r3494 | hserus | 2007-06-28 18:29:50 -0700 (Thu, 28 Jun 2007) | 3 lines

Adjust code for zero retry value
Add new function for performing early timeouts DNS errors occur

------------------------------------------------------------------------
r3493 | hserus | 2007-06-28 18:29:19 -0700 (Thu, 28 Jun 2007) | 2 lines

changed default number of retries to 0

------------------------------------------------------------------------
r3487 | hserus | 2007-06-26 13:34:50 -0700 (Tue, 26 Jun 2007) | 2 lines

Add new check_wildcard param to check_anc_proof() prototype

------------------------------------------------------------------------
r3486 | hserus | 2007-06-26 13:34:01 -0700 (Tue, 26 Jun 2007) | 5 lines

Try verifying more of the proof-of-nonexistence before claiming that it matches via ANC
Correctly differentiate between missing proofs and proofs containing both NSEC and NSEC3 recs
Display appropriate message when ask_resolver() or ask_cache() get a error response
Properly identify timeouts of trust data so that assertion status can change back to VAL_AC_WAIT_FOR_TRUST

------------------------------------------------------------------------
r3485 | hserus | 2007-06-26 13:20:47 -0700 (Tue, 26 Jun 2007) | 2 lines

Don't match a CNAME/DNAME for an RRSIG query

------------------------------------------------------------------------
r3484 | hserus | 2007-06-26 13:19:32 -0700 (Tue, 26 Jun 2007) | 2 lines

Continue to ask other name servers if we see some error rcode in the response

------------------------------------------------------------------------
r3464 | hserus | 2007-06-20 09:04:17 -0700 (Wed, 20 Jun 2007) | 2 lines

Authentication chain information is now being logged in val_resolve_and_check()

------------------------------------------------------------------------
r3463 | hserus | 2007-06-20 09:02:09 -0700 (Wed, 20 Jun 2007) | 3 lines

Log authentication chain information before we return from val_resolve_and_check() instead of outside this
function. 

------------------------------------------------------------------------
r3461 | hserus | 2007-06-18 08:28:05 -0700 (Mon, 18 Jun 2007) | 2 lines

Add a log message

------------------------------------------------------------------------
r3458 | hserus | 2007-06-14 15:33:59 -0700 (Thu, 14 Jun 2007) | 2 lines

Set correct label value during context creation

------------------------------------------------------------------------
r3424 | hserus | 2007-06-07 07:23:50 -0700 (Thu, 07 Jun 2007) | 2 lines

Move thread-specific debug messages into #ifndef VAL_NO_THREADS block

------------------------------------------------------------------------
r3420 | hserus | 2007-06-06 12:42:33 -0700 (Wed, 06 Jun 2007) | 2 lines

Fix bug in check if type exists in bitmap

------------------------------------------------------------------------
r3415 | hserus | 2007-06-05 12:35:20 -0700 (Tue, 05 Jun 2007) | 2 lines

Display actual thread identifier in debug messages

------------------------------------------------------------------------
r3414 | hserus | 2007-06-05 12:29:33 -0700 (Tue, 05 Jun 2007) | 2 lines

Instead of continuously polling libsres for data, block using the pselect() call

------------------------------------------------------------------------
r3411 | hserus | 2007-06-01 11:22:01 -0700 (Fri, 01 Jun 2007) | 3 lines

Revert change# 3410. The code is still not MT-safe


------------------------------------------------------------------------
r3410 | hserus | 2007-06-01 07:55:35 -0700 (Fri, 01 Jun 2007) | 2 lines

Instead of continuously polling libsres for data, block on a select() call

------------------------------------------------------------------------
r3409 | hserus | 2007-06-01 07:37:55 -0700 (Fri, 01 Jun 2007) | 3 lines

Perfom correct check for VAL_QFLAGS_ANY
Use available assertion status value when copying DLV to DS

------------------------------------------------------------------------
r3408 | hardaker | 2007-05-31 16:47:11 -0700 (Thu, 31 May 2007) | 1 line

use proper destdir prefix when making paths and installing
------------------------------------------------------------------------
r3405 | hserus | 2007-05-30 14:10:58 -0700 (Wed, 30 May 2007) | 2 lines

Display separate ASCII strings for the VAL_DONT_KNOW, VAL_BOGUS_PROVABLE and VAL_BAD_PROVABLY_UNSECURE conditions

------------------------------------------------------------------------
r3404 | hserus | 2007-05-30 14:10:41 -0700 (Wed, 30 May 2007) | 5 lines

- Extract relevant portions from add_to_qfq_chain() to create a new function check_in_qfq_chain()
- Rename find_next_soa() to find_next_zonecut(); rename old find_next_zonecut() to find_next_zonecut_old()
- In the new find_new_zonecut() function, don't issue SOA queries if we already have answers for the DNSKEY or DS records
- Continue to evaluate status for authentication chain elements even if some parent element is known to be provably insecure

------------------------------------------------------------------------
r3403 | hserus | 2007-05-30 14:09:51 -0700 (Wed, 30 May 2007) | 2 lines

Define new flag for all bits set

------------------------------------------------------------------------
r3402 | hserus | 2007-05-25 14:31:02 -0700 (Fri, 25 May 2007) | 2 lines

still more typos

------------------------------------------------------------------------
r3401 | hserus | 2007-05-25 14:15:41 -0700 (Fri, 25 May 2007) | 2 lines

Fix more typos

------------------------------------------------------------------------
r3400 | hserus | 2007-05-25 13:44:20 -0700 (Fri, 25 May 2007) | 2 lines

More updates to the validator api

------------------------------------------------------------------------
r3398 | hserus | 2007-05-24 08:01:46 -0700 (Thu, 24 May 2007) | 2 lines

First pass at trying to bring the validator API in sync with the latest set of changes to libval

------------------------------------------------------------------------
r3397 | hserus | 2007-05-24 08:01:10 -0700 (Thu, 24 May 2007) | 2 lines

Add description for val_add_valpolicy() and val_remove_valpolicy()

------------------------------------------------------------------------
r3396 | hserus | 2007-05-24 07:49:51 -0700 (Thu, 24 May 2007) | 2 lines

Slight tweaking of log messages

------------------------------------------------------------------------
r3395 | hserus | 2007-05-24 07:46:17 -0700 (Thu, 24 May 2007) | 3 lines

Update val_add_valpolicy() so that we return the policy handle
Add new val_remove_valpolicy() function

------------------------------------------------------------------------
r3394 | hserus | 2007-05-24 07:46:06 -0700 (Thu, 24 May 2007) | 3 lines

Update val_add_valpolicy() so that we return the policy handle
Add new val_remove_valpolicy() function

------------------------------------------------------------------------
r3393 | hserus | 2007-05-24 07:44:45 -0700 (Thu, 24 May 2007) | 2 lines

Properly align the end statement character in the policy definitions.

------------------------------------------------------------------------
r3392 | hserus | 2007-05-24 07:43:45 -0700 (Thu, 24 May 2007) | 2 lines

Added description for VAL_BOGUS_PROVABLE

------------------------------------------------------------------------
r3391 | hserus | 2007-05-24 07:42:54 -0700 (Thu, 24 May 2007) | 2 lines

Pretty up some of the ASCII art

------------------------------------------------------------------------
r3390 | hserus | 2007-05-24 07:41:56 -0700 (Thu, 24 May 2007) | 4 lines

Define new policy for val_policy_entry_t
Update prototype for val_add_valpolicy()
Add prototype for val_remove_valpolicy()

------------------------------------------------------------------------
r3380 | rstory | 2007-05-22 15:40:40 -0700 (Tue, 22 May 2007) | 1 line

change default test verbosity down another notch
------------------------------------------------------------------------
r3378 | rstory | 2007-05-22 15:27:41 -0700 (Tue, 22 May 2007) | 3 lines

- add ability to overrise debug verbosity for make test
- change default level from 6 to 5, to account for recent shuffling of verbosity levels

------------------------------------------------------------------------
r3375 | hardaker | 2007-05-22 15:16:44 -0700 (Tue, 22 May 2007) | 1 line

various fixes to allow validator-testcases to be installed in a user configurable place
------------------------------------------------------------------------
r3360 | hserus | 2007-05-18 11:34:38 -0700 (Fri, 18 May 2007) | 4 lines

Updated date on copyright notice.
Moved the fix_glue function from val_assertion.c to val_resquery.c
Removed definitions for some static functions

------------------------------------------------------------------------
r3359 | hserus | 2007-05-18 11:34:20 -0700 (Fri, 18 May 2007) | 4 lines

Updated date on copyright notice.
Moved check_label_count() to val_verfy.c
Moved prepare_empty_nxdomain() to val_resquery.c

------------------------------------------------------------------------
r3358 | hserus | 2007-05-18 11:33:59 -0700 (Fri, 18 May 2007) | 4 lines

Updated date on copyright notice.
Add some more comments and log messages
Moved the fix_glue function from val_assertion.c to val_resquery.c

------------------------------------------------------------------------
r3357 | hserus | 2007-05-18 11:33:35 -0700 (Fri, 18 May 2007) | 4 lines

Updated date on copyright notice.
Moved check_label_count() to val_verfy.c
Moved prepare_empty_nxdomain() to val_resquery.c

------------------------------------------------------------------------
r3356 | hserus | 2007-05-18 11:33:01 -0700 (Fri, 18 May 2007) | 5 lines

Updated date on copyright notice.
Add some more comments and log messages
In functions that use the val_internal_result structure, use the query flags from the result structure
Move the fix_glue function to val_resquery.c

------------------------------------------------------------------------
r3355 | hserus | 2007-05-18 11:32:35 -0700 (Fri, 18 May 2007) | 6 lines

Updated date on copyright notice.
Add some more comments and log messages
Remove unused functions
Moved check_label_count from val_support.c to val_verify.c and made it static
Correctly identify a delegation that does not link upward

------------------------------------------------------------------------
r3354 | hserus | 2007-05-18 11:31:59 -0700 (Fri, 18 May 2007) | 2 lines

Updated date on copyright notice.

------------------------------------------------------------------------
r3353 | hserus | 2007-05-18 11:30:41 -0700 (Fri, 18 May 2007) | 3 lines

Updated date on copyright notice.
Add some more comments and log messages

------------------------------------------------------------------------
r3352 | hserus | 2007-05-18 11:29:51 -0700 (Fri, 18 May 2007) | 5 lines

Updated date on copyright notice.
Add some more comments and log messages
Changed ordering of some functions in the file
Ensure that correct error value is returned from compose_answer()

------------------------------------------------------------------------
r3350 | hserus | 2007-05-18 09:33:26 -0700 (Fri, 18 May 2007) | 3 lines

Update date on copyright notice
Change logging level for authentication chain to LOG_NOTICE 

------------------------------------------------------------------------
r3349 | hserus | 2007-05-18 09:32:08 -0700 (Fri, 18 May 2007) | 2 lines

Update date on copyright notice

------------------------------------------------------------------------
r3348 | hserus | 2007-05-18 09:24:05 -0700 (Fri, 18 May 2007) | 2 lines

Added info on p_val_err()

------------------------------------------------------------------------
r3347 | hserus | 2007-05-18 09:22:38 -0700 (Fri, 18 May 2007) | 2 lines

added: see also syslog 

------------------------------------------------------------------------
r3346 | hserus | 2007-05-18 09:20:12 -0700 (Fri, 18 May 2007) | 2 lines

Update date on copyright notice

------------------------------------------------------------------------
r3331 | hardaker | 2007-05-15 12:35:00 -0700 (Tue, 15 May 2007) | 1 line

updated output text to match file being talked about
------------------------------------------------------------------------
r3329 | hardaker | 2007-05-15 12:34:11 -0700 (Tue, 15 May 2007) | 1 line

updated output text to match file being talked about
------------------------------------------------------------------------
r3325 | hardaker | 2007-05-15 12:12:00 -0700 (Tue, 15 May 2007) | 1 line

use sysconfdir for mkpath instead of prefix
------------------------------------------------------------------------
r3323 | rstory | 2007-05-15 08:33:50 -0700 (Tue, 15 May 2007) | 3 lines

- set VAL_LOCAL_ANSWER when NI_NUMERICHOST set for val_getnameinfo
- use unsigned char when printing ipaddr strings

------------------------------------------------------------------------
r3306 | hserus | 2007-05-07 09:01:08 -0700 (Mon, 07 May 2007) | 2 lines

Define new function for printing the return value from functions in an ASCII format

------------------------------------------------------------------------
r3305 | hserus | 2007-05-07 09:00:51 -0700 (Mon, 07 May 2007) | 2 lines

Set query status to Q_ANSWERED when an empty nxdomain/nodata answer is received

------------------------------------------------------------------------
r3304 | hserus | 2007-05-07 09:00:18 -0700 (Mon, 07 May 2007) | 2 lines

Store respondent_server information in empty nxdomain response

------------------------------------------------------------------------
r3303 | hserus | 2007-05-07 09:00:03 -0700 (Mon, 07 May 2007) | 3 lines

Store respondent_server information in empty nxdomain response
Check for NULL respondent_server in copy_rrset_rec()

------------------------------------------------------------------------
r3302 | hserus | 2007-05-07 08:59:45 -0700 (Mon, 07 May 2007) | 4 lines

Using a common SR_ANS_NACK answer "kind" instead of three separate values: SR_ANS_NACK_NSEC, SR_ANS_NACK_NSEC3 and SR_ANS_NACK_SOA
No data condition does not require the SOA record to be present.
Store proper flag status in error result

------------------------------------------------------------------------
r3301 | hserus | 2007-05-07 08:59:13 -0700 (Mon, 07 May 2007) | 3 lines

Using a common SR_ANS_NACK answer "kind" instead of three separate values: SR_ANS_NACK_NSEC, SR_ANS_NACK_NSEC3 and SR_ANS_NACK_SOA
Define prototype for p_val_err()

------------------------------------------------------------------------
r3271 | hserus | 2007-04-30 15:16:28 -0700 (Mon, 30 Apr 2007) | 2 lines

If no answers are returned from the DNS, the validation status is untrusted

------------------------------------------------------------------------
r3265 | hserus | 2007-04-27 10:25:28 -0700 (Fri, 27 Apr 2007) | 2 lines

Initialize provably unsecure status

------------------------------------------------------------------------
r3264 | hserus | 2007-04-27 08:56:54 -0700 (Fri, 27 Apr 2007) | 2 lines

Add some logging info for bogus proofs

------------------------------------------------------------------------
r3260 | hserus | 2007-04-26 13:42:26 -0700 (Thu, 26 Apr 2007) | 2 lines

Don't export the p_query_status and val_refresh_* functions

------------------------------------------------------------------------
r3259 | hserus | 2007-04-26 13:34:06 -0700 (Thu, 26 Apr 2007) | 6 lines

While looking for a validated result keep going up looking for trust anchors at a higher level if the trust
anchor at the current level does not match.
Allow unlimited TTL for nsec3 iterations policy
Add VAL_NONEXISTENT_NAME_NOCHAIN to the list of non-existence conditions


------------------------------------------------------------------------
r3258 | hserus | 2007-04-26 13:28:42 -0700 (Thu, 26 Apr 2007) | 2 lines

Update copyright date

------------------------------------------------------------------------
r3257 | hserus | 2007-04-26 13:28:13 -0700 (Thu, 26 Apr 2007) | 2 lines

Dont display (incorrect) query status

------------------------------------------------------------------------
r3256 | hserus | 2007-04-26 13:27:08 -0700 (Thu, 26 Apr 2007) | 2 lines

Update copyright date

------------------------------------------------------------------------
r3255 | hserus | 2007-04-26 13:25:33 -0700 (Thu, 26 Apr 2007) | 2 lines

Description of command-line tools is already available in the docs/ directory 

------------------------------------------------------------------------
r3254 | hserus | 2007-04-26 13:23:44 -0700 (Thu, 26 Apr 2007) | 3 lines

Say which configure flags are supported.


------------------------------------------------------------------------
r3253 | hserus | 2007-04-26 13:22:52 -0700 (Thu, 26 Apr 2007) | 2 lines

Update pod for libval

------------------------------------------------------------------------
r3252 | hserus | 2007-04-26 13:14:38 -0700 (Thu, 26 Apr 2007) | 2 lines

Comment out NSEC3 tests

------------------------------------------------------------------------
r3251 | hserus | 2007-04-26 13:12:07 -0700 (Thu, 26 Apr 2007) | 2 lines

Move VAL_AC_DATA_MISSING to the list of "bad state" conditions

------------------------------------------------------------------------
r3249 | marz | 2007-04-26 06:26:01 -0700 (Thu, 26 Apr 2007) | 1 line

remove debug
------------------------------------------------------------------------
r3248 | marz | 2007-04-26 06:13:33 -0700 (Thu, 26 Apr 2007) | 1 line

fixes for perl resolve_and_check and docs
------------------------------------------------------------------------
r3245 | hserus | 2007-04-25 08:38:05 -0700 (Wed, 25 Apr 2007) | 2 lines

Handle negative proofs in DLV in a better manner. 

------------------------------------------------------------------------
r3244 | hserus | 2007-04-24 14:09:42 -0700 (Tue, 24 Apr 2007) | 2 lines

Ignore signature expiration times for zones under fruits.netsec.tislabs.com instead of netsec.tislabs.com

------------------------------------------------------------------------
r3243 | hserus | 2007-04-24 14:06:32 -0700 (Tue, 24 Apr 2007) | 2 lines

Add sample dlv policy

------------------------------------------------------------------------
r3242 | hserus | 2007-04-24 14:03:26 -0700 (Tue, 24 Apr 2007) | 30 lines

- Always use query_for_query chain in order to access assertions, so that qfq_flags can be appropriately
  honored
- Reset alias information in reset_query_chain_node()
- add_to_query_chain() directly adds element to list within context
- Added new function val_does_not_exist() that returns true if one of the nonexistence types is returned
- Handle root zone in find_trust_point()
- Handle root zone in is_trusted_key()
- Renamed check_conflicting_answers() as try_build_chain() because the function also calls
  build_pending_query()
- Ifdef out find_next_zonecut()
- Invoke loop detection logic when trying to merge glue into referral
- bug fix in fetching cached rrset for cname owner
- Modify verify_provably_unsecure so that it proves non-existence for a name instead of the entire
authentication chain element
- DLV implementation:
    - added new function find_dlv_trust_point() to identify trustpoint and target for a given query name
    - added new function replace_name_in_name() to create name in DLV tree
    - added new function check_anc_proof() to check aggressive negative cache
    - added new function find_dlv_record() to do exactly that
    - added new function set_dlv_branchoff() to create the link between the normal tree and the DLV tree
    - defined new 'flags' member for val_internal_result. Flags may be different for each result chain (one
      may use DLV while the other may not need to)
    - modified get_zse() (and is_trusted_key also) to return correct zone security expectation while
      building authentication chain
    - move general sanity checking of results into a separate function, fix_validation_result, invoked from
verify_and_validate() to better assist in determining when to invoke the DLV logic
    - re-wrote much of the negative proof checking logic in order to support ANC
    - logic to kickstart DLV when val_isvalidated() returns false
    - logic to check provably insecure condition chaining down from the DLV tree

------------------------------------------------------------------------
r3241 | hserus | 2007-04-24 14:02:42 -0700 (Tue, 24 Apr 2007) | 4 lines

- Always use query_for_query chain in order to access assertions, so that  qfq_flags can be appropriately
honored
- Added prototypes for val_does_not_exist() and check_anc_proof()

------------------------------------------------------------------------
r3240 | hserus | 2007-04-24 14:02:30 -0700 (Tue, 24 Apr 2007) | 4 lines

- Add new structure for allowing detection of glue fetch loops
- Always use query_for_query chain in order to access assertions, so that  qfq_flags can be appropriately
honored

------------------------------------------------------------------------
r3239 | hserus | 2007-04-24 14:01:44 -0700 (Tue, 24 Apr 2007) | 12 lines

- Always use query_for_query chain in order to access assertions, so that  qfq_flags can be appropriately
honored
- Detect loops in the glue fetch operation
- Move logic of using root hints for a root referral from follow_referral_or_alias_link to
bootstrap_referral, since the second function is the common denominator
- When fetching glue for nameservers where other zone ns's are known, jumpstart the lookup process from the
known name server list
- register the query with the referral monitor only if the referral was actually sent, not if we are still
waiting for glue
- Now keeping track of learned zone information in the struct delegation_info. Save name server information
in the cache only when we have all information about it (including glue)

------------------------------------------------------------------------
r3238 | hserus | 2007-04-24 14:01:26 -0700 (Tue, 24 Apr 2007) | 2 lines

- Initialize the learned_zones member in ALLOCATE_REFERRAL_BLOCK

------------------------------------------------------------------------
r3237 | hserus | 2007-04-24 14:00:55 -0700 (Tue, 24 Apr 2007) | 5 lines

- Moved const string definitions from val_policy.h to validator.h
- Removed dlv-max-links policy definition
- Add data structure for DLV trust point maintenance
- In val_get_token() qualify the comment arg with "const"

------------------------------------------------------------------------
r3236 | hserus | 2007-04-24 14:00:40 -0700 (Tue, 24 Apr 2007) | 2 lines

- Intialize ttl only when the variable is created.

------------------------------------------------------------------------
r3235 | hserus | 2007-04-24 14:00:28 -0700 (Tue, 24 Apr 2007) | 3 lines

- change get_nslist_from_cache() prototype so that we can pass the query_for_query structure to
bootstrap_referral()

------------------------------------------------------------------------
r3234 | hserus | 2007-04-24 14:00:12 -0700 (Tue, 24 Apr 2007) | 4 lines

- Removed dlv-max-links policy handling
- Added parse function for DLV policy
- In val_get_token() qualify the comment arg with "const"

------------------------------------------------------------------------
r3233 | hserus | 2007-04-24 13:59:37 -0700 (Tue, 24 Apr 2007) | 2 lines

- Minor ifdef twiddle

------------------------------------------------------------------------
r3232 | hserus | 2007-04-24 13:59:23 -0700 (Tue, 24 Apr 2007) | 2 lines

- Recognize the DLV typecode

------------------------------------------------------------------------
r3231 | hserus | 2007-04-24 13:59:05 -0700 (Tue, 24 Apr 2007) | 2 lines

- In val_get_token(), qualify the comment arg with "const" 

------------------------------------------------------------------------
r3230 | hserus | 2007-04-24 13:58:28 -0700 (Tue, 24 Apr 2007) | 10 lines

- Re-structured flags to val_resolve_and_check (query flags in the lower nibble, internal flags in the upper nibble)
- Defined new query flags for DLV
- Added new definition for glue dependency chain max length
- Removed definition for dlv-max-links policy
- Moved const string definitions from val_policy.h to validator.h
- Now keeping track of learned zone information in the struct delegation_info. Save name server information
in the cache only when we have all information about it (including glue)
- Define new flags member for val_internal_result. Flags may be different for each result chain (one may use DLV while the other may not need to)
- Added proto for val_does_not_exist()

------------------------------------------------------------------------
r3229 | hserus | 2007-04-24 13:57:48 -0700 (Tue, 24 Apr 2007) | 2 lines

- Defined typecode for DLV

------------------------------------------------------------------------
r3210 | hserus | 2007-04-17 12:26:43 -0700 (Tue, 17 Apr 2007) | 2 lines

Perform proper transformation of the wildcard proof into the result structure.

------------------------------------------------------------------------
r3207 | hserus | 2007-04-17 06:58:07 -0700 (Tue, 17 Apr 2007) | 3 lines

Support multiple comment characters for the same config file
resolv.conf can use either ; or # as the comment character

------------------------------------------------------------------------
r3201 | hserus | 2007-04-13 14:38:19 -0700 (Fri, 13 Apr 2007) | 2 lines

Some more fine-tuning of the wildcard proof checking logic

------------------------------------------------------------------------
r3199 | hserus | 2007-04-13 13:25:41 -0700 (Fri, 13 Apr 2007) | 8 lines

- set initial value of ttl only during variable creation
- set ttl type as u_int32_t instead of long
- split the provably unsecure check into two functions - one for span check and the other for wildcard 
check. Make the test for wildcard optional through a param.
- ifdef out the prove_existence function
- When checking for wildcard sanity check for the non-existence of the name instead of the existence of the
wildcard

------------------------------------------------------------------------
r3198 | hserus | 2007-04-13 13:25:16 -0700 (Fri, 13 Apr 2007) | 2 lines

set ttl type as u_int32_t instead of long

------------------------------------------------------------------------
r3197 | hserus | 2007-04-13 13:24:43 -0700 (Fri, 13 Apr 2007) | 2 lines

In val_log_assertion_chain show NULL results 

------------------------------------------------------------------------
r3189 | hserus | 2007-04-10 14:00:35 -0700 (Tue, 10 Apr 2007) | 2 lines

Add new qfq_flags member to the queries_for_query structure

------------------------------------------------------------------------
r3187 | hserus | 2007-04-10 11:24:37 -0700 (Tue, 10 Apr 2007) | 2 lines

Display return code and validation status code

------------------------------------------------------------------------
r3186 | hserus | 2007-04-10 11:16:19 -0700 (Tue, 10 Apr 2007) | 2 lines

Ensure that val_status gets set even when names do not exist 

------------------------------------------------------------------------
r3184 | rstory | 2007-04-10 05:56:03 -0700 (Tue, 10 Apr 2007) | 4 lines

- support for val_res_search
  - look for and parse 'search' in resolv.conf
  - use search path for single label queries

------------------------------------------------------------------------
r3153 | hserus | 2007-04-03 13:04:53 -0700 (Tue, 03 Apr 2007) | 2 lines

Add rrsigs to the query response

------------------------------------------------------------------------
r3152 | hserus | 2007-04-03 11:54:10 -0700 (Tue, 03 Apr 2007) | 2 lines

run autoheader

------------------------------------------------------------------------
r3151 | hserus | 2007-04-03 11:27:54 -0700 (Tue, 03 Apr 2007) | 2 lines

Make sure that user-supplied flags are not lost

------------------------------------------------------------------------
r3150 | hserus | 2007-04-03 11:23:35 -0700 (Tue, 03 Apr 2007) | 2 lines

Made nsec3 and dlv configure logic similar to that of ipv6

------------------------------------------------------------------------
r3149 | rstory | 2007-04-03 09:19:50 -0700 (Tue, 03 Apr 2007) | 1 line

initialize uninitialized variables
------------------------------------------------------------------------
r3148 | rstory | 2007-04-03 09:19:09 -0700 (Tue, 03 Apr 2007) | 1 line

for test target, use local selftest config, and only run default suite
------------------------------------------------------------------------
r3147 | rstory | 2007-04-03 09:10:49 -0700 (Tue, 03 Apr 2007) | 5 lines

- fix socket size param in connect() call to keep OS X happy
- add more debugging outpu
- don't loop beyond FD_SETSIZE
- fix param to inet_ntop()

------------------------------------------------------------------------
r3143 | rstory | 2007-03-30 12:01:36 -0700 (Fri, 30 Mar 2007) | 4 lines

- fix prefix in val_sysconfdir
- use AH_TEMPATE instead of AC_DEFINE, since we don't have the real value yet
- fix with-ipv6 logic

------------------------------------------------------------------------
r3142 | hserus | 2007-03-30 07:37:11 -0700 (Fri, 30 Mar 2007) | 2 lines

Rename DLV to LIBVAL_DLV

------------------------------------------------------------------------
r3140 | hserus | 2007-03-30 07:20:46 -0700 (Fri, 30 Mar 2007) | 2 lines

Rename is_trusted_zone to get_zse

------------------------------------------------------------------------
r3139 | hserus | 2007-03-30 07:13:45 -0700 (Fri, 30 Mar 2007) | 2 lines

Use correct lock init var for the name server map

------------------------------------------------------------------------
r3137 | rstory | 2007-03-29 13:43:00 -0700 (Thu, 29 Mar 2007) | 2 lines

add --with-ipv6

------------------------------------------------------------------------
r3136 | rstory | 2007-03-29 13:36:43 -0700 (Thu, 29 Mar 2007) | 2 lines

IPv6 support

------------------------------------------------------------------------
r3133 | rstory | 2007-03-27 14:30:20 -0700 (Tue, 27 Mar 2007) | 1 line

bump libcurrent
------------------------------------------------------------------------
r3129 | hserus | 2007-03-27 06:43:32 -0700 (Tue, 27 Mar 2007) | 3 lines

Maintain a merged_glue_ns list that keeps track of all glue that was already available or fetched in the
past. Query state moves from Q_WAIT_FOR_GLUE to Q_INIT only if all outstanding glue was fetched.

------------------------------------------------------------------------
r3128 | hserus | 2007-03-27 06:43:07 -0700 (Tue, 27 Mar 2007) | 4 lines

- While finding zonecut for DS record, leading qname label must be removed
- VAL_QUERY_GLUE_REQUEST implies VAL_FLAGS_DONT_VALIDATE
- Q_WAIT_FOR_GLUE can only move to the Q_INIT state. Perform correct check in fix_glue

------------------------------------------------------------------------
r3127 | hserus | 2007-03-27 06:42:48 -0700 (Tue, 27 Mar 2007) | 2 lines

- Initialize merged glue list

------------------------------------------------------------------------
r3126 | hserus | 2007-03-27 06:42:15 -0700 (Tue, 27 Mar 2007) | 3 lines

- In the delegation_info structure, replace pointer to glue with a list of merged glue records
- VAL_QUERY_GLUE_REQUEST implies VAL_FLAGS_DONT_VALIDATE

------------------------------------------------------------------------
r3107 | hserus | 2007-03-23 12:03:27 -0700 (Fri, 23 Mar 2007) | 2 lines

Add prototype for free_validator_state()

------------------------------------------------------------------------
r3106 | hserus | 2007-03-23 12:03:17 -0700 (Fri, 23 Mar 2007) | 3 lines

Keep track of the context created for a NULL label. Return this object instead of creating fresh ones for 
subsequent calls.

------------------------------------------------------------------------
r3105 | hserus | 2007-03-23 12:02:57 -0700 (Fri, 23 Mar 2007) | 2 lines

Create a temporary context if the one supplied by the user was NULL

------------------------------------------------------------------------
r3104 | hserus | 2007-03-23 12:02:07 -0700 (Fri, 23 Mar 2007) | 2 lines

Don't free the context internally created for a NULL label

------------------------------------------------------------------------
r3103 | hserus | 2007-03-23 12:01:17 -0700 (Fri, 23 Mar 2007) | 4 lines

free the null context in addition to the validator caches
removed the ONE_CTX logic. This will not work if NULL contexts internally refer to a common object


------------------------------------------------------------------------
r3102 | hserus | 2007-03-23 12:00:40 -0700 (Fri, 23 Mar 2007) | 2 lines

Export free_validator_state() instead of free_validator_cache()

------------------------------------------------------------------------
r3099 | hserus | 2007-03-23 07:26:05 -0700 (Fri, 23 Mar 2007) | 2 lines

Remove separate policy for expired sigs. The clock skew policy subsumes this functionality.

------------------------------------------------------------------------
r3098 | hserus | 2007-03-23 06:32:16 -0700 (Fri, 23 Mar 2007) | 3 lines

Moved string definitions for policies from val_policy.h to validator.h in order to allow functions such as
val_add_valpolicy() to be able to make use of it.

------------------------------------------------------------------------
r3094 | hserus | 2007-03-22 13:05:36 -0700 (Thu, 22 Mar 2007) | 2 lines

Add ability to test multi-threading situation

------------------------------------------------------------------------
r3093 | hserus | 2007-03-22 13:00:14 -0700 (Thu, 22 Mar 2007) | 2 lines

Since policy_entry_t is now a defined type, allocate memory for it

------------------------------------------------------------------------
r3092 | hserus | 2007-03-22 12:59:52 -0700 (Thu, 22 Mar 2007) | 2 lines

Add macro for setting ttl to the minimum reasonable value

------------------------------------------------------------------------
r3091 | hserus | 2007-03-22 12:59:37 -0700 (Thu, 22 Mar 2007) | 3 lines

Moved query locking macros from val_assertion.c
Added/modified prototypes

------------------------------------------------------------------------
r3090 | hserus | 2007-03-22 12:59:16 -0700 (Thu, 22 Mar 2007) | 7 lines

Moved query locking macros to val_assertion.h
Define new function for resetting a query to its initial state
Make sure we honor the ttl on the policy fragments when setting ttl on query and authentication chain
structres
Remove the older verify_provably_unsecure function
Fix bug in data_missing/data_received logic

------------------------------------------------------------------------
r3089 | hserus | 2007-03-22 12:59:00 -0700 (Thu, 22 Mar 2007) | 7 lines

In RETRIEVE_POLICY, remove expired policies from the list of returned policy_entry_t structures
Change prototypes for parse routines: they now accept buf pointers instead of FILE pointers and don't
expect the "end statement" character to be present.
Since policy_entry_t contains zone and next pointer information, remove these members from the
policy-specific data structures.
Add prototypes for functions.

------------------------------------------------------------------------
r3088 | hserus | 2007-03-22 12:58:48 -0700 (Thu, 22 Mar 2007) | 2 lines

Make sure we honor the ttl on the policy fragments

------------------------------------------------------------------------
r3087 | hserus | 2007-03-22 12:58:25 -0700 (Thu, 22 Mar 2007) | 11 lines

Add new function to add a validator policy to the context for a specific time duration
Modified val_get_token so that it read from a character buffer instead of a FILE *
Add logic to merge/free policies into the context's policy_entry_t* array
Modified the parse routines: they now accept buf pointers instead of FILE pointers and don't
expect the "end statement" character to be present. This is to allow a user supplied policy blob to also be
parsed.
The free routines for the policy structures are similarly modified so that they only look at what is inside
the policy, and not the policy_entry_t list itself.
Since zone information is common to all policies read it in a common place outside the parse routine; same 
with adding the new policy in the policy_entry_t list

------------------------------------------------------------------------
r3086 | hserus | 2007-03-22 12:58:06 -0700 (Thu, 22 Mar 2007) | 2 lines

Modified read_val_testcase_file so that it made use of the new val_get_token function.

------------------------------------------------------------------------
r3085 | hserus | 2007-03-22 12:57:33 -0700 (Thu, 22 Mar 2007) | 4 lines

Re-defined policy_entry_t as a regular container structure
No longer maintain list of overrides; instead work off the policy_entry_t* array
Add prototype for val_add_valpolicy

------------------------------------------------------------------------
r3081 | hardaker | 2007-03-22 06:22:38 -0700 (Thu, 22 Mar 2007) | 1 line

properly honor DESTDIR in more locations
------------------------------------------------------------------------
r3067 | hardaker | 2007-03-19 16:23:19 -0700 (Mon, 19 Mar 2007) | 1 line

set modes properly on installed headers
------------------------------------------------------------------------
r3063 | hserus | 2007-03-16 07:12:34 -0700 (Fri, 16 Mar 2007) | 2 lines

Fix null pointer exception

------------------------------------------------------------------------
r3058 | hserus | 2007-03-15 08:01:35 -0700 (Thu, 15 Mar 2007) | 2 lines

Indentation

------------------------------------------------------------------------
r3057 | hserus | 2007-03-15 07:47:54 -0700 (Thu, 15 Mar 2007) | 2 lines

Add new policies

------------------------------------------------------------------------
r3056 | hserus | 2007-03-15 07:38:43 -0700 (Thu, 15 Mar 2007) | 2 lines

Apply the default policy by default. i.e. don't expect the user to specify a trailing : in the policy scope

------------------------------------------------------------------------
r3054 | baerm | 2007-03-14 14:46:11 -0700 (Wed, 14 Mar 2007) | 3 lines

stdio.h  needed  to be included for the use of file io 
(i.e. 'FILE' type)

------------------------------------------------------------------------
r3050 | hserus | 2007-03-13 12:30:42 -0700 (Tue, 13 Mar 2007) | 3 lines

Ignore name compression and lowercasing for NSEC. Also handle other types defined by
RFC4033

------------------------------------------------------------------------
r3049 | hserus | 2007-03-13 11:16:53 -0700 (Tue, 13 Mar 2007) | 6 lines

Identify glue status through a query flag instead of maintaining a separate member within the query
structure
Be careful about not overwriting previous query states with new ones
While doing the parallel fetch for DS records, dont look at the value of RES_USE_DNSSEC, since glue
fetching logic can mess this up. Instead, explicitly look for the trust point and see if we are below it.

------------------------------------------------------------------------
r3048 | hserus | 2007-03-13 11:16:36 -0700 (Tue, 13 Mar 2007) | 2 lines

Exposing the find_trust_point() to other files in the library

------------------------------------------------------------------------
r3047 | hserus | 2007-03-13 11:16:23 -0700 (Tue, 13 Mar 2007) | 6 lines

Identify glue status through a query flag instead of maintaining a separate member within the query
structure
Be careful about not overwriting previous query states with new ones
Merge pending glue in a separate function. That way we can ensure that we haven't missed any query.
Now exposing the find_trust_point() to other files in the library

------------------------------------------------------------------------
r3046 | hserus | 2007-03-13 11:16:01 -0700 (Tue, 13 Mar 2007) | 3 lines

Identify glue status through a query flag instead of maintaining a separate member within the query
structure

------------------------------------------------------------------------
r3042 | hserus | 2007-03-12 12:02:48 -0700 (Mon, 12 Mar 2007) | 2 lines

Fetch DNSSEC meta-data in parallel while following referrals.

------------------------------------------------------------------------
r3041 | hserus | 2007-03-12 09:20:43 -0700 (Mon, 12 Mar 2007) | 2 lines

Handle _SKEW error codes. Also handle missing WCARD_VERIFIED code.

------------------------------------------------------------------------
r3040 | hserus | 2007-03-12 09:20:27 -0700 (Mon, 12 Mar 2007) | 2 lines

Recognize the _SKEW rrsig codes as success values.

------------------------------------------------------------------------
r3039 | hserus | 2007-03-12 09:20:16 -0700 (Mon, 12 Mar 2007) | 2 lines

use clock-skew policy while determining security status of zone

------------------------------------------------------------------------
r3038 | hserus | 2007-03-12 09:20:03 -0700 (Mon, 12 Mar 2007) | 2 lines

Define policy structure for clock-skew

------------------------------------------------------------------------
r3037 | hserus | 2007-03-12 09:19:52 -0700 (Mon, 12 Mar 2007) | 3 lines

Implement policy for per-zone clock-skew defintion
Perform proper free of the prov_unsecure_policy structure in free_prov_unsecure_status

------------------------------------------------------------------------
r3036 | hserus | 2007-03-12 09:19:20 -0700 (Mon, 12 Mar 2007) | 2 lines

Deleted definition for SIG_ACCEPT_WINDOW. We now use the clock-skew policy to define this.

------------------------------------------------------------------------
r3035 | hserus | 2007-03-12 09:19:09 -0700 (Mon, 12 Mar 2007) | 2 lines

Added definitions for the "rrsig verified with skew" condition

------------------------------------------------------------------------
r3034 | hserus | 2007-03-09 14:56:14 -0800 (Fri, 09 Mar 2007) | 2 lines

- Display validator status code for VAL_BAD_PROVABLY_UNSECURE

------------------------------------------------------------------------
r3033 | hserus | 2007-03-09 14:56:01 -0800 (Fri, 09 Mar 2007) | 3 lines

- Fix the logic where zonecut information was incorrectly getting overwritten
- Fix return type for is_trusted_zone() so that error codes can be propagated upward

------------------------------------------------------------------------
r3032 | hserus | 2007-03-09 14:55:43 -0800 (Fri, 09 Mar 2007) | 2 lines

- Fix return type for is_trusted_zone() so that error codes can be propagated upward

------------------------------------------------------------------------
r3031 | hserus | 2007-03-09 14:55:26 -0800 (Fri, 09 Mar 2007) | 4 lines

- Fix return type for is_trusted_zone() so that error codes can be propagated upward
- Implement function to check if provably insecure condition is trusted or no.
- If this state is not trusted set the result code to VAL_BAD_PROVABLY_UNSECURE

------------------------------------------------------------------------
r3030 | hserus | 2007-03-09 14:55:07 -0800 (Fri, 09 Mar 2007) | 2 lines

- Add definitions for provably insecure related policy

------------------------------------------------------------------------
r3029 | hserus | 2007-03-09 14:54:53 -0800 (Fri, 09 Mar 2007) | 3 lines

- Reorganize policy parse functions around the READ_ZONE_AND_VALUE and  STORE_POLICY_FOR_ZONE macros
- Define new policy that allows us to specify if the provably insecure condition is trusted or no

------------------------------------------------------------------------
r3028 | hserus | 2007-03-09 14:54:35 -0800 (Fri, 09 Mar 2007) | 2 lines

- Add new validator status for the "bad" provably insecure condition

------------------------------------------------------------------------
r3022 | hserus | 2007-03-08 12:53:31 -0800 (Thu, 08 Mar 2007) | 2 lines

Use VAL_BOGUS_UNPROVABLE state instead of VAL_INDETERMINATE

------------------------------------------------------------------------
r3021 | hserus | 2007-03-08 12:52:24 -0800 (Thu, 08 Mar 2007) | 2 lines

Moved find_next_zonecut function to val_assertion.c

------------------------------------------------------------------------
r3020 | hserus | 2007-03-08 12:51:37 -0800 (Thu, 08 Mar 2007) | 2 lines

Perform top-down validation while verifying if a name is provably unsecure

------------------------------------------------------------------------
r3002 | hserus | 2007-03-02 13:00:35 -0800 (Fri, 02 Mar 2007) | 2 lines

Fixed some older test cases

------------------------------------------------------------------------
r3001 | hserus | 2007-03-02 12:58:31 -0800 (Fri, 02 Mar 2007) | 10 lines

- Implement timeout logic for validator cache
- Implement bad-cache logic
- No longer accessing the trust assertion using the 
  val_ac_trust pointer. Instead, look for the trust point
  through the queries_for_query cache
- Modifiy prototype of various functions to allow access
  to the queries_for_query cache
- Dont use the VAL_INDETERMINATE_PROOF status code, instead
  use VAL_BOGUS_PROOF

------------------------------------------------------------------------
r3000 | hserus | 2007-03-02 12:58:14 -0800 (Fri, 02 Mar 2007) | 3 lines

- Correctly set the zonecut information for DS records 
  obtained while following referrals

------------------------------------------------------------------------
r2999 | hserus | 2007-03-02 12:58:02 -0800 (Fri, 02 Mar 2007) | 3 lines

- No longer accessing the trust assertion using the
  val_ac_trust pointer

------------------------------------------------------------------------
r2998 | hserus | 2007-03-02 12:57:36 -0800 (Fri, 02 Mar 2007) | 10 lines

- Add definitions for bad cache TTL and threshold
- Removed pending query logic; we need to go and look 
  for our pending query from the queries_for_query cache
  depending on the state of the assertion.
- No longer maintain a pointer to val_ac_trust. 
  If data in our cache times out the value will not 
  be trustworthy.
- Store TTL expiry and bad cache status in the 
  val_query_chain structure

------------------------------------------------------------------------
r2997 | hserus | 2007-03-02 12:24:19 -0800 (Fri, 02 Mar 2007) | 2 lines

Recognize the VAL_ERROR status code

------------------------------------------------------------------------
r2994 | hserus | 2007-03-02 07:38:54 -0800 (Fri, 02 Mar 2007) | 2 lines

Don't complain if the class is missing

------------------------------------------------------------------------
r2990 | hserus | 2007-03-01 13:30:58 -0800 (Thu, 01 Mar 2007) | 2 lines

Added some level of logging when conf files cannot be read

------------------------------------------------------------------------
r2986 | rstory | 2007-03-01 07:36:30 -0800 (Thu, 01 Mar 2007) | 1 line

bump 2 log messages from DEBUG to INFO
------------------------------------------------------------------------
r2985 | rstory | 2007-03-01 07:35:19 -0800 (Thu, 01 Mar 2007) | 7 lines

- remove unused 'const char *' ptr in val_log struct
- add 'void *' ptr in val_log struct
- new logging method: callback
  - add new cb (callback) member to union in val_log struct
  - prototype for val_log_add_cb
- add missing setup initialization in val_log_add_udp

------------------------------------------------------------------------
r2983 | hserus | 2007-03-01 06:45:47 -0800 (Thu, 01 Mar 2007) | 2 lines

Fix typo

------------------------------------------------------------------------
r2980 | hserus | 2007-02-28 11:23:22 -0800 (Wed, 28 Feb 2007) | 2 lines

Fix bad copy paste

------------------------------------------------------------------------
r2979 | hserus | 2007-02-28 11:16:07 -0800 (Wed, 28 Feb 2007) | 2 lines

Construct the chain of trust even if some other thread had fetched data for you.

------------------------------------------------------------------------
r2976 | hserus | 2007-02-28 08:47:21 -0800 (Wed, 28 Feb 2007) | 2 lines

Start from the correct testcase in the range specified by {tcs, tce}

------------------------------------------------------------------------
r2965 | rstory | 2007-02-27 12:57:30 -0800 (Tue, 27 Feb 2007) | 1 line

clean up memory on exit
------------------------------------------------------------------------
r2964 | rstory | 2007-02-27 12:57:06 -0800 (Tue, 27 Feb 2007) | 1 line

fix for running specific test range
------------------------------------------------------------------------
r2963 | hserus | 2007-02-27 09:55:30 -0800 (Tue, 27 Feb 2007) | 4 lines

- We no longer log query information, since the query chain
  could easily have been modified by a different thread,
  and hence the results may be un-predictable.

------------------------------------------------------------------------
r2962 | hserus | 2007-02-27 09:55:11 -0800 (Tue, 27 Feb 2007) | 4 lines

- Modified function prototypes: use the queries_for_query linked 
  list instead of the val_query_chain linked list while tracking 
  queries issued for val_resolve_and_check()

------------------------------------------------------------------------
r2961 | hserus | 2007-02-27 09:54:20 -0800 (Tue, 27 Feb 2007) | 3 lines

- Define macros for acquiring and releasing context-related 
  validator policy locks.

------------------------------------------------------------------------
r2960 | hserus | 2007-02-27 09:54:02 -0800 (Tue, 27 Feb 2007) | 4 lines

- Initialize context-related locks during context creation
- Perform proper cleanup of context upon error or when 
  it is released.

------------------------------------------------------------------------
r2959 | hserus | 2007-02-27 09:53:27 -0800 (Tue, 27 Feb 2007) | 8 lines

- Add any new queries to the queries_for_query linked list 
  being maintained for the current val_resolve_and_check() 
  function.
- Don't modify the name server cache in 
  res_zi_unverified_ns_list(). This is to allow us to use 
  a read-lock (as opposed to a write lock) while reading 
  from this cache.

------------------------------------------------------------------------
r2958 | hserus | 2007-02-27 09:52:20 -0800 (Tue, 27 Feb 2007) | 38 lines

- add_to_query_chain() now returns the added element 
  in the last parameter. This element is no longer brought 
  to the front of the list. Propagate this value to all
  functions that were operating under this older assumption.
- Also match query flags when looking for a matching query 
  in the val_query_chain linked list
- Maintain a new linked list that tracks all queries issued 
  for a given query. Each element in the linked list points 
  to a separate element in the val_query_chain linked list
  For each element added to the queries_for_query linked 
  list, we also acquire a read lock, so that the query does 
  not disappear underneath us. val_resolve_and_check() only 
  tries to answer these queries (instead of all outstanding 
  queries in val_query_chain)
- A proof of non-existence with a different owner name can 
  be returned when we ask for one of NSEC, SOA or NSEC3 types. 
  Don't treat this as a conflicting answer.
- For each newly created authentication chain element add a 
  "back pointer" to the query that was responsible for its 
  creation.
- Use flags from the val_query_chain structure where ever 
  this is available instead of passing the flags as a 
  separate argument.
- Since the authentication chain is always available from 
  within the context, don't pass it as a separate argument 
  to functions such as assimilate_answers
- Combine find_next_zonecut() and verify_provably_unsecure() 
  functions into the main query send/receive cycle. Also add 
  a "done" parameter for each of these functions to indicate 
  if the operation completed or was waiting for more data.
- Return result of verify_provably_unsecure() check as a 
  separate param and return the normal error codes from the 
  function.
- ask_cache() and ask_resolver() now try and fill in data 
  for all pending queries instead of just returning when the 
  first answer is found.
- Acquire proper locks before refreshing validator policy

------------------------------------------------------------------------
r2957 | hserus | 2007-02-27 09:49:11 -0800 (Tue, 27 Feb 2007) | 4 lines

- Use separate locks for each cache type
- Always grab an write lock when modifying the cache 
  instead of doing upgrade/downgrade operations

------------------------------------------------------------------------
r2956 | hserus | 2007-02-27 09:48:48 -0800 (Tue, 27 Feb 2007) | 2 lines

- Modify validator policy only after acquiring appropriate locks

------------------------------------------------------------------------
r2955 | hserus | 2007-02-27 09:48:25 -0800 (Tue, 27 Feb 2007) | 4 lines

- We no longer log query information, since the query chain
  could easily have been modified by a different thread; 
  the results are un-predictable.

------------------------------------------------------------------------
r2954 | hserus | 2007-02-27 09:46:48 -0800 (Tue, 27 Feb 2007) | 2 lines

- Never block when reading data from the sockets

------------------------------------------------------------------------
r2953 | hserus | 2007-02-27 09:46:23 -0800 (Tue, 27 Feb 2007) | 16 lines

- Added VAL_MASK_AFFECTS_CACHING flag 
- Define read-write and mutex locks for val_context_t 
- Added a back pointer from the "internal" authentication
  chain element to the query that was reponsible for its
  creation
- Added a read-write lock for val_query_chain
- Made qc_flags type consistent with type being passed to
  val_resolve_and_check()
- Added new structure queries_for_query that acts as a
  container for all queries issued while verifying and
  validating a given query.
- Changed the prototype for val_log_authentication_chain.
  We no longer log query information, since the query chain
  could easily have been modified by a different thread,
  and hence the results may be un-predictable.

------------------------------------------------------------------------
r2952 | hserus | 2007-02-26 13:27:16 -0800 (Mon, 26 Feb 2007) | 3 lines

Make return code consistent with other command line apps for the validator: return 0 in success and -1 on
failure.

------------------------------------------------------------------------
r2951 | hserus | 2007-02-26 12:56:10 -0800 (Mon, 26 Feb 2007) | 2 lines

Update NSEC3 code to most recent spec

------------------------------------------------------------------------
r2943 | rstory | 2007-02-23 07:24:54 -0800 (Fri, 23 Feb 2007) | 2 lines

use $sysconfdir instead of $prefix/etc

------------------------------------------------------------------------
r2937 | rstory | 2007-02-20 10:23:50 -0800 (Tue, 20 Feb 2007) | 1 line

update to use etc/dnssec-tools
------------------------------------------------------------------------
r2934 | rstory | 2007-02-20 10:16:12 -0800 (Tue, 20 Feb 2007) | 4 lines

- fix much breakage in makedirectories target
- add PREFIX/etc/dnssec-tools to INSTALLDIRS
- update nextstepinstructions to use paths from configure

------------------------------------------------------------------------
r2933 | rstory | 2007-02-20 10:14:36 -0800 (Tue, 20 Feb 2007) | 6 lines

- display summary of options when configure finishes
- update default config prefixes to PREFIX/etc/dnssec-tools
- prompt for resolv.conf and root.hints locations if not specified
- search for existing root.hints file, and use it as the default
  in prompt to user

------------------------------------------------------------------------
r2932 | rstory | 2007-02-20 10:10:52 -0800 (Tue, 20 Feb 2007) | 3 lines

- add acinclude.m4 (from net-snmp)
- run aclocal to upate aclocal.m4, and include acinclude.m4

------------------------------------------------------------------------
r2931 | rstory | 2007-02-20 10:00:34 -0800 (Tue, 20 Feb 2007) | 3 lines

- add -F | --testcase-conf to all testcase file to be specified on command line
- warn if -s and -S are combined, or -S used multiple times

------------------------------------------------------------------------
r2929 | rstory | 2007-02-16 15:27:01 -0800 (Fri, 16 Feb 2007) | 5 lines

- add '-S suite |--test-suite=suite'
- '-s | --selftest' now runs all suites
- prefix selftest runs with suite name
- prefix each test with index in test suite

------------------------------------------------------------------------
r2928 | hserus | 2007-02-16 15:20:37 -0800 (Fri, 16 Feb 2007) | 2 lines

Install getaddr and gethost applications

------------------------------------------------------------------------
r2927 | hserus | 2007-02-16 15:19:43 -0800 (Fri, 16 Feb 2007) | 2 lines

Return the validation status as the program status code

------------------------------------------------------------------------
r2926 | hserus | 2007-02-16 15:04:45 -0800 (Fri, 16 Feb 2007) | 2 lines

Don't complaint if root.hints is missing

------------------------------------------------------------------------
r2925 | rstory | 2007-02-16 13:46:57 -0800 (Fri, 16 Feb 2007) | 1 line

add sres to libs
------------------------------------------------------------------------
r2924 | rstory | 2007-02-16 10:40:39 -0800 (Fri, 16 Feb 2007) | 3 lines

- add the rest of the tests from validator, as suites
  - Please feel free to re-organize and groupe the suites as needed!

------------------------------------------------------------------------
r2923 | rstory | 2007-02-16 10:38:35 -0800 (Fri, 16 Feb 2007) | 1 line

add support for suites of tests
------------------------------------------------------------------------
r2921 | rstory | 2007-02-13 11:59:13 -0800 (Tue, 13 Feb 2007) | 1 line

copy ptr after it is initialized
------------------------------------------------------------------------
r2920 | rstory | 2007-02-13 11:45:28 -0800 (Tue, 13 Feb 2007) | 1 line

deal with default prefix for testcase path
------------------------------------------------------------------------
r2919 | rstory | 2007-02-13 11:28:12 -0800 (Tue, 13 Feb 2007) | 1 line

add includes for os x
------------------------------------------------------------------------
r2918 | rstory | 2007-02-13 10:47:55 -0800 (Tue, 13 Feb 2007) | 1 line

add path to cp
------------------------------------------------------------------------
r2917 | rstory | 2007-02-13 10:47:03 -0800 (Tue, 13 Feb 2007) | 3 lines

- rename selftest dist file
- create $prefix/etc/dnssec during install

------------------------------------------------------------------------
r2916 | rstory | 2007-02-13 10:45:08 -0800 (Tue, 13 Feb 2007) | 1 line

rename file
------------------------------------------------------------------------
r2915 | rstory | 2007-02-13 10:12:14 -0800 (Tue, 13 Feb 2007) | 1 line

new header
------------------------------------------------------------------------
r2914 | rstory | 2007-02-13 10:11:12 -0800 (Tue, 13 Feb 2007) | 2 lines

update for getting testcases from config file

------------------------------------------------------------------------
r2913 | rstory | 2007-02-13 10:08:30 -0800 (Tue, 13 Feb 2007) | 2 lines

new files for getting testcases from a config file

------------------------------------------------------------------------
r2912 | rstory | 2007-02-13 10:06:49 -0800 (Tue, 13 Feb 2007) | 2 lines

add VALIDATOR_TESTCASES macro

------------------------------------------------------------------------
r2910 | rstory | 2007-02-13 06:52:24 -0800 (Tue, 13 Feb 2007) | 2 lines

- add define for MAX_TEST_RESULTS

------------------------------------------------------------------------
r2909 | rstory | 2007-02-13 06:33:23 -0800 (Tue, 13 Feb 2007) | 3 lines

- rename get_token to val_get_token and remove static qualifier
- new static destroy_valpolovr to reduce duplicated code

------------------------------------------------------------------------
r2908 | hserus | 2007-02-12 13:36:05 -0800 (Mon, 12 Feb 2007) | 2 lines

Save header information when constructing an empty nxdomain response

------------------------------------------------------------------------
r2906 | hserus | 2007-02-09 06:25:27 -0800 (Fri, 09 Feb 2007) | 3 lines

Make VAL_NONEXISTENT_TYPE_NOCHAIN a transient error code: it will settle to one of
VAL_NONEXISTENT_NAME_NOCHAIN or VAL_NONEXISTENT_TYPE_NOCHAIN

------------------------------------------------------------------------
r2905 | hserus | 2007-02-08 12:27:05 -0800 (Thu, 08 Feb 2007) | 2 lines

Correct improper #undef usage

------------------------------------------------------------------------
r2904 | marz | 2007-02-07 11:49:02 -0800 (Wed, 07 Feb 2007) | 1 line

install libval-config and use it from perlmod, fix test for mac compatibility
------------------------------------------------------------------------
r2901 | rstory | 2007-02-06 07:45:33 -0800 (Tue, 06 Feb 2007) | 1 line

add missing lvc_LIBDIR
------------------------------------------------------------------------
r2899 | rstory | 2007-02-06 07:41:26 -0800 (Tue, 06 Feb 2007) | 1 line

make libval-config executable
------------------------------------------------------------------------
r2898 | rstory | 2007-02-05 15:05:20 -0800 (Mon, 05 Feb 2007) | 1 line

help spacing tweaks
------------------------------------------------------------------------
r2896 | rstory | 2007-02-05 14:57:13 -0800 (Mon, 05 Feb 2007) | 6 lines

- add configurable config file paths
  - remove VAL_CONFIGURATION_FILE, ROOT_HINTS and RESOLV_CONF from validator.h
  - add configure options to specify paths for dnsval.conf, resolv.conf and root.hints
  - update code for new defines for those paths
  - update libval-config with options to report those paths

------------------------------------------------------------------------
r2883 | hserus | 2007-02-02 08:26:33 -0800 (Fri, 02 Feb 2007) | 2 lines

Use standard method of accessing stat timestamps

------------------------------------------------------------------------
r2882 | hserus | 2007-02-02 08:11:02 -0800 (Fri, 02 Feb 2007) | 2 lines

Remove reference to the_default_context

------------------------------------------------------------------------
r2881 | hserus | 2007-02-02 07:54:48 -0800 (Fri, 02 Feb 2007) | 2 lines

Define prototypes of new functions that allow refresh of configuration files to be possible

------------------------------------------------------------------------
r2880 | hserus | 2007-02-02 07:54:15 -0800 (Fri, 02 Feb 2007) | 6 lines

Define a new context-creation function that allows you to specify the resolver/validator/root-hints
configuration files
Perform initialization and destruction of new context members that implement config refresh functionality
Define new functions to refresh configuration files


------------------------------------------------------------------------
r2879 | hserus | 2007-02-02 07:53:58 -0800 (Fri, 02 Feb 2007) | 2 lines

Use the root hints information within context to bootstrap queries 

------------------------------------------------------------------------
r2878 | hserus | 2007-02-02 07:53:39 -0800 (Fri, 02 Feb 2007) | 5 lines

Use the config files within the context to generate validator and resolver policy
On each execution of val_resolve_and_check() check the last modified time on the configuration files and 
re-initialize configuration files if required


------------------------------------------------------------------------
r2877 | hserus | 2007-02-02 07:53:19 -0800 (Fri, 02 Feb 2007) | 3 lines

Store root_ns information inside context since this can be different for different contexts (theoretically)


------------------------------------------------------------------------
r2876 | hserus | 2007-02-02 07:53:00 -0800 (Fri, 02 Feb 2007) | 5 lines

Save last accessed timestamp each time the configuration files are read
Make modifications to the context only when the configuration files have been parsed properly. That way we 
can ensure that the context is not corrupted when we want to refresh it with a new configuration file.


------------------------------------------------------------------------
r2875 | hserus | 2007-02-02 07:52:37 -0800 (Fri, 02 Feb 2007) | 2 lines

rename resolver_config_set/get to resolv_conf_set/get

------------------------------------------------------------------------
r2874 | hserus | 2007-02-02 07:51:46 -0800 (Fri, 02 Feb 2007) | 3 lines

Add a new option -w that allows test cases to be re-run in a loop


------------------------------------------------------------------------
r2873 | hserus | 2007-02-02 07:51:16 -0800 (Fri, 02 Feb 2007) | 5 lines

- Allow different validator/resolver/root configuration files for each context
- Keep track of last modifed times for each configuration file
- Add prototypes for new functions that allow above features to be accessed


------------------------------------------------------------------------
r2872 | rstory | 2007-02-02 07:49:40 -0800 (Fri, 02 Feb 2007) | 2 lines

add support for libval-config script

------------------------------------------------------------------------
r2870 | hserus | 2007-02-02 06:15:27 -0800 (Fri, 02 Feb 2007) | 3 lines

When checking for cached query, only compare against the "original" name and not the transformed name (for
        example through a cname chain)

------------------------------------------------------------------------
r2868 | marz | 2007-02-01 13:06:42 -0800 (Thu, 01 Feb 2007) | 1 line

return alloc'd mem, rename conf funcs
------------------------------------------------------------------------
r2867 | hserus | 2007-02-01 11:33:50 -0800 (Thu, 01 Feb 2007) | 2 lines

Perform correct NULL check

------------------------------------------------------------------------
r2860 | hardaker | 2007-01-31 08:01:46 -0800 (Wed, 31 Jan 2007) | 1 line

update libtool library version
------------------------------------------------------------------------
r2859 | rstory | 2007-01-31 07:35:13 -0800 (Wed, 31 Jan 2007) | 2 lines

add discussion of val_resquery returning a value > anslen

------------------------------------------------------------------------
r2832 | rstory | 2007-01-26 14:08:58 -0800 (Fri, 26 Jan 2007) | 4 lines

- val_res_query()
  - free internal response after data copied
  - return full size of response on success

------------------------------------------------------------------------
r2811 | hserus | 2007-01-19 04:25:16 -0800 (Fri, 19 Jan 2007) | 2 lines

Separate out check for trusted condition from check for validated condition

------------------------------------------------------------------------
r2810 | hserus | 2007-01-18 18:51:52 -0800 (Thu, 18 Jan 2007) | 2 lines

Add log statements for VAL_TRUSTED_ANSWER, VAL_UNTRUSTED_ANSWER and VAL_VALIDATED_ANSWER

------------------------------------------------------------------------
r2809 | hserus | 2007-01-18 18:51:10 -0800 (Thu, 18 Jan 2007) | 2 lines

Fix logic for determining trusted status

------------------------------------------------------------------------
r2808 | hserus | 2007-01-18 18:50:29 -0800 (Thu, 18 Jan 2007) | 2 lines

Move variable outside #define construct

------------------------------------------------------------------------
r2804 | hserus | 2007-01-18 08:57:57 -0800 (Thu, 18 Jan 2007) | 2 lines

Attempt to fix memory leak

------------------------------------------------------------------------
r2802 | hserus | 2007-01-17 09:17:14 -0800 (Wed, 17 Jan 2007) | 2 lines

Return VAL_TRUSTED_ANSWER, VAL_UNTRUSTED_ANSWER or VAL_VALIDATED_ANSWER for merged validator status values.

------------------------------------------------------------------------
r2801 | hserus | 2007-01-17 09:16:37 -0800 (Wed, 17 Jan 2007) | 3 lines

Recognize VAL_VALIDATED_ANSWER as a trusted and validated answer
Recognize VAL_TRUSTED_ANSWER as a trusted answer

------------------------------------------------------------------------
r2800 | hserus | 2007-01-17 09:16:15 -0800 (Wed, 17 Jan 2007) | 4 lines

Remove part that says that merged status value can be a non-existence type. We actually infer non-existence
using the normal mechanisms used by the legacy functions. Additionally, val_status tells us if this is 
trusted or no.

------------------------------------------------------------------------
r2799 | hserus | 2007-01-17 09:14:11 -0800 (Wed, 17 Jan 2007) | 2 lines

Supply new val_status param to val_getaddrinfo()

------------------------------------------------------------------------
r2798 | hserus | 2007-01-17 09:13:42 -0800 (Wed, 17 Jan 2007) | 2 lines

Add val_status parameter to val_getaddrinfo()

------------------------------------------------------------------------
r2797 | hserus | 2007-01-17 09:13:26 -0800 (Wed, 17 Jan 2007) | 2 lines

Add validator status codes for VAL_TRUSTED_ANSWER, VAL_UNTRUSTED_ANSWER and VAL_VALIDATED_ANSWER.

------------------------------------------------------------------------
r2776 | rstory | 2007-01-12 14:42:34 -0800 (Fri, 12 Jan 2007) | 1 line

add subdir to include dir path
------------------------------------------------------------------------
r2773 | hserus | 2007-01-11 20:03:59 -0800 (Thu, 11 Jan 2007) | 4 lines

For glue fetch operations set the DONT_VALIDATE flag
Ensure that names are not registered twice for alias chains


------------------------------------------------------------------------
r2772 | hserus | 2007-01-11 20:01:53 -0800 (Thu, 11 Jan 2007) | 2 lines

Make sure we break out of the resolve_and_check loop only if some result is available

------------------------------------------------------------------------
r2771 | hserus | 2007-01-11 16:14:02 -0800 (Thu, 11 Jan 2007) | 2 lines

Look for glue in cname/dname chain

------------------------------------------------------------------------
r2770 | hserus | 2007-01-11 14:33:28 -0800 (Thu, 11 Jan 2007) | 2 lines

Fix memory leak and null pointer exception

------------------------------------------------------------------------
r2769 | hserus | 2007-01-11 14:32:39 -0800 (Thu, 11 Jan 2007) | 2 lines

Fix memory leak

------------------------------------------------------------------------
r2768 | hserus | 2007-01-11 14:32:02 -0800 (Thu, 11 Jan 2007) | 2 lines

Use VAL_INDETERMINATE in place of VAL_ERROR 

------------------------------------------------------------------------
r2763 | rstory | 2007-01-11 13:31:00 -0800 (Thu, 11 Jan 2007) | 1 line

use new validator path to resolver.h and validator.h
------------------------------------------------------------------------
r2762 | rstory | 2007-01-11 13:28:17 -0800 (Thu, 11 Jan 2007) | 1 line

use new validator path to resolver.h and validator.h
------------------------------------------------------------------------
r2761 | rstory | 2007-01-11 13:25:06 -0800 (Thu, 11 Jan 2007) | 1 line

use new validator path to resolver.h and validator.h
------------------------------------------------------------------------
r2759 | rstory | 2007-01-11 13:18:31 -0800 (Thu, 11 Jan 2007) | 1 line

use new validator path to resolver.h
------------------------------------------------------------------------
r2758 | rstory | 2007-01-11 13:15:34 -0800 (Thu, 11 Jan 2007) | 1 line

use new validator path to resolver.h
------------------------------------------------------------------------
r2757 | rstory | 2007-01-11 12:57:58 -0800 (Thu, 11 Jan 2007) | 1 line

update includes for new subdirectory
------------------------------------------------------------------------
r2756 | rstory | 2007-01-11 12:56:05 -0800 (Thu, 11 Jan 2007) | 1 line

move val_errors.h to new include directory
------------------------------------------------------------------------
r2755 | rstory | 2007-01-11 12:55:24 -0800 (Thu, 11 Jan 2007) | 1 line

remove wrong version
------------------------------------------------------------------------
r2754 | rstory | 2007-01-11 12:52:38 -0800 (Thu, 11 Jan 2007) | 1 line

move validator.h and val_errors.h to new include directory
------------------------------------------------------------------------
r2753 | rstory | 2007-01-11 12:47:18 -0800 (Thu, 11 Jan 2007) | 1 line

move resolver.h to new include directory
------------------------------------------------------------------------
r2752 | rstory | 2007-01-11 12:38:34 -0800 (Thu, 11 Jan 2007) | 1 line

new validator include dir
------------------------------------------------------------------------
r2750 | hserus | 2007-01-10 15:35:15 -0800 (Wed, 10 Jan 2007) | 2 lines

Use u_int8_t in place of char to represent on-the-wire names

------------------------------------------------------------------------
r2749 | hserus | 2007-01-10 15:35:02 -0800 (Wed, 10 Jan 2007) | 2 lines

Add aliases for error codes that have errno equivalents

------------------------------------------------------------------------
r2748 | hserus | 2007-01-10 15:34:47 -0800 (Wed, 10 Jan 2007) | 2 lines

Additional check before logging information about original query

------------------------------------------------------------------------
r2747 | hserus | 2007-01-10 15:34:31 -0800 (Wed, 10 Jan 2007) | 2 lines

Add prototype for process_cname_dname_responses()

------------------------------------------------------------------------
r2746 | hserus | 2007-01-10 15:34:18 -0800 (Wed, 10 Jan 2007) | 5 lines

Moved ALLOCATE_REFERRAL_BLOCK from this file to val_support.h
In find_nslist_for_query() look for a configured forwarder for the given zone first
Move cname/dname processing logic into separate function, process_cname_dname_responses()
Major clean-up of digest_response() logic

------------------------------------------------------------------------
r2745 | hserus | 2007-01-10 15:33:59 -0800 (Wed, 10 Jan 2007) | 10 lines

Change name_in_qnames() function so that we only pass the name as a parameter instead of the entire rrset
Check for systhesized cname case in fails_to_answer_query()
While building pending query, try harder to find the DNSKEY that created an RRSIG and check that the
signer is within the zone.
In check for conflicting answers allow chains of cnames and dnames to be possible
Allow ask_cache to read cached cnames and dnames
Stowing of answers only happens during digest_response() so that in-bailiwick condition cnan be checked
Use namename() while comparing two on-the-wire names
Implement other miscellaneous todos (portions marked XXX)

------------------------------------------------------------------------
r2744 | hserus | 2007-01-10 15:33:36 -0800 (Wed, 10 Jan 2007) | 4 lines

Add namename() function along the lines of strstr() to compare two on-the-wire domain names
Also add a new copy_rrset_rec_list() function
Moved ALLOCATE_REFERRAL_BLOCK from val_resquery.c to here so that other files may use it

------------------------------------------------------------------------
r2743 | hserus | 2007-01-10 15:33:15 -0800 (Wed, 10 Jan 2007) | 3 lines

Add namename() function along the lines of strstr() to compare two on-the-wire domain names
Also add a new copy_rrset_rec_list() function

------------------------------------------------------------------------
r2742 | hserus | 2007-01-10 15:33:02 -0800 (Wed, 10 Jan 2007) | 3 lines

Set couple of missing error states


------------------------------------------------------------------------
r2741 | hserus | 2007-01-10 15:32:46 -0800 (Wed, 10 Jan 2007) | 3 lines

Change prototypes for all the stow_ functions since we now do in-bailiwick checking
Change prototypes for get_cached_rrset and get_nslist_from_cache as well.

------------------------------------------------------------------------
r2740 | hserus | 2007-01-10 15:32:31 -0800 (Wed, 10 Jan 2007) | 7 lines

Check if answers being cached are in-bailiwick for the given query
Return a domain_info structure for get_cached_rrset. This is to allow cached
cname/dname records to be returned
Add preliminary support for negative answer cache
Add support for storing/returning entries to/from the forwarder cache
Use namename() while comparing two on-the-wire names

------------------------------------------------------------------------
r2739 | hserus | 2007-01-10 15:32:16 -0800 (Wed, 10 Jan 2007) | 4 lines

Separated name server parsing logic into a separate function
Add support for forwarding queries to specific name servers for specific zones.


------------------------------------------------------------------------
r2738 | rstory | 2007-01-09 14:14:22 -0800 (Tue, 09 Jan 2007) | 1 line

make args param to val_log_add_optarg const
------------------------------------------------------------------------
r2737 | rstory | 2007-01-09 12:23:31 -0800 (Tue, 09 Jan 2007) | 1 line

update for previous configure.in change
------------------------------------------------------------------------
r2730 | hserus | 2007-01-08 15:12:15 -0800 (Mon, 08 Jan 2007) | 2 lines

This version was submitted as draft-hayatnagarkar-dnsext-validator-api-03

------------------------------------------------------------------------
r2725 | rstory | 2007-01-06 09:07:35 -0800 (Sat, 06 Jan 2007) | 2 lines

- do not use pthreads if it is not available, or user configured without it

------------------------------------------------------------------------
r2724 | rstory | 2007-01-06 09:05:45 -0800 (Sat, 06 Jan 2007) | 3 lines

- add '-threads' suffix to libval iff using threads
- no explicit linking w/pthreads

------------------------------------------------------------------------
r2723 | rstory | 2007-01-06 08:18:59 -0800 (Sat, 06 Jan 2007) | 4 lines

- tweak indentation on some help
- test for libpthreads
- add --without-threads

------------------------------------------------------------------------
r2705 | hserus | 2007-01-03 09:05:53 -0800 (Wed, 03 Jan 2007) | 2 lines

Add missing tag

------------------------------------------------------------------------
r2667 | hserus | 2006-12-11 11:02:35 -0800 (Mon, 11 Dec 2006) | 2 lines

Use the first policy in the conf file as the default if none is specified.

------------------------------------------------------------------------
r2664 | rstory | 2006-12-08 06:48:32 -0800 (Fri, 08 Dec 2006) | 1 line

fix byteorder for ascii ports
------------------------------------------------------------------------
r2662 | hserus | 2006-12-07 10:07:54 -0800 (Thu, 07 Dec 2006) | 2 lines

Set the MERGE flag when composing an answer

------------------------------------------------------------------------
r2661 | hserus | 2006-12-07 08:24:13 -0800 (Thu, 07 Dec 2006) | 2 lines

Initialize rrs.val_rrset_server to NULL

------------------------------------------------------------------------
r2660 | hserus | 2006-12-07 08:23:45 -0800 (Thu, 07 Dec 2006) | 5 lines

Display message when zone cut cannot be identified
Avoid possible null pointer exception when query for SOA returns no data
Ensure that proper status is maintained in the authentication chain when proofs of non-existence are
returned from the wrong side of the zone cut

------------------------------------------------------------------------
r2652 | rstory | 2006-12-05 12:56:13 -0800 (Tue, 05 Dec 2006) | 1 line

add targets for help, test and leakchecks (requires valgrind)
------------------------------------------------------------------------
r2651 | hserus | 2006-12-05 12:22:09 -0800 (Tue, 05 Dec 2006) | 2 lines

Fix memory leaks

------------------------------------------------------------------------
r2632 | hserus | 2006-12-04 14:34:35 -0800 (Mon, 04 Dec 2006) | 2 lines

Fix bug in duplicate policy detection logic

------------------------------------------------------------------------
r2630 | hserus | 2006-12-04 12:31:32 -0800 (Mon, 04 Dec 2006) | 2 lines

Update expected result values for test cases

------------------------------------------------------------------------
r2629 | hardaker | 2006-12-04 11:55:01 -0800 (Mon, 04 Dec 2006) | 1 line

change future/pastdate name records
------------------------------------------------------------------------
r2620 | marz | 2006-12-02 07:11:59 -0800 (Sat, 02 Dec 2006) | 1 line

fix crash with VAL_QUERY_MERGE_RRSETS
------------------------------------------------------------------------
r2602 | rstory | 2006-12-01 13:22:34 -0800 (Fri, 01 Dec 2006) | 1 line

pre-release indent
------------------------------------------------------------------------
r2601 | rstory | 2006-12-01 13:15:59 -0800 (Fri, 01 Dec 2006) | 1 line

pre-release indent
------------------------------------------------------------------------
r2585 | hserus | 2006-12-01 09:44:52 -0800 (Fri, 01 Dec 2006) | 5 lines

Ensure that correct zonecut information information is stored for the nameserver that we obtained in
get_nslist_from_cache()
Dont assume that referrals seen with a CNAME response relate to the alias. They may be returned when the
parent does recursion for example.

------------------------------------------------------------------------
r2577 | hserus | 2006-11-30 13:14:49 -0800 (Thu, 30 Nov 2006) | 2 lines

Remove references to no longer defined functions

------------------------------------------------------------------------
r2568 | marz | 2006-11-30 09:58:07 -0800 (Thu, 30 Nov 2006) | 1 line

 some error code fixes...pending discussion
------------------------------------------------------------------------
r2567 | hserus | 2006-11-29 23:16:04 -0800 (Wed, 29 Nov 2006) | 2 lines

Try and settle on wording for policy scopes and labels

------------------------------------------------------------------------
r2566 | hserus | 2006-11-29 23:04:40 -0800 (Wed, 29 Nov 2006) | 2 lines

More tweaking to the policy hierarchy construction logic

------------------------------------------------------------------------
r2565 | hserus | 2006-11-29 21:49:28 -0800 (Wed, 29 Nov 2006) | 2 lines

: characters are only allowed for the default policy label.

------------------------------------------------------------------------
r2564 | hserus | 2006-11-29 21:44:23 -0800 (Wed, 29 Nov 2006) | 2 lines

Change policy related APIs to make them look similar to -03. We no longer have val_switch_policy_scope(),etc 

------------------------------------------------------------------------
r2563 | hserus | 2006-11-29 21:41:14 -0800 (Wed, 29 Nov 2006) | 2 lines

Change some of the semantics for the default policy. Its no longer always used implicitly.

------------------------------------------------------------------------
r2561 | hserus | 2006-11-29 14:06:29 -0800 (Wed, 29 Nov 2006) | 3 lines

Check for the case where an incorrect NS was returned as part of a positive response for a DS. This affects the zonecut detection
logic. 

------------------------------------------------------------------------
r2560 | hserus | 2006-11-29 14:05:20 -0800 (Wed, 29 Nov 2006) | 2 lines

Changed a log message

------------------------------------------------------------------------
r2559 | hserus | 2006-11-29 13:19:49 -0800 (Wed, 29 Nov 2006) | 2 lines

Make sure response is properly initialized to NULL.

------------------------------------------------------------------------
r2558 | hserus | 2006-11-29 13:11:47 -0800 (Wed, 29 Nov 2006) | 2 lines

Check for data before printing response data

------------------------------------------------------------------------
r2557 | hserus | 2006-11-29 12:47:47 -0800 (Wed, 29 Nov 2006) | 2 lines

Remove unnecessary comment

------------------------------------------------------------------------
r2556 | hserus | 2006-11-29 12:47:34 -0800 (Wed, 29 Nov 2006) | 2 lines

Passing params by reference to address xxx-audit comments in a different file

------------------------------------------------------------------------
r2555 | hserus | 2006-11-29 12:47:14 -0800 (Wed, 29 Nov 2006) | 4 lines

Address xxx-audit comments
make sure that correct zonecut information is saved when parent zone recursively obtains answers for the 
child zone (or the same ns is authoritative for the parent and the child)

------------------------------------------------------------------------
r2554 | hserus | 2006-11-29 12:46:53 -0800 (Wed, 29 Nov 2006) | 2 lines

remove xxx-audit comment since the issue of initializing rr_status was already addressed

------------------------------------------------------------------------
r2553 | hserus | 2006-11-29 12:46:36 -0800 (Wed, 29 Nov 2006) | 2 lines

Address xxx-audit comments

------------------------------------------------------------------------
r2552 | hserus | 2006-11-29 12:46:18 -0800 (Wed, 29 Nov 2006) | 5 lines

Address xxx-audit comments
In the check for provably insecure condition test for VAL_NONEXISTENT_TYPE_NOCHAIN
Save some information from the test for provably unsecure in the authentication chain
VAL_PROVABLY_UNSECURE is not an is_validated() status

------------------------------------------------------------------------
r2551 | hserus | 2006-11-29 12:45:46 -0800 (Wed, 29 Nov 2006) | 2 lines

Address xxx-audit comments

------------------------------------------------------------------------
r2550 | hserus | 2006-11-29 12:45:21 -0800 (Wed, 29 Nov 2006) | 2 lines

VAL_PROVABLY_UNSECURE is not an is_validated() status

------------------------------------------------------------------------
r2549 | hserus | 2006-11-29 12:44:53 -0800 (Wed, 29 Nov 2006) | 2 lines

Display a message that we are not installing the resolv.conf and dnsval.conf in standard locations.

------------------------------------------------------------------------
r2534 | rstory | 2006-11-28 14:59:53 -0800 (Tue, 28 Nov 2006) | 1 line

use EINVAL ifndef ENODATA
------------------------------------------------------------------------
r2531 | rstory | 2006-11-28 12:15:22 -0800 (Tue, 28 Nov 2006) | 1 line

add target test, so we can define _REENTRANT on solaris
------------------------------------------------------------------------
r2530 | rstory | 2006-11-28 12:13:53 -0800 (Tue, 28 Nov 2006) | 1 line

fix compiler const whining
------------------------------------------------------------------------
r2511 | tewok | 2006-11-27 12:07:25 -0800 (Mon, 27 Nov 2006) | 3 lines


A few formatting changes and added a missing squiggly.

------------------------------------------------------------------------
r2507 | hserus | 2006-11-27 10:08:10 -0800 (Mon, 27 Nov 2006) | 2 lines

Use a default "hints" value if one is not supplied.

------------------------------------------------------------------------
r2505 | tewok | 2006-11-27 09:41:00 -0800 (Mon, 27 Nov 2006) | 4 lines


Added a terminal serial comma.
Formatting fix I missed before.

------------------------------------------------------------------------
r2503 | marz | 2006-11-27 05:18:06 -0800 (Mon, 27 Nov 2006) | 1 line

declare global after struct
------------------------------------------------------------------------
r2502 | hserus | 2006-11-26 12:08:47 -0800 (Sun, 26 Nov 2006) | 2 lines

Add description for val_isvalidated(), VAL_NONEXISTENT_NAME_NOCHAIN and VAL_NONEXISTENT_TYPE_NOCHAIN

------------------------------------------------------------------------
r2501 | hserus | 2006-11-26 11:46:10 -0800 (Sun, 26 Nov 2006) | 6 lines

Modify transform_outstanding_results() so that error value for the proof can be passed as a parameter
While checking non-existence span, make sure that the bound is not closed.
Use the combination of val_istrusted and val_isvalidated to identify if the answer is locally trusted.
Set non-existence type of VAL_NONEXISTENT_NAME_NOCHAIN and VAL_NONEXISTENT_TYPE_NOCHAIN if the proof is 
locally trusted.

------------------------------------------------------------------------
r2500 | hserus | 2006-11-26 11:45:55 -0800 (Sun, 26 Nov 2006) | 2 lines

Define types for VAL_NONEXISTENT_NAME_NOCHAIN and VAL_NONEXISTENT_TYPE_NOCHAIN

------------------------------------------------------------------------
r2499 | hserus | 2006-11-26 11:45:36 -0800 (Sun, 26 Nov 2006) | 2 lines

Handle case for VAL_NONEXISTENT_NAME_NOCHAIN and VAL_NONEXISTENT_TYPE_NOCHAIN

------------------------------------------------------------------------
r2498 | hserus | 2006-11-26 08:21:49 -0800 (Sun, 26 Nov 2006) | 2 lines

Fix indentation

------------------------------------------------------------------------
r2497 | hserus | 2006-11-25 18:00:44 -0800 (Sat, 25 Nov 2006) | 2 lines

Print a log message when we detect a duplicate policy definition

------------------------------------------------------------------------
r2496 | hserus | 2006-11-25 17:59:23 -0800 (Sat, 25 Nov 2006) | 2 lines

Fix in detection of policy match logic

------------------------------------------------------------------------
r2495 | hserus | 2006-11-25 13:50:53 -0800 (Sat, 25 Nov 2006) | 2 lines

Make it possible to verify the chain of trust even if there is a keytag collision

------------------------------------------------------------------------
r2494 | hserus | 2006-11-25 13:50:00 -0800 (Sat, 25 Nov 2006) | 2 lines

Add header for validator.h

------------------------------------------------------------------------
r2488 | rstory | 2006-11-25 11:15:16 -0800 (Sat, 25 Nov 2006) | 1 line

add val_isvalidated(val_status)
------------------------------------------------------------------------
r2470 | hserus | 2006-11-23 19:16:34 -0800 (Thu, 23 Nov 2006) | 2 lines

Formatting changes

------------------------------------------------------------------------
r2469 | hserus | 2006-11-23 18:19:29 -0800 (Thu, 23 Nov 2006) | 2 lines

Add some text on zone-security-expectation

------------------------------------------------------------------------
r2468 | hserus | 2006-11-23 17:10:58 -0800 (Thu, 23 Nov 2006) | 4 lines

Rename VAL_R_TRUST_FLAG and VAL_R_MASKED_TRUST_FLAG to VAL_FLAG_CHAIN_COMPLETE and
VAL_MASKED_FLAG_CHAIN_COMPLETE.
Rename SET_RESULT_TRUSTED macro to SET_CHAIN_COMPLETE

------------------------------------------------------------------------
r2467 | hserus | 2006-11-23 17:10:32 -0800 (Thu, 23 Nov 2006) | 8 lines

Do away with VAL_R_ status codes
Rename VAL_R_TRUST_FLAG and VAL_R_MASKED_TRUST_FLAG to VAL_FLAG_CHAIN_COMPLETE and
VAL_MASKED_FLAG_CHAIN_COMPLETE.
Rename SET_RESULT_TRUSTED macro to SET_CHAIN_COMPLETE
Define VAL_AC_DONT_GO_FURTHER status to represent status codes where we need not go
further up the chain of
trust

------------------------------------------------------------------------
r2466 | hserus | 2006-11-23 17:10:20 -0800 (Thu, 23 Nov 2006) | 3 lines

Do away with VAL_R_ status codes
Add case for VAL_UNTRUSTED_ZONE in p_val_status()

------------------------------------------------------------------------
r2465 | hserus | 2006-11-23 17:10:00 -0800 (Thu, 23 Nov 2006) | 2 lines

Register only aliases in the qname chain

------------------------------------------------------------------------
r2464 | hserus | 2006-11-23 17:09:39 -0800 (Thu, 23 Nov 2006) | 6 lines

Do away with VAL_R_ status codes
build a pending query and validate authentication chain only If initial status is less
than VAL_AC_DONT_GO_FURTHER
Reorganize code for indentifying validation status values
Fix DNAME alias construction logic

------------------------------------------------------------------------
r2463 | hserus | 2006-11-23 17:09:05 -0800 (Thu, 23 Nov 2006) | 2 lines

Use val_istrusted() instead of individual success error codes

------------------------------------------------------------------------
r2462 | hserus | 2006-11-23 17:08:29 -0800 (Thu, 23 Nov 2006) | 2 lines

Add description for the trusted zone-security-expection condition

------------------------------------------------------------------------
r2461 | hserus | 2006-11-23 17:07:46 -0800 (Thu, 23 Nov 2006) | 2 lines

Add description for VAL_UNTRUSTED_ZONE status

------------------------------------------------------------------------
r2460 | hserus | 2006-11-23 17:07:05 -0800 (Thu, 23 Nov 2006) | 2 lines

Do away with the VAL_R_ status codes

------------------------------------------------------------------------
r2459 | hserus | 2006-11-22 16:12:37 -0800 (Wed, 22 Nov 2006) | 2 lines

Set the NONEXISTENT status only if we know that the answer is complete

------------------------------------------------------------------------
r2458 | hserus | 2006-11-22 15:52:46 -0800 (Wed, 22 Nov 2006) | 2 lines

Add logic for VAL_AC_TRUSTED_ZONE and VAL_TRUSTED_ZONE along the lines of VAL_AC_IGNORE_VALIDATION and VAL_IGNORE_VALIDATION

------------------------------------------------------------------------
r2457 | hserus | 2006-11-22 15:50:44 -0800 (Wed, 22 Nov 2006) | 2 lines

Add descriptions for VAL_TRUSTED_ZONE and VAL_AC_TRUSTED_ZONE

------------------------------------------------------------------------
r2453 | hserus | 2006-11-22 15:05:47 -0800 (Wed, 22 Nov 2006) | 4 lines

Recognize VAL_NONEXISTENT_NAME_OPTOUT as a variant of VAL_NONEXISTENT_NAME
Instead of looking for specific status codes that indicate that the proof was locally trusted, use the
val_istrusted() function.

------------------------------------------------------------------------
r2452 | hserus | 2006-11-22 15:02:39 -0800 (Wed, 22 Nov 2006) | 2 lines

Recognize VAL_NONEXISTENT_NAME_OPTOUT as a variant of VAL_NONEXISTENT_NAME

------------------------------------------------------------------------
r2451 | hserus | 2006-11-22 14:53:55 -0800 (Wed, 22 Nov 2006) | 2 lines

State that the NONEXISTENT error codes are returned when the proofs are trustworthy, and even if they have not been validated specifically.

------------------------------------------------------------------------
r2450 | hserus | 2006-11-22 14:38:34 -0800 (Wed, 22 Nov 2006) | 2 lines

Remove statements that can be interpreted as an implicit policy directive.

------------------------------------------------------------------------
r2449 | hserus | 2006-11-22 13:15:30 -0800 (Wed, 22 Nov 2006) | 2 lines

Properly detect span checks in proofs of non-existence even when wildcard proof appears before it.

------------------------------------------------------------------------
r2448 | rstory | 2006-11-22 12:44:15 -0800 (Wed, 22 Nov 2006) | 1 line

whitespace changes to make columns line up properly
------------------------------------------------------------------------
r2445 | hserus | 2006-11-22 12:13:51 -0800 (Wed, 22 Nov 2006) | 2 lines

Change expected status value for cname/AAAA test cases. The alias pointed to by the cname must validate successfully.

------------------------------------------------------------------------
r2438 | hserus | 2006-11-22 09:58:32 -0800 (Wed, 22 Nov 2006) | 2 lines

Correct some inconsistencies.

------------------------------------------------------------------------
r2437 | hserus | 2006-11-22 09:41:26 -0800 (Wed, 22 Nov 2006) | 3 lines

Don't use the VAL_AC_DONT_VALIDATE state. We had already defined the VAL_AC_IGNORE_VALIDATION state;
continue to use this.

------------------------------------------------------------------------
r2434 | hserus | 2006-11-22 07:18:29 -0800 (Wed, 22 Nov 2006) | 2 lines

Remove full path in the .so statements for manfiles

------------------------------------------------------------------------
r2428 | baerm | 2006-11-21 15:18:47 -0800 (Tue, 21 Nov 2006) | 11 lines


Added val_getnameinfo, val_gethostbyaddr_r, val_gethostbyaddr procedures
to val_getaddrinfo.c.

Working in local tests and should be good to use.

Still to do: only doing validation, should add /etc/hosts check;
should be in separate .c files.



------------------------------------------------------------------------
r2423 | hserus | 2006-11-21 12:27:16 -0800 (Tue, 21 Nov 2006) | 2 lines

Add basic support for DNAME

------------------------------------------------------------------------
r2422 | hserus | 2006-11-21 12:26:38 -0800 (Tue, 21 Nov 2006) | 3 lines

Add basic support for DNAME
Keep ordering of results same as the ordering of rrsets in the response

------------------------------------------------------------------------
r2412 | tewok | 2006-11-21 08:37:44 -0800 (Tue, 21 Nov 2006) | 3 lines


Changes for pod updates.

------------------------------------------------------------------------
r2411 | tewok | 2006-11-21 08:34:44 -0800 (Tue, 21 Nov 2006) | 3 lines


Minor wording or formatting changes.

------------------------------------------------------------------------
r2410 | tewok | 2006-11-21 08:24:44 -0800 (Tue, 21 Nov 2006) | 3 lines


Slight rewording change.

------------------------------------------------------------------------
r2402 | tewok | 2006-11-21 07:48:41 -0800 (Tue, 21 Nov 2006) | 4 lines


Adding update versions.  


------------------------------------------------------------------------
r2401 | tewok | 2006-11-21 07:42:48 -0800 (Tue, 21 Nov 2006) | 4 lines


A few minor fixes (mostly punctuation and formatting) that escaped
an earlier checkin.

------------------------------------------------------------------------
r2400 | hserus | 2006-11-21 07:08:09 -0800 (Tue, 21 Nov 2006) | 2 lines

update man for most recent pod

------------------------------------------------------------------------
r2398 | tewok | 2006-11-20 20:52:51 -0800 (Mon, 20 Nov 2006) | 3 lines


Formatting fixes.

------------------------------------------------------------------------
r2397 | tewok | 2006-11-20 19:23:17 -0800 (Mon, 20 Nov 2006) | 3 lines


Formatting fix.

------------------------------------------------------------------------
r2396 | tewok | 2006-11-20 19:17:27 -0800 (Mon, 20 Nov 2006) | 4 lines


Formatting changes.
Reworded a few sentences.

------------------------------------------------------------------------
r2395 | tewok | 2006-11-20 18:33:10 -0800 (Mon, 20 Nov 2006) | 3 lines


Clarify an error description.

------------------------------------------------------------------------
r2394 | tewok | 2006-11-20 18:13:24 -0800 (Mon, 20 Nov 2006) | 4 lines


Formatting fixes.
Wording changes.

------------------------------------------------------------------------
r2393 | tewok | 2006-11-20 17:39:02 -0800 (Mon, 20 Nov 2006) | 5 lines


Reworded some sentences.
Fixed formatting.
Fixed a couple of misspelled constants.

------------------------------------------------------------------------
r2390 | hserus | 2006-11-20 12:28:17 -0800 (Mon, 20 Nov 2006) | 2 lines

Perform proper detection of cname loops

------------------------------------------------------------------------
r2389 | hserus | 2006-11-20 11:35:01 -0800 (Mon, 20 Nov 2006) | 5 lines

disable SIG_ACCEPT_WINDOW by default
Add a new member to the delegation_info structure to keep track of partial answers (cnames) received
Add a new member qc_original_name to val_query_chain to keep track of the original query. The qc_name_n
member changes when cnames are followed

------------------------------------------------------------------------
r2388 | hserus | 2006-11-20 11:34:44 -0800 (Mon, 20 Nov 2006) | 2 lines

Add definition for find_nslist_for_query()

------------------------------------------------------------------------
r2387 | hserus | 2006-11-20 11:34:28 -0800 (Mon, 20 Nov 2006) | 6 lines

Move register_query() and deregister_query() functions from val_resquery.c to val_support.c
Move logic of identifying target nameservers for a query into a new function find_nslist_for_query()
Add a new member to the delegation_info structure to keep track of partial answers (cnames) received
Rename do_referral() to follow_referral_or_alias_link()
Add logic for fetching cname alias records

------------------------------------------------------------------------
r2386 | hserus | 2006-11-20 11:34:00 -0800 (Mon, 20 Nov 2006) | 4 lines

Move register_query() and deregister_query() functions from val_resquery.c to val_support.c
Add function for merging rrsets from one list to another. This is essentially the same as stow_info() but
without the locking portion

------------------------------------------------------------------------
r2385 | hserus | 2006-11-20 11:33:38 -0800 (Mon, 20 Nov 2006) | 3 lines

Identify the "top" query from the original query name; not the name that we came up with after following
alias chains

------------------------------------------------------------------------
r2384 | hserus | 2006-11-20 11:33:19 -0800 (Mon, 20 Nov 2006) | 7 lines

Rename qc_name_n to qname_n in places where it does not specifically relate to the query_chain structure
Rename qc_type_h to qtype_h in places where it does not specifically relate to the query_chain structure
Identify the "top" query from the original query name; not the name that we came up with after following
alias chains
Move logic of identifying target nameservers for a query into a new function find_nslist_for_query()
    Add logic for loop-detection of cname chains

------------------------------------------------------------------------
r2383 | hserus | 2006-11-20 11:32:49 -0800 (Mon, 20 Nov 2006) | 5 lines

Maintain a separate cache for (zonename, server) mapping to account for the case where our default name
server is authoritative for a non-public zone (such as example.com). Look up this cache before we look for
other NS records.
Rename get_matching_nslist to get_nslist_from_cache

------------------------------------------------------------------------
r2382 | tewok | 2006-11-20 08:41:50 -0800 (Mon, 20 Nov 2006) | 3 lines


Formatting changes.

------------------------------------------------------------------------
r2381 | tewok | 2006-11-20 05:50:56 -0800 (Mon, 20 Nov 2006) | 3 lines


Added a missing word.

------------------------------------------------------------------------
r2380 | tewok | 2006-11-20 05:45:26 -0800 (Mon, 20 Nov 2006) | 4 lines


Formatting changes.
Rewording a couple sentences.

------------------------------------------------------------------------
r2342 | tewok | 2006-11-17 09:33:12 -0800 (Fri, 17 Nov 2006) | 3 lines


Changed a duplicated "resolv.conf" into the intended "root.hints".

------------------------------------------------------------------------
r2337 | hserus | 2006-11-17 07:34:30 -0800 (Fri, 17 Nov 2006) | 3 lines

Rename VAL_AC_TRUST_ZONE to VAL_AC_IGNORE_VALIDATION
Add a new final result status for VAL_IGNORE_VALIDATION

------------------------------------------------------------------------
r2336 | hserus | 2006-11-17 07:33:55 -0800 (Fri, 17 Nov 2006) | 2 lines

Fix bug in CHECK_MASKED_STATUS macro

------------------------------------------------------------------------
r2335 | hserus | 2006-11-17 07:33:39 -0800 (Fri, 17 Nov 2006) | 2 lines

Modified to recognize VAL_IGNORE_VALIDATION as another trust state.

------------------------------------------------------------------------
r2334 | hserus | 2006-11-17 07:33:23 -0800 (Fri, 17 Nov 2006) | 10 lines

Rename VAL_AC_TRUST_ZONE to VAL_AC_IGNORE_VALIDATION
Add a new final result status for VAL_IGNORE_VALIDATION
Don't perform validation and some proof-related sanity checks if the VAL_IGNORE_VALIDATION status is set
Recognize VAL_IGNORE_VALIDATION as a trusted state
In transform_single_result allow an empty result to also be created
Replace top_q argument in prove_nonexistence() with selected members from within it.
Add basic logic for cname sanity checking. We still need to implement logic for fetching aliases when these are not automatically returned and for detecting
loops.


------------------------------------------------------------------------
r2333 | hserus | 2006-11-17 07:17:53 -0800 (Fri, 17 Nov 2006) | 2 lines

Multiple bogus elements in the chain-of-trust reduces the final status to BOGUS_UNPROVABLE.

------------------------------------------------------------------------
r2329 | tewok | 2006-11-17 04:28:50 -0800 (Fri, 17 Nov 2006) | 3 lines


Fixed a typo.

------------------------------------------------------------------------
r2328 | hserus | 2006-11-16 16:01:15 -0800 (Thu, 16 Nov 2006) | 2 lines

Set h_errno to appropriate value for val_res_query()

------------------------------------------------------------------------
r2327 | tewok | 2006-11-16 12:26:38 -0800 (Thu, 16 Nov 2006) | 4 lines


Updated to match the other docs.
Added a missing =back.

------------------------------------------------------------------------
r2324 | hserus | 2006-11-15 14:11:26 -0800 (Wed, 15 Nov 2006) | 2 lines

Turns out that VAL_GET* need to be exported. Partially revert earlier change.

------------------------------------------------------------------------
r2323 | hserus | 2006-11-15 14:07:13 -0800 (Wed, 15 Nov 2006) | 2 lines

Move some of the libval-specific macros to val_support.h

------------------------------------------------------------------------
r2322 | hserus | 2006-11-15 14:02:46 -0800 (Wed, 15 Nov 2006) | 2 lines

Revert an earlier change. Move macros from ns_parse.h to res_support.h

------------------------------------------------------------------------
r2321 | hserus | 2006-11-15 13:46:07 -0800 (Wed, 15 Nov 2006) | 2 lines

Add prototypes for free_validator_cache() and wire_name_length()

------------------------------------------------------------------------
r2320 | hserus | 2006-11-15 13:45:19 -0800 (Wed, 15 Nov 2006) | 3 lines

Moved policy-specific definitions to val_policy.h. In order to do this we also need to remove dependency on 
MAX_POLICY_TOKEN

------------------------------------------------------------------------
r2319 | hserus | 2006-11-15 12:53:22 -0800 (Wed, 15 Nov 2006) | 2 lines

Remove un-used files

------------------------------------------------------------------------
r2318 | hserus | 2006-11-15 12:52:21 -0800 (Wed, 15 Nov 2006) | 2 lines

Move relevant documentation of val_getaddrinfo from val_getaddrinfo.h to val_getaddrinfo.c

------------------------------------------------------------------------
r2317 | hserus | 2006-11-15 12:38:51 -0800 (Wed, 15 Nov 2006) | 2 lines

Prototypes in val_x_query.c are declared in validator.h 

------------------------------------------------------------------------
r2316 | hserus | 2006-11-15 12:37:23 -0800 (Wed, 15 Nov 2006) | 2 lines

Add the compose_answer() prototype since this function is exported as well.

------------------------------------------------------------------------
r2315 | hserus | 2006-11-15 12:13:34 -0800 (Wed, 15 Nov 2006) | 2 lines

validator.h subsumes the role of val_debug.h

------------------------------------------------------------------------
r2314 | hserus | 2006-11-15 10:07:24 -0800 (Wed, 15 Nov 2006) | 2 lines

Remove include for res_debug.h; resolver.h subsumes the role of res_debug.h 

------------------------------------------------------------------------
r2313 | hserus | 2006-11-15 09:58:08 -0800 (Wed, 15 Nov 2006) | 2 lines

Get rid of compilation warnings.

------------------------------------------------------------------------
r2312 | hserus | 2006-11-15 09:44:56 -0800 (Wed, 15 Nov 2006) | 3 lines

Move definitions for RES_GET16 and RES_GET32 from resolver.h to ns_parse.h since these are local to libsres
Add protottypes for p_class() and p_type() to resolver.h to indicate that these functions are exported. 

------------------------------------------------------------------------
r2311 | hserus | 2006-11-15 09:27:14 -0800 (Wed, 15 Nov 2006) | 2 lines

Moved definitions from res_debug.h to resolver.h. This is to remove unnecessary dependencies on libsres.

------------------------------------------------------------------------
r2310 | hserus | 2006-11-15 09:04:26 -0800 (Wed, 15 Nov 2006) | 2 lines

Remove dependency on libsres for the CREATE_NSADDR_ARRAY macro

------------------------------------------------------------------------
r2308 | hserus | 2006-11-15 06:34:28 -0800 (Wed, 15 Nov 2006) | 2 lines

Insert missing white space

------------------------------------------------------------------------
r2302 | hserus | 2006-11-14 09:05:34 -0800 (Tue, 14 Nov 2006) | 2 lines

Keep validator documentation up-to-date

------------------------------------------------------------------------
r2283 | hserus | 2006-11-09 09:37:37 -0800 (Thu, 09 Nov 2006) | 3 lines

Add description for ns_name_ntop and ns_name_pton, since val_resolve_and_check uses DNS wire format for the
domain name.

------------------------------------------------------------------------
r2281 | hserus | 2006-11-08 12:37:52 -0800 (Wed, 08 Nov 2006) | 3 lines

Don't set EDNS0 when query is sent with VAL_FLAGS_DONT_VALIDATE
Continue to fetch glue for each of the NS records returned if answers are not returned for the ones earlier

------------------------------------------------------------------------
r2280 | hserus | 2006-11-08 12:36:03 -0800 (Wed, 08 Nov 2006) | 3 lines

Add a new flags field to the query structure; only value recognized is VAL_FLAGS_DONT_VALIDATE, which causes EDNS0 to be turned off 
in queries.

------------------------------------------------------------------------
r2279 | hserus | 2006-11-08 12:33:58 -0800 (Wed, 08 Nov 2006) | 2 lines

Fix parameter mismatch in _sigverify() routines

------------------------------------------------------------------------
r2278 | hserus | 2006-11-08 11:57:14 -0800 (Wed, 08 Nov 2006) | 2 lines

Check for proper condition in provable insecure detection logic

------------------------------------------------------------------------
r2273 | hserus | 2006-11-08 09:04:06 -0800 (Wed, 08 Nov 2006) | 2 lines

Expand ALGO to ALGORITHM

------------------------------------------------------------------------
r2272 | hserus | 2006-11-08 09:03:01 -0800 (Wed, 08 Nov 2006) | 2 lines

Removed SR_SUSPICIOUS_BIT since this is never used

------------------------------------------------------------------------
r2271 | hserus | 2006-11-08 09:02:42 -0800 (Wed, 08 Nov 2006) | 8 lines

Removed VAL_A_TOO_MANY_LINKS
Removed VAL_A_FLOOD_ATTACK_DETECTED
Removed VAL_A_NO_PREFERRED_SEP
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Renamed VAL_A_* to VAL_AC_*
Expand ALGO to ALGORITHM
Expand PROTO to PROTOCOL

------------------------------------------------------------------------
r2270 | hserus | 2006-11-08 09:02:31 -0800 (Wed, 08 Nov 2006) | 2 lines

Renamed VAL_A_* to VAL_AC_*

------------------------------------------------------------------------
r2269 | hserus | 2006-11-08 09:02:13 -0800 (Wed, 08 Nov 2006) | 2 lines

Some word-smithing

------------------------------------------------------------------------
r2268 | hserus | 2006-11-08 09:02:00 -0800 (Wed, 08 Nov 2006) | 3 lines

Renamed VAL_A_* to VAL_AC_*
Expand ALGO to ALGORITHM

------------------------------------------------------------------------
r2267 | hserus | 2006-11-08 09:00:44 -0800 (Wed, 08 Nov 2006) | 6 lines

Expand ALGO to ALGORITHM
Rename p_val_error to p_val_status
Rename p_val_error to p_val_status
Rename p_query_error to p_query_status
Also maintain older definitions for backwards compatibility

------------------------------------------------------------------------
r2266 | hserus | 2006-11-08 09:00:29 -0800 (Wed, 08 Nov 2006) | 2 lines

Rename p_val_error to p_val_status

------------------------------------------------------------------------
r2265 | hserus | 2006-11-08 09:00:16 -0800 (Wed, 08 Nov 2006) | 11 lines

Rename p_val_error to p_val_status
Rename p_val_error to p_val_status
Rename p_query_error to p_query_status
Removed SR_SUSPICIOUS_BIT since this is never used
Removed VAL_A_TOO_MANY_LINKS
Removed VAL_A_FLOOD_ATTACK_DETECTED
Removed VAL_A_NO_PREFERRED_SEP
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Renamed VAL_A_* to VAL_AC_*
Expand ALGO to ALGORITHM

------------------------------------------------------------------------
r2264 | hserus | 2006-11-08 08:59:48 -0800 (Wed, 08 Nov 2006) | 4 lines

Rename p_val_error to p_val_status
Rename p_val_error to p_val_status
Rename p_query_error to p_query_status

------------------------------------------------------------------------
r2263 | hserus | 2006-11-08 08:59:35 -0800 (Wed, 08 Nov 2006) | 2 lines

Renamed VAL_A_* to VAL_AC_*

------------------------------------------------------------------------
r2262 | hserus | 2006-11-08 08:59:21 -0800 (Wed, 08 Nov 2006) | 5 lines

Expand ALGO to ALGORITHM
Expand PROTO to PROTOCOL
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Renamed VAL_A_* to VAL_AC_*

------------------------------------------------------------------------
r2261 | hserus | 2006-11-08 08:58:54 -0800 (Wed, 08 Nov 2006) | 14 lines

Wording changes, updated error codes to reflect only those used by the library
Rename p_val_error to p_val_status
Rename p_val_error to p_val_status
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Removed VAL_A_CLOCK_SKEW
Removed VAL_A_DUPLICATE_KEYTAG
Removed VAL_A_NO_PREFERRED_SEP
Removed VAL_A_WRONG_RRSIG_OWNER
Removed VAL_A_KEYTAG_MISMATCH
Removed VAL_A_TOO_MANY_LINKS
Expand ALGO to ALGORITHM
Expand PROTO to PROTOCOL
Renamed VAL_A_* to VAL_AC_*

------------------------------------------------------------------------
r2260 | hserus | 2006-11-08 08:58:28 -0800 (Wed, 08 Nov 2006) | 14 lines

Rename p_val_error to p_val_status
Rename p_val_error to p_val_status
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Removed VAL_A_CLOCK_SKEW
Removed VAL_A_DUPLICATE_KEYTAG
Removed VAL_A_NO_PREFERRED_SEP
Removed VAL_A_WRONG_RRSIG_OWNER
Removed VAL_A_KEYTAG_MISMATCH
Removed VAL_A_TOO_MANY_LINKS
Removed VAL_AC_DNSSEC_VERSION_ERROR
Expand ALGO to ALGORITHM
Expand PROTO to PROTOCOL
Renamed VAL_A_* to VAL_AC_*

------------------------------------------------------------------------
r2259 | hserus | 2006-11-08 08:57:47 -0800 (Wed, 08 Nov 2006) | 2 lines

Rename p_val_error to p_val_status

------------------------------------------------------------------------
r2258 | hserus | 2006-11-08 08:56:31 -0800 (Wed, 08 Nov 2006) | 6 lines

Removed VAL_A_CLOCK_SKEW
Renamed VAL_A_SECURITY_LAME to VAL_AC_BAD_DELEGATION
Renamed VAL_A_* to VAL_AC_*
Removed VAL_A_KEYTAG_MISMATCH
Expanded ALGO to ALGORITHM

------------------------------------------------------------------------
r2257 | hserus | 2006-11-08 08:56:12 -0800 (Wed, 08 Nov 2006) | 3 lines

Rename p_as_error to p_ac_status
Rename p_val_error to p_val_status

------------------------------------------------------------------------
r2231 | hserus | 2006-11-01 19:54:15 -0800 (Wed, 01 Nov 2006) | 2 lines

Don't print contents for free'd response structures

------------------------------------------------------------------------
r2220 | rstory | 2006-10-27 13:37:18 -0700 (Fri, 27 Oct 2006) | 1 line

do not try to parse 0 length msg or NULL ptr
------------------------------------------------------------------------
r2218 | hserus | 2006-10-26 14:42:13 -0700 (Thu, 26 Oct 2006) | 3 lines

Initialize ref_ns_list to NULL so that random value is not picked up when we see some referral error
Don't follow referrals when CNAMEs are present. This case will be dealt with later

------------------------------------------------------------------------
r2217 | hserus | 2006-10-26 14:40:46 -0700 (Thu, 26 Oct 2006) | 2 lines

Don't fix the returned name server list if ns_number_of_addresses is 0

------------------------------------------------------------------------
r2213 | hserus | 2006-10-24 16:12:12 -0700 (Tue, 24 Oct 2006) | 3 lines

Try to determine if a DNSKEY or RRSIG is missing instead of blindly storing query status value into the
assertion.

------------------------------------------------------------------------
r2212 | rstory | 2006-10-24 14:31:12 -0700 (Tue, 24 Oct 2006) | 2 lines

print responses for test cases if -p specified

------------------------------------------------------------------------
r2211 | rstory | 2006-10-24 14:29:58 -0700 (Tue, 24 Oct 2006) | 5 lines

- remove special case prototypes for solaris. use -D_REENTRANT and system
  headers instead
- add additional paramter to ctime_r on solaris
- indent output from val_log_assertion to help show nesting

------------------------------------------------------------------------
r2210 | rstory | 2006-10-24 14:27:33 -0700 (Tue, 24 Oct 2006) | 4 lines

- remove special case prototypes for *_r functions on solaris.
  compile with -D_REENTRANT to get these prototypes from system headers.
- fix calls to ctime_r for solaris, which has an extra parameter

------------------------------------------------------------------------
r2209 | rstory | 2006-10-24 14:25:50 -0700 (Tue, 24 Oct 2006) | 1 line

expose compose_answer prototype
------------------------------------------------------------------------
r2208 | rstory | 2006-10-24 14:24:59 -0700 (Tue, 24 Oct 2006) | 2 lines

- exclude more cases where the res_sym hack doesn't work

------------------------------------------------------------------------
r2207 | rstory | 2006-10-23 14:43:57 -0700 (Mon, 23 Oct 2006) | 2 lines

- make ctx param const for val_log_rrset(), val_log_rrsig_rdata()

------------------------------------------------------------------------
r2206 | rstory | 2006-10-23 14:43:37 -0700 (Mon, 23 Oct 2006) | 4 lines

- new val_log_val_rrset()
- new val_log_assertion_pfx()
- make ctx param const for val_log_rrset(), val_log_rrsig_rdata()

------------------------------------------------------------------------
r2205 | rstory | 2006-10-23 14:40:40 -0700 (Mon, 23 Oct 2006) | 1 line

fix final result tallies
------------------------------------------------------------------------
r2199 | hserus | 2006-10-23 12:49:52 -0700 (Mon, 23 Oct 2006) | 2 lines

Bug fix: Make sure that ns_address in struct name_server is initialized to NULL

------------------------------------------------------------------------
r2198 | hserus | 2006-10-23 08:23:19 -0700 (Mon, 23 Oct 2006) | 6 lines

Add a new function find_trust_point() to find out which trust anchor applies to a given name
Maintain separation between key status and return value in is_trusted_key()
Break out early from the is check_provably_unsecure() logic if we see something amiss
Dont use val_isauthentic()
val_istrusted() encompasses val_isauthentication() behavior

------------------------------------------------------------------------
r2197 | hserus | 2006-10-23 08:22:57 -0700 (Mon, 23 Oct 2006) | 2 lines

Add VAL_A_INVALID_RRSIG error code

------------------------------------------------------------------------
r2196 | hserus | 2006-10-23 08:22:43 -0700 (Mon, 23 Oct 2006) | 2 lines

Use ns_address in struct name_server as sockaddr_storage**

------------------------------------------------------------------------
r2195 | hserus | 2006-10-23 08:22:22 -0700 (Mon, 23 Oct 2006) | 2 lines

Use VAL_ERROR instead of VAL_INDETERMINATE to indicate that some answer was not received.

------------------------------------------------------------------------
r2194 | hserus | 2006-10-23 08:22:10 -0700 (Mon, 23 Oct 2006) | 3 lines

return void for rsasha1_sigverify() and friends but make sure that the sig_status and dnksey_status
values indicate the correct error.

------------------------------------------------------------------------
r2193 | hserus | 2006-10-23 08:21:49 -0700 (Mon, 23 Oct 2006) | 4 lines

return void for val_sigverify() but make sure that the sig_status and dnksey_status values indicate the
correct error.
modify SET_STATUS so that it really matches what the API requires

------------------------------------------------------------------------
r2192 | hserus | 2006-10-23 08:21:28 -0700 (Mon, 23 Oct 2006) | 4 lines

Dont use val_isauthentic()
val_istrusted() encompasses val_isauthentication() behavior


------------------------------------------------------------------------
r2191 | hserus | 2006-10-23 08:20:59 -0700 (Mon, 23 Oct 2006) | 5 lines

Updates for the next revision of the API draft
- add val_istrusted()
- clarify that some "validated" error codes can be returned even if we didn't complete validation but we figured that the answer was trusted


------------------------------------------------------------------------
r2190 | hserus | 2006-10-23 08:20:19 -0700 (Mon, 23 Oct 2006) | 2 lines

Define ns_address as a sockaddr_storage** and use accordingly

------------------------------------------------------------------------
r2188 | hserus | 2006-10-21 18:49:36 -0700 (Sat, 21 Oct 2006) | 2 lines

Version submitted as -02

------------------------------------------------------------------------
r2180 | hserus | 2006-10-20 09:43:32 -0700 (Fri, 20 Oct 2006) | 5 lines

Rename VAL_A_DONT_KNOW to VAL_A_UNSET
Rename VAL_A_NOT_A_ZONE_KEY to VAL_A_INVALID_KEY
Define VAL_A_SIGNING_KEY to indicate that the key was used to verify a signature
Define VAL_A_UNKNOWN_ALGO_LINK to indicate that the key matched a DS but the algo was unknown

------------------------------------------------------------------------
r2179 | hserus | 2006-10-20 09:41:32 -0700 (Fri, 20 Oct 2006) | 2 lines

Using VAL_A_UNSET in place of VAL_A_DONT_KNOW

------------------------------------------------------------------------
r2178 | hserus | 2006-10-20 09:41:06 -0700 (Fri, 20 Oct 2006) | 3 lines

Since the assertion status on failure (even when all rrsigs fail for the same reason) is
VAL_A_NOT_VERIFIED, use correct logic for identifying provably unsecure. 

------------------------------------------------------------------------
r2177 | hserus | 2006-10-20 09:37:08 -0700 (Fri, 20 Oct 2006) | 2 lines

Make clear separation between return values and assertion status values

------------------------------------------------------------------------
r2176 | hserus | 2006-10-20 09:36:39 -0700 (Fri, 20 Oct 2006) | 6 lines

val_log_assertion() takes a struct val_authentication_chain instead of the individual members of this
structure.
Using VAL_A_INVALID_KEY in place of VAL_A_NOT_A_ZONE_KEY
Using VAL_A_UNSET in place of VAL_A_DONT_KNOW
Display new status values VAL_A_UNKNOWN_ALGO_LINK and VAL_A_SIGNING_KEY

------------------------------------------------------------------------
r2175 | hserus | 2006-10-20 09:34:21 -0700 (Fri, 20 Oct 2006) | 2 lines

Make clear separation between return values and assertion status values

------------------------------------------------------------------------
r2174 | hserus | 2006-10-20 09:32:38 -0700 (Fri, 20 Oct 2006) | 8 lines

Ensure that error conditions in the DNSKEY are properly reflected in the assertion status
using VAL_A_UNSET in place of VAL_A_DONT_KNOW
using VAL_A_INVALID_KEY in place of VAL_A_NOT_A_ZONE_KEY
Make clear separation between return values and assertion status values
Set the assertion status to VAL_A_NOT_VERIFIED even when all rrsigs fail for the same reason; we must look
at the rrsig status for the actual reason of failure
Use the VAL_A_UNKNOWN_ALGO_LINK status to indicate a potential provably unsecure condition.

------------------------------------------------------------------------
r2173 | hserus | 2006-10-20 09:26:20 -0700 (Fri, 20 Oct 2006) | 5 lines

More edits: 
    - separated status values for DNSKEY and RRSIGS
    - new error code for VAL_A_UNKOWN_ALGO_LINK
    - renamed VAL_A_NOT_A_ZONE_KEY to VAL_A_INVALID_KEY

------------------------------------------------------------------------
r2172 | hserus | 2006-10-19 22:14:14 -0700 (Thu, 19 Oct 2006) | 2 lines

Use sockaddr_storage where appropriate

------------------------------------------------------------------------
r2171 | hserus | 2006-10-19 22:14:00 -0700 (Thu, 19 Oct 2006) | 3 lines

Added respondent server information to init_rr_set prototype


------------------------------------------------------------------------
r2170 | hserus | 2006-10-19 22:13:46 -0700 (Thu, 19 Oct 2006) | 3 lines

Save respondent server information in rrset and copy this value in cloned rrsets


------------------------------------------------------------------------
r2169 | hserus | 2006-10-19 22:13:27 -0700 (Thu, 19 Oct 2006) | 3 lines

Make changes to allow respondent server information to be reflected in the final authentication chain


------------------------------------------------------------------------
r2168 | hserus | 2006-10-19 22:13:11 -0700 (Thu, 19 Oct 2006) | 2 lines

set correct value for number of addresses read for a name server

------------------------------------------------------------------------
r2167 | hserus | 2006-10-19 22:12:53 -0700 (Thu, 19 Oct 2006) | 3 lines

Added field for respondent server in val_rrset
Changed MAX_PROOF value to 4

------------------------------------------------------------------------
r2166 | hserus | 2006-10-19 22:12:39 -0700 (Thu, 19 Oct 2006) | 3 lines

Use sockaddr_storage where appropriate
Allow proper logging of respondent server information

------------------------------------------------------------------------
r2165 | hserus | 2006-10-19 22:12:17 -0700 (Thu, 19 Oct 2006) | 4 lines

perform a proper clone of the name server addresses when we have multiple A records associated with a name
Perform clone of respondent nameserver inside res_io_accept instead of within response_recv


------------------------------------------------------------------------
r2164 | hserus | 2006-10-19 22:11:55 -0700 (Thu, 19 Oct 2006) | 5 lines

Perform clone of respondent nameserver inside res_io_accept instead of within response_recv
Ensure that the correct name server is returned as the respondent nameserver when we have multiple A 
records associated with a name
Typecast sockaddr_storage* to sockaddr* where appropriate

------------------------------------------------------------------------
r2163 | hserus | 2006-10-19 22:11:32 -0700 (Thu, 19 Oct 2006) | 2 lines

Use sockaddr_storage in place of sockaddr

------------------------------------------------------------------------
r2162 | hserus | 2006-10-19 22:11:07 -0700 (Thu, 19 Oct 2006) | 3 lines

Added definition for default policy and MAX_PROOFS
Also added details on respondent server

------------------------------------------------------------------------
r2159 | hserus | 2006-10-18 14:54:32 -0700 (Wed, 18 Oct 2006) | 2 lines

Edits for -02 version

------------------------------------------------------------------------
r2158 | hserus | 2006-10-18 08:41:43 -0700 (Wed, 18 Oct 2006) | 2 lines

Make list of error codes compliant with validator API

------------------------------------------------------------------------
r2157 | hserus | 2006-10-18 08:40:42 -0700 (Wed, 18 Oct 2006) | 2 lines

No longer using the VAL_GENERIC_ERROR error code.

------------------------------------------------------------------------
r2156 | hserus | 2006-10-18 08:40:08 -0700 (Wed, 18 Oct 2006) | 5 lines

Some minor twiddles in check_wildcard_sanity() so that existing loop is made use of.
val_ac_status will never be VAL_A_VERIFIED_LINK (this value is only present in rr_status), so dont check for this condition
Use VAL_R_IRRELEVANT_PROOF in place VAL_R_BOGUS to represent extraneous proofs
No longer using the VAL_GENERIC_ERROR error code

------------------------------------------------------------------------
r2155 | hserus | 2006-10-18 08:36:25 -0700 (Wed, 18 Oct 2006) | 4 lines

Changed SIG_ACCEPT_WINDOW to 1 day
Renamed free_val_addrinfo to val_freeaddrinfo
Also for backwards compatibility create a define for free_val_addrinfo linking it to the new definition 

------------------------------------------------------------------------
r2154 | hserus | 2006-10-18 08:34:24 -0700 (Wed, 18 Oct 2006) | 2 lines

Remove unnecessary and duplicate cases. 

------------------------------------------------------------------------
r2153 | hserus | 2006-10-18 08:32:13 -0700 (Wed, 18 Oct 2006) | 2 lines

Removed unnecessary TODO markers

------------------------------------------------------------------------
r2152 | hserus | 2006-10-18 08:31:18 -0700 (Wed, 18 Oct 2006) | 2 lines

Use val_freeaddrinfo() in place of free_val_addrinfo()

------------------------------------------------------------------------
r2151 | hserus | 2006-10-18 08:25:34 -0700 (Wed, 18 Oct 2006) | 2 lines

Account for SERVFAILS with NSEC3 records in the authoritative section.

------------------------------------------------------------------------
r2150 | hserus | 2006-10-18 08:24:34 -0700 (Wed, 18 Oct 2006) | 2 lines

Define return codes for only those definitions present in the validator API draft.

------------------------------------------------------------------------
r2148 | hserus | 2006-10-17 06:18:41 -0700 (Tue, 17 Oct 2006) | 2 lines

Display a message when signature inception times are in the future or signatures have expired, if they are within the SIG_ACCEPT_WINDOW range.

------------------------------------------------------------------------
r2144 | hserus | 2006-10-16 11:53:58 -0700 (Mon, 16 Oct 2006) | 3 lines

Temporary hack to allow RRSIGs to be validated within a window before inception and after expiration to account for clock skew and sig expirations. 
This window is currently defined to be 7 days. Since this has obvious security ramifications, the choice of this value and the approach to handle the general topic of handling expired sigs are topics worthy of further discussion.

------------------------------------------------------------------------
r2143 | hserus | 2006-10-16 11:21:13 -0700 (Mon, 16 Oct 2006) | 2 lines

in val_log_authentication_chain make a clear demarcation between results, answers and proofs

------------------------------------------------------------------------
r2142 | hserus | 2006-10-16 11:19:03 -0700 (Mon, 16 Oct 2006) | 3 lines

Check for single result status for proof of non-existence


------------------------------------------------------------------------
r2141 | hserus | 2006-10-16 10:31:20 -0700 (Mon, 16 Oct 2006) | 4 lines

Moved the definition of check_conflicting_answers() before assimilate_answers()
In prove_nsec_span_chk() set the result status tentatively to VAL_NONEXISTENT_NAME when a span is identified. This may change
if wildcard checks prove us wrong. 

------------------------------------------------------------------------
r2140 | hserus | 2006-10-16 09:39:30 -0700 (Mon, 16 Oct 2006) | 2 lines

Perform proper cleanup of dnskey rdata structure

------------------------------------------------------------------------
r2139 | rstory | 2006-10-16 08:24:38 -0700 (Mon, 16 Oct 2006) | 1 line

add header for ctime_r
------------------------------------------------------------------------
r2138 | hserus | 2006-10-16 06:57:00 -0700 (Mon, 16 Oct 2006) | 25 lines

Move openssl-related code to val_crypto.c

Use new val_rc_answer and val_ac_trust members in val_free_result_chain in place of the older val_ac_rrset
Use new qc_ans and qc_proof members in val_query_chain in place of older qc_as
Use struct _val_authentication_chain in place of older struct val_digested_auth_chain
Use struct _val_result_chain in place of older struct val_internal_result

- In fails_to_answer_query(), look at rrsig in addition to answer information while checking if data_present
- Dont check the availability of an rrsig for a DNSKEY that is trusted.
- In assimilate_answers(), create authentication chain structures for the answers as well as proofs
- Separate out the portions in assimilate_answers() that deal with checking if answers are mutually consistent into a new function called check_conflicting_answers(). Since proofs are stored separately from other answers, we don't need to specifically check if SOA,NXT etc conflict with answers.
- If we received an answer for a glue fetch operation, don't claim that validation is possible.
- Link the chain of trust to either the qc_proof or qc_ans member for a pending query depending on if this answer was a proof of non-existence or no.
- Separate nsec and nsec3 processing into two different functions, nsec_proof_chk() and nsec3_proof_chk(), for readability reasons.
- Rename the older nsec_proof_check() function to prove_nsec_span_chk()

Revamp the process for creation of the val_result_chain structure. 
    - transform_single_result() changes a single val_internal_result_chain structure to val_result_chain. You can specifically give a "proof_result" structure to function as the container for proofs if the val_internal_result_chain structure is of the proof variety. 
    - val_internal_result_chain has the val_rc_is_proof member that says if it is a proof or no. 
    - As we process proofs of non-existence keep transforming them into the result structure. That way, we keep answers and any associated proofs in the same val_result_chain structure.
    - Perform sanity checks for wildcards before returning from val_resolve_and_check(). sanity checks for cnames and dnames will also be made in the future.
    - Add a new function prove_existence() that checks if the given type exists in the NSEC[3] for a given name
    - In sanity checks for non-existence proofs, check if the CNAME or DNAME bit is set for NSEC[3] record that proves a non-existent type.
    - Use transform_outstanding_results() to process all results that have not been stored in some val_result_chain structure after sanity checks have been performed.

------------------------------------------------------------------------
r2137 | hserus | 2006-10-16 06:54:16 -0700 (Mon, 16 Oct 2006) | 8 lines

Renamed qc_as in struct val_query_chain to qc_ans
Perform proper cleanup of learned_zones, learned_keys, learned_ds and the rrset in digest_response()
Add logic for identifying if the answer section contains a valid cname
Recognize the case where a proof of non-existence is returned with a positive answer
Modify digest_response() such that if we got a response for a zone where DNSSEC is enabled, but we had sent out our query without EDNS0, we perform a re-query.
In val_resquery_rcv() store answers and proofs in separate members of struct domain_info
In find_next_zonecut() look at the proofs in addition to the answers to see if we found the SOA record; also look at the rrsig (if we have one) to identify the zonecut information.

------------------------------------------------------------------------
r2136 | hserus | 2006-10-16 06:53:42 -0700 (Mon, 16 Oct 2006) | 3 lines

Move VAL_A_RRSIG_VERIFIED close to all the "success" conditions
Add a new VAL_A_WCARD_VERIFIED state for assertions that were wildcard expanded.

------------------------------------------------------------------------
r2135 | hserus | 2006-10-16 06:53:23 -0700 (Mon, 16 Oct 2006) | 3 lines

Free the new di_answers and di_proofs members within the domain_info structure
Ensure correct initial state of rr_rec structures created by copy_rr_rec(), add_to_set() and add_to_sig()

------------------------------------------------------------------------
r2134 | hserus | 2006-10-16 06:53:01 -0700 (Mon, 16 Oct 2006) | 3 lines

Use the new name for struct _val_authentication_chain (struct val_digested_auth_chain)
Add prototype for is_trusted_zone()

------------------------------------------------------------------------
r2133 | hserus | 2006-10-16 06:52:30 -0700 (Mon, 16 Oct 2006) | 10 lines

Use VAL_FLAGS_DONT_VALIDATE in place of F_DONT_VALIDATE
Re-define the value of VAL_QUERY_MERGE_RRSETS since this was clashing with VAL_FLAGS_DONT_VALIDATE
Renamed struct _val_authentication_chain to struct val_digested_auth_chain
Renamed struct _val_result_chain to struct val_internal_result
The DNS response domain_info structure now has separate members for the answers and the proofs (di_answers, di_proofs) instead of a single di_rrset member

*** Note API change ****
Change the val_result_chain structure - Instead of the val_rc_trust member we now have separate members for the answers and the proofs (val_rc_answer,val_rc_proofs). Also keep track of the number of proofs using the val_rc_proof_count member. 


------------------------------------------------------------------------
r2132 | hserus | 2006-10-16 06:51:19 -0700 (Mon, 16 Oct 2006) | 2 lines

Use new name val_rc_answer instead of older val_rc_trust member in val_result_chain structure

------------------------------------------------------------------------
r2131 | hserus | 2006-10-16 06:51:04 -0700 (Mon, 16 Oct 2006) | 5 lines

Move openssl-related operations to val_crypto.c
Use new name val_rc_answer instead of older val_rc_trust member in val_result_chain structure 
Proofs are stored in (struct val_result_chain)->val_rc_proofs, use this in order to display proof information for the
authentication chain.

------------------------------------------------------------------------
r2130 | hserus | 2006-10-16 06:50:28 -0700 (Mon, 16 Oct 2006) | 2 lines

Move openssl-related operations to val_crypto.c

------------------------------------------------------------------------
r2129 | hserus | 2006-10-16 06:50:08 -0700 (Mon, 16 Oct 2006) | 2 lines

Use the new name struct val_digested_auth_chain for older struct _val_authentication_chain 

------------------------------------------------------------------------
r2128 | hserus | 2006-10-16 06:49:12 -0700 (Mon, 16 Oct 2006) | 3 lines

Use new name val_rc_trust instead of older val_rc_answer member in val_result_chain structure 
Check for NULL result returned from get_hostent_from_response

------------------------------------------------------------------------
r2127 | hserus | 2006-10-16 06:48:54 -0700 (Mon, 16 Oct 2006) | 5 lines

Move openssl-related operations to val_crypto.c
Handle the case where the DNSKEY and DS records have been wildcard-expanded (these are prohibited)
Use the new name for _val_authentication_chain (val_digested_auth_chain)
Set the status for assertions that have been wildcard expanded as VAL_A_WCARD_VERIFIED. The proof of existence of the expanded type is verified later on.

------------------------------------------------------------------------
r2126 | hserus | 2006-10-16 06:47:39 -0700 (Mon, 16 Oct 2006) | 2 lines

Add a note on cache processing w.r.t CNAMEs

------------------------------------------------------------------------
r2125 | hserus | 2006-10-16 06:47:11 -0700 (Mon, 16 Oct 2006) | 4 lines

Remove the crypto directory
Add a new file called val_crypto.[ch] that contains all openssl-related operations.


------------------------------------------------------------------------
r2124 | hserus | 2006-10-16 06:44:53 -0700 (Mon, 16 Oct 2006) | 4 lines

- Remove unused parameter in find_rrset_len
- Combine compose_merged_answer() and compose_answer() into a single function.


------------------------------------------------------------------------
r2123 | hserus | 2006-10-16 06:44:05 -0700 (Mon, 16 Oct 2006) | 7 lines

- Use the VAL_QUERY_MERGE_RRSETS flag in val_resolve_and_check so that multiple responses are returned in a manner
similar to res_query
- When operatating in daemon mode use a validator context so that cache and policy are properly made use of
- Since a common status value is stored for multiple proofs of non-existence, we only check test case result against this
single value.


------------------------------------------------------------------------
r2119 | rstory | 2006-10-13 08:57:01 -0700 (Fri, 13 Oct 2006) | 1 line

don't use (internal) const aware version of res_sym if p_*_sym are macros
------------------------------------------------------------------------
r2106 | rstory | 2006-10-06 10:07:52 -0700 (Fri, 06 Oct 2006) | 5 lines

- daemon mode: it works!
  - add signal handler for clean shutdown on sigterm/sigint
  - clear cache before exit
  - send responses

------------------------------------------------------------------------
r2105 | rstory | 2006-10-06 10:03:15 -0700 (Fri, 06 Oct 2006) | 4 lines

- transform_results()
  - use new copy_rr_rec_list so responses with multiple answers works
  - remove audit comment

------------------------------------------------------------------------
r2104 | rstory | 2006-10-06 10:01:28 -0700 (Fri, 06 Oct 2006) | 1 line

new copy_rr_rec_list() function
------------------------------------------------------------------------
r2103 | rstory | 2006-10-05 15:29:39 -0700 (Thu, 05 Oct 2006) | 1 line

export compose_answer
------------------------------------------------------------------------
r2101 | rstory | 2006-10-05 07:53:07 -0700 (Thu, 05 Oct 2006) | 6 lines

- clean up main
  - move selftest code into function
  - move selftest and error checks earlier
    - allows 2 levels of indention to be removed
- run indent

------------------------------------------------------------------------
r2100 | rstory | 2006-10-05 07:24:14 -0700 (Thu, 05 Oct 2006) | 1 line

start support for daemon mode: listen, query & validate; no responses yet
------------------------------------------------------------------------
r2099 | rstory | 2006-10-05 06:33:20 -0700 (Thu, 05 Oct 2006) | 1 line

get rid of newline in time string
------------------------------------------------------------------------
r2098 | rstory | 2006-10-05 06:28:55 -0700 (Thu, 05 Oct 2006) | 1 line

convert wire name to ascii before logging
------------------------------------------------------------------------
r2097 | rstory | 2006-10-05 06:26:35 -0700 (Thu, 05 Oct 2006) | 1 line

remove unused variable
------------------------------------------------------------------------
r2096 | rstory | 2006-10-05 06:24:26 -0700 (Thu, 05 Oct 2006) | 1 line

get rid of newline in time string
------------------------------------------------------------------------
r2095 | rstory | 2006-10-05 04:51:55 -0700 (Thu, 05 Oct 2006) | 1 line

remove linefeeds from val_log messages
------------------------------------------------------------------------
r2091 | rstory | 2006-10-04 14:53:53 -0700 (Wed, 04 Oct 2006) | 1 line

fix typo
------------------------------------------------------------------------
r2087 | rstory | 2006-10-04 12:12:04 -0700 (Wed, 04 Oct 2006) | 3 lines

- add ttl expiration time field to rrset struct
- add simplistic ttl expiration checks when querying cache

------------------------------------------------------------------------
r2082 | baerm | 2006-10-03 14:22:20 -0700 (Tue, 03 Oct 2006) | 3 lines

update service handling by getaddrinfo (ports should
be set correctly now)

------------------------------------------------------------------------
r2081 | rstory | 2006-10-03 12:12:40 -0700 (Tue, 03 Oct 2006) | 1 line

remove bogus/test struct member
------------------------------------------------------------------------
r2080 | rstory | 2006-10-03 11:28:26 -0700 (Tue, 03 Oct 2006) | 1 line

remove tabs from macros
------------------------------------------------------------------------
r2074 | rstory | 2006-09-29 13:56:15 -0700 (Fri, 29 Sep 2006) | 1 line

define local res_sym lookalike w/const char*, to get rid of a slew of compiler complaints
------------------------------------------------------------------------
r2073 | rstory | 2006-09-29 13:54:56 -0700 (Fri, 29 Sep 2006) | 1 line

add prototype for ns_samename iff missing
------------------------------------------------------------------------
r2072 | rstory | 2006-09-29 13:54:18 -0700 (Fri, 29 Sep 2006) | 1 line

add decl check for ns_samename
------------------------------------------------------------------------
r2071 | rstory | 2006-09-29 13:19:05 -0700 (Fri, 29 Sep 2006) | 1 line

run autoconf
------------------------------------------------------------------------
r2070 | rstory | 2006-09-29 13:18:38 -0700 (Fri, 29 Sep 2006) | 1 line

remove double-print of result
------------------------------------------------------------------------
r2061 | rstory | 2006-09-28 14:13:40 -0700 (Thu, 28 Sep 2006) | 1 line

add headers for solaris
------------------------------------------------------------------------
r2060 | rstory | 2006-09-28 14:13:06 -0700 (Thu, 28 Sep 2006) | 1 line

add prototype/parameter cast for solaris
------------------------------------------------------------------------
r2059 | rstory | 2006-09-28 14:11:19 -0700 (Thu, 28 Sep 2006) | 1 line

add header/prototype for solairs
------------------------------------------------------------------------
r2057 | rstory | 2006-09-28 14:01:37 -0700 (Thu, 28 Sep 2006) | 1 line

add headers for solaris
------------------------------------------------------------------------
r2056 | rstory | 2006-09-27 13:33:36 -0700 (Wed, 27 Sep 2006) | 3 lines

- don't dereference NULL ptr
- add ability to run a range of tests

------------------------------------------------------------------------
r2055 | rstory | 2006-09-27 12:25:51 -0700 (Wed, 27 Sep 2006) | 2 lines

fix bad commit; this is r2040 + indent

------------------------------------------------------------------------
r2054 | rstory | 2006-09-27 12:06:21 -0700 (Wed, 27 Sep 2006) | 1 line

run indent
------------------------------------------------------------------------
r2053 | rstory | 2006-09-27 11:22:45 -0700 (Wed, 27 Sep 2006) | 7 lines

- is_trusted_key(): clear dnskey between iterations
- prove_nsec_wildcard_check()
  - check for null parameter
  - don't memcpy from null ptr
  - update find_next_zonecut calls to pass context
- ask_cache(): make sure to do 'deep' release of resources

------------------------------------------------------------------------
r2052 | rstory | 2006-09-27 11:11:16 -0700 (Wed, 27 Sep 2006) | 5 lines

- get_addrinfo_from_result()
  - use sizeof() instead of hardcoded size
  - release unused memory before return
  - strdup canonname

------------------------------------------------------------------------
r2051 | rstory | 2006-09-27 11:08:32 -0700 (Wed, 27 Sep 2006) | 5 lines

- minor optimizations to TOK_IN_STR macro
- val_parse_dnskey_string()
  - cleanup memory for error cases
  - clear passed ptr if we released the memory

------------------------------------------------------------------------
r2050 | rstory | 2006-09-27 11:06:13 -0700 (Wed, 27 Sep 2006) | 7 lines

- make_sigfield(): check for overflow before memcpy
- find_key_for_tag()
  - check for null param
  - check function rc and continue on error
  - free allocated public_key if not used
- verify_next_assertion(): free allocated public_key if not used

------------------------------------------------------------------------
r2049 | rstory | 2006-09-27 11:04:00 -0700 (Wed, 27 Sep 2006) | 4 lines

- res_sq_free_rrset_recs(): free all name servers
- find_rr_set(): don't try to clone null ptr
- decompress(): use sizeof(var) instead of hardcoded size

------------------------------------------------------------------------
r2048 | rstory | 2006-09-27 11:00:17 -0700 (Wed, 27 Sep 2006) | 13 lines

- SAVE_RR_TO_LIST 
  - move from header to above function where used
  - add appropriate cleanup on return cases
- digest_response()
  - free learned_* rrsets before returning
  - add 'else' to save unnecessary comparison
- val_resquery_send(): rename var to *_p to indicate ascii domain
- val_resquery_rcv()
  - rename var to *_p to indicate ascii domain
  - free response_data if not used
  - free response domain info when done w/it
- find_next_zonecut(): add context param so no temporary needed

------------------------------------------------------------------------
r2047 | rstory | 2006-09-27 10:47:34 -0700 (Wed, 27 Sep 2006) | 11 lines

- add policy_cleanup() to release allocated memory
- use atexit to register policy_cleanup() when memory allocated
- use sizeof() instead of macro for size parameter
- destroy_valpol(): traverse plist to release all memory
- rename some vars to *_p to indicate they are ascii names, not wire format
- read_root_hints_file()
  - use local static to return w/out action if already called
  - don't use SAVE_RR_TO_LIST macro; instead copy code it and add appropriate
    resource cleanup in error cases
  - cleanup memory before return

------------------------------------------------------------------------
r2046 | rstory | 2006-09-27 10:27:32 -0700 (Wed, 27 Sep 2006) | 9 lines

- add/use new LOCK_DOWNGRADE macro
- stow_info(): fix memory leak
- get_cached_rrset(): get lock sooner
- stow_root_info()
  - get lock sooner
  - return w/no action if we already read root info
  - make sure to release lock for all exit paths
- free_validator_cache(): free root_info

------------------------------------------------------------------------
r2045 | rstory | 2006-09-27 10:21:02 -0700 (Wed, 27 Sep 2006) | 1 line

free cache on exit
------------------------------------------------------------------------
r2044 | hserus | 2006-09-27 07:23:46 -0700 (Wed, 27 Sep 2006) | 2 lines

Add configure and header files generated after adding checks for gethostbyname2 and hstrerror

------------------------------------------------------------------------
r2043 | hserus | 2006-09-27 06:30:15 -0700 (Wed, 27 Sep 2006) | 4 lines

Don't expose the union within val_authentication_chain in the API. Instead, create internal versions
_val_authentication_chain and _val_result_chain to handle this data structure. This keeps the structures 
in conformance with draft-hayatnagarkar-dnsext-validator-api 

------------------------------------------------------------------------
r2042 | hserus | 2006-09-26 11:59:57 -0700 (Tue, 26 Sep 2006) | 2 lines

Return EAI_SERVICE from process_service_and_hints() instead of NULL

------------------------------------------------------------------------
r2041 | hserus | 2006-09-26 11:53:34 -0700 (Tue, 26 Sep 2006) | 2 lines

Add prototypes for inet_nsap_addr and inet_nsap_ntoa

------------------------------------------------------------------------
r2040 | hserus | 2006-09-26 11:51:58 -0700 (Tue, 26 Sep 2006) | 2 lines

Allow compilation on Solaris

------------------------------------------------------------------------
r2031 | baerm | 2006-09-25 16:20:06 -0700 (Mon, 25 Sep 2006) | 3 lines

changed val_getaddrinfo processing and process_service_and_hints 
to handle service names and numbers

------------------------------------------------------------------------
r2030 | hserus | 2006-09-25 13:20:20 -0700 (Mon, 25 Sep 2006) | 2 lines

Save the response header bytes in rrset_rec; copy and free these fields where ever appropriate.

------------------------------------------------------------------------
r2029 | hserus | 2006-09-25 13:16:57 -0700 (Mon, 25 Sep 2006) | 2 lines

Remove redundant check

------------------------------------------------------------------------
r2028 | rstory | 2006-09-25 12:25:12 -0700 (Mon, 25 Sep 2006) | 1 line

restore null ptr check lost somehow during indent checkins
------------------------------------------------------------------------
r2027 | rstory | 2006-09-25 11:57:03 -0700 (Mon, 25 Sep 2006) | 2 lines

- second pass of indent

------------------------------------------------------------------------
r2026 | rstory | 2006-09-25 11:06:07 -0700 (Mon, 25 Sep 2006) | 1 line

run indent
------------------------------------------------------------------------
r2025 | hserus | 2006-09-25 08:15:24 -0700 (Mon, 25 Sep 2006) | 3 lines

Use the public "struct val_rrset" member in "struct val_authentication_chain" instead of the private "struct val_rrset_digested"
member while processing results from val_resolve_and_check()  

------------------------------------------------------------------------
r2024 | rstory | 2006-09-25 07:59:38 -0700 (Mon, 25 Sep 2006) | 1 line

don't malloc 0 bytes
------------------------------------------------------------------------
r2023 | hserus | 2006-09-25 07:14:58 -0700 (Mon, 25 Sep 2006) | 2 lines

Add ability to enable NSEC3 using the "--with-nsec3" flag

------------------------------------------------------------------------
r2021 | hserus | 2006-09-22 14:34:42 -0700 (Fri, 22 Sep 2006) | 2 lines

Stop the compiler from complaining about uninitialized usage of a variable.

------------------------------------------------------------------------
r2020 | hserus | 2006-09-22 13:53:17 -0700 (Fri, 22 Sep 2006) | 2 lines

Add TA and zone-security-expection for ws.nsec3.org

------------------------------------------------------------------------
r2019 | hserus | 2006-09-22 13:52:55 -0700 (Fri, 22 Sep 2006) | 3 lines

Change SAVE_RR_TO_LIST macro so that it can be used for all different types of rrset types in digest_response()


------------------------------------------------------------------------
r2018 | hserus | 2006-09-22 13:52:36 -0700 (Fri, 22 Sep 2006) | 2 lines

Add prototypes for new nsec3-related functions.

------------------------------------------------------------------------
r2017 | hserus | 2006-09-22 13:52:21 -0700 (Fri, 22 Sep 2006) | 4 lines

Create two new categories of error codes for the "cannot do anything further" states: one where we should check proof of non existence, and the other where we should not.
Add definitions for VAL_R_PROVABLY_UNSECURE, VAL_PROVABLY_UNSECURE and VAL_NONEXISTENT_NAME_OPTOUT


------------------------------------------------------------------------
r2016 | hserus | 2006-09-22 13:52:01 -0700 (Fri, 22 Sep 2006) | 9 lines

Use correct bounds while constructing a presentation format domain name
Changes to reflect removal of non-useful members from struct delegation_info
Since (struct name_server *)->ns_name_n is now an array, don't allocate memory for it.
Make it possible for digest_response() to identify the header bytes in the reponse
Stow zone information only when we actually follow referrals
Removed the entire cname logic because it didn't seem to make any sense. This has to be reworked.
Fix the referral and glue-fetching logic.


------------------------------------------------------------------------
r2015 | hserus | 2006-09-22 13:51:42 -0700 (Fri, 22 Sep 2006) | 6 lines

Use correct array size for specifying on the wire domain name
Implement base32 encoding for NSEC3 hash names
Implement logic for comparison of hash values
In nsec_sig_match make it possible to add multiple RRSIGs to a record set.


------------------------------------------------------------------------
r2014 | hserus | 2006-09-22 13:51:22 -0700 (Fri, 22 Sep 2006) | 29 lines

Add support for nsec3:
    - Properly detect when a given type is set for an NSEC or NSEC3 record.
    - check hash span
    - recognizing this record type to be a proof of non-existence
    - checking if there are conflicting answers in general
    - computing nsec3 hash with given params
    - span check and wildcard check
    - identification of VAL_NONEXISTENT_NAME_OPTOUT
Rearrange code for proving non-existence
    - There is no initial check made to see if NSEC_is_wrong_answer
    - add separate functions for span check and wildcard check
    - branch to the correct check depending on nsec3 or nsec
    - if we are not able to prove non-existence but the zone is
      provable insecure then we extract the code from the response header
      and return that to the user
Changed the logic for identifying next name server where the query should be directed to
    - look into our cache first (we only cache name server info if we actually follwed referrals)
    - if nothing matches, use the default name server
    - else recurse from root
Fix glue fetching logic
Identify condition of DS signed by unknown algorithms as that of provably insecure
Set the authentication chain status to VAL_R_PROVABLY_UNSECURE when we detect this condition.
add_to_authentication_chain() now takes a rrset param instead of domain_info since that is really what is needed
verify_provably_unsecure() takes a new param for the query. We need to know this in order to break out of a potential infinite loop. verify_and_validate() also changes to accomodate this.
Identify two new categories of error codes for the "cannot do anything further" states: one where we should check proof of non existence, and the other where we should not. 
Use correct bounds while constructing a presentation format domain name
Use correct array size for specifying on the wire domain name


------------------------------------------------------------------------
r2013 | hserus | 2006-09-22 13:49:56 -0700 (Fri, 22 Sep 2006) | 4 lines

Add policy definition for NSEC3 maximum allowable iterations
Add prototypes for NSEC3 functions.


------------------------------------------------------------------------
r2012 | hserus | 2006-09-22 13:49:39 -0700 (Fri, 22 Sep 2006) | 8 lines

Define a policy for specifying maximum allowable NSEC3 iterations
Use correct bounds while constructing on the wire domain name
Correctly break out of loop when checking for policy relevance
Since (struct name_server *)->ns_name_n is now an array, don't allocate memory for it.
Plug a memory leak for the name server list.
Since we're not stowing the root name server information in the cache, free-up this memory.


------------------------------------------------------------------------
r2011 | hserus | 2006-09-22 13:49:14 -0700 (Fri, 22 Sep 2006) | 10 lines

Moved definitions for NS_MAXDNAME and NS_MAXCDNAME to resolver
Define separate answer types for NSEC and NSEC3 instead of a single NXT type
Add definitions for different hash algorithm types including the ones used for signaling NSEC3
Remove the query section from val_rrset. This is not useful. (Note API change.)
Use correct array size for specifying on the wire domain name
Remove a bunch of non-useful members from struct delegation_info
Dont assume that DS hash will always be SHA1
Define the NSEC3 rdata structure


------------------------------------------------------------------------
r2010 | hserus | 2006-09-22 13:48:44 -0700 (Fri, 22 Sep 2006) | 2 lines

In val_switch_policy_scope() look at all policies in the file to see if they are relevant.

------------------------------------------------------------------------
r2009 | hserus | 2006-09-22 13:48:20 -0700 (Fri, 22 Sep 2006) | 4 lines

Use correct bounds while constructing a presentation format domain name
Add text string for displaying the VAL_PROVABLY_UNSECURE code.


------------------------------------------------------------------------
r2008 | hserus | 2006-09-22 13:47:58 -0700 (Fri, 22 Sep 2006) | 3 lines

Add prototypes for new NSEC3-related functions.


------------------------------------------------------------------------
r2007 | hserus | 2006-09-22 13:47:38 -0700 (Fri, 22 Sep 2006) | 4 lines

Use definitions for hash algorithms intead of their values.
Add logic for parsing an NSEC3 resource record


------------------------------------------------------------------------
r2006 | hserus | 2006-09-22 13:47:22 -0700 (Fri, 22 Sep 2006) | 3 lines

Use correct bounds while constructing a presentation format domain name


------------------------------------------------------------------------
r2005 | hserus | 2006-09-22 13:46:44 -0700 (Fri, 22 Sep 2006) | 6 lines

Use definitions for hash algorithms intead of their values.
Add support for NSEC3 signaling
Use correct bounds while constructing on the wire domain name
Implement hash comparison operation


------------------------------------------------------------------------
r2004 | hserus | 2006-09-22 13:46:16 -0700 (Fri, 22 Sep 2006) | 5 lines

Use correct bounds while constructing on the wire domain name
Don't store the root hints information in the name server cache. This is to prevent queries from always being sent to the root even when a default
name server is present.


------------------------------------------------------------------------
r2003 | hserus | 2006-09-22 13:45:42 -0700 (Fri, 22 Sep 2006) | 3 lines

Use correct bounds while constructing on the wire domain name


------------------------------------------------------------------------
r2002 | hserus | 2006-09-22 13:43:37 -0700 (Fri, 22 Sep 2006) | 6 lines

Added test cases for NSEC3
Print test case name and result of test case on the same line.
Modified expected value for test cases 67-72. Still need to think about how we're going to handle 
proofs when answers are also returned.


------------------------------------------------------------------------
r2001 | hserus | 2006-09-22 13:43:06 -0700 (Fri, 22 Sep 2006) | 2 lines

Don't allocate memory for (struct name_server *)->ns_name_n since this is now an array

------------------------------------------------------------------------
r2000 | hserus | 2006-09-22 13:42:27 -0700 (Fri, 22 Sep 2006) | 5 lines

Added NSEC3 definitions
Moved definition of NS_MAXDNAME and NS_MAXCDNAME from validator.h to this file
Changed type of ns_name_n in struct name_server from pointer to array of fixed length.


------------------------------------------------------------------------
r1999 | hserus | 2006-09-22 13:41:50 -0700 (Fri, 22 Sep 2006) | 2 lines

Added NSEC3 definitions

------------------------------------------------------------------------
r1998 | rstory | 2006-09-22 10:51:08 -0700 (Fri, 22 Sep 2006) | 1 line

add support for new logging stuff
------------------------------------------------------------------------
r1997 | rstory | 2006-09-22 10:38:31 -0700 (Fri, 22 Sep 2006) | 4 lines

- removed unused VAL_LOG_MASK
- don't use LOG_PERROR w/syslog; users can use stderr log handler
- remove condition for network logging definitions

------------------------------------------------------------------------
r1996 | rstory | 2006-09-22 10:35:03 -0700 (Fri, 22 Sep 2006) | 2 lines

-use new logging mechanism

------------------------------------------------------------------------
r1995 | rstory | 2006-09-22 10:32:34 -0700 (Fri, 22 Sep 2006) | 5 lines

- rename name -> name_p (for consistency) in val_log_assertion
- include res_debug.h if needed
- completely rework logging to allow for multiple independent log destinations
  with their own debug level. supports file, syslog, stderr, stdout, udp 

------------------------------------------------------------------------
r1985 | rstory | 2006-09-19 15:21:54 -0700 (Tue, 19 Sep 2006) | 1 line

add include for solaris
------------------------------------------------------------------------
r1984 | rstory | 2006-09-19 12:44:11 -0700 (Tue, 19 Sep 2006) | 5 lines

- response_recv()
  - minor readability tweak
  - free recvd answer if caller won't expect answer (plug leak)
  - return error if we don't have the return value we expect

------------------------------------------------------------------------
r1983 | rstory | 2006-09-19 12:40:54 -0700 (Tue, 19 Sep 2006) | 1 line

null pointer checks
------------------------------------------------------------------------
r1982 | rstory | 2006-09-19 12:39:42 -0700 (Tue, 19 Sep 2006) | 1 line

maintainability: rename l0 to l_tmp
------------------------------------------------------------------------
r1981 | rstory | 2006-09-16 08:12:41 -0700 (Sat, 16 Sep 2006) | 1 line

wire length must be < NS_MAXCDNAME, not NS_MAXDNAME
------------------------------------------------------------------------
r1980 | rstory | 2006-09-16 08:08:52 -0700 (Sat, 16 Sep 2006) | 2 lines

sizeof x -> sizeof(x)

------------------------------------------------------------------------
r1979 | rstory | 2006-09-15 11:02:35 -0700 (Fri, 15 Sep 2006) | 1 line

run indent
------------------------------------------------------------------------
r1978 | rstory | 2006-09-15 07:16:31 -0700 (Fri, 15 Sep 2006) | 2 lines

options file for indent

------------------------------------------------------------------------
r1977 | rstory | 2006-09-14 15:41:01 -0700 (Thu, 14 Sep 2006) | 1 line

add headers for (incomplete) OpenBSD port
------------------------------------------------------------------------
r1976 | rstory | 2006-09-14 15:40:28 -0700 (Thu, 14 Sep 2006) | 1 line

don't include nameser_compat.h or header.h if nameser defines dns header struct
------------------------------------------------------------------------
r1975 | rstory | 2006-09-14 15:38:18 -0700 (Thu, 14 Sep 2006) | 1 line

check for macros before using them
------------------------------------------------------------------------
r1974 | rstory | 2006-09-14 15:37:31 -0700 (Thu, 14 Sep 2006) | 1 line

defines and conditional prototypes for (incomplete) OpenBSD port
------------------------------------------------------------------------
r1973 | rstory | 2006-09-14 15:35:38 -0700 (Thu, 14 Sep 2006) | 1 line

add some checks for (incomplete) OpenBSD port
------------------------------------------------------------------------
r1937 | rstory | 2006-09-04 13:16:21 -0700 (Mon, 04 Sep 2006) | 3 lines

- add pass-fail return code to sendquery
- add summary after running all self tests

------------------------------------------------------------------------
r1934 | rstory | 2006-09-03 04:40:41 -0700 (Sun, 03 Sep 2006) | 1 line

restore use of tmp ptr for VAL_GET16
------------------------------------------------------------------------
r1932 | rstory | 2006-08-30 16:50:19 -0700 (Wed, 30 Aug 2006) | 1 line

run autoconf
------------------------------------------------------------------------
r1931 | rstory | 2006-08-30 16:49:13 -0700 (Wed, 30 Aug 2006) | 2 lines

add const where needed

------------------------------------------------------------------------
r1930 | rstory | 2006-08-30 16:47:17 -0700 (Wed, 30 Aug 2006) | 5 lines

more compiler warning cleanup
- proper prototypes
- new const friendly RES_GETnn macros to replace NS_GETnn
- add const where needed

------------------------------------------------------------------------
r1929 | rstory | 2006-08-30 16:28:06 -0700 (Wed, 30 Aug 2006) | 6 lines

more compiler warning cleanup
- adding/removing const as needed (mostly removing)
- ifdef extern errno, h_errno decls, as these may be macros
- new VAL_GETnn (const friendly replacements for NS_GETnn macros)
- don't use errno as param name (might be a macro)

------------------------------------------------------------------------
r1928 | rstory | 2006-08-30 15:11:08 -0700 (Wed, 30 Aug 2006) | 2 lines

more complier warning cleanup

------------------------------------------------------------------------
r1927 | rstory | 2006-08-30 14:39:01 -0700 (Wed, 30 Aug 2006) | 2 lines

add extra warning CFLAGS for developers (i.e. '-d .svn')

------------------------------------------------------------------------
r1926 | rstory | 2006-08-30 14:12:16 -0700 (Wed, 30 Aug 2006) | 8 lines

- remove unnecessary ';' from macro definitions
- add new LOCK_UPGRADE macro

stow_info()
- don't use C++ reserverd word for var name (new)
- don't lock/unlock: caller must have lock


------------------------------------------------------------------------
r1925 | rstory | 2006-08-28 14:46:28 -0700 (Mon, 28 Aug 2006) | 15 lines

general cleanup
- check for null parameters
- cleanup allocated memory on errors
- defer var init til after null checks
- move var decls to tops of code blocks
- rename vars using C++ reserver words (class)

compose_merged_answer()
- sanity checks for bugger overflows
- reduce indention 
- free temporary allocations when done

compose_answer()
- sanity checks for bugger overflows

------------------------------------------------------------------------
r1924 | rstory | 2006-08-28 12:10:11 -0700 (Mon, 28 Aug 2006) | 4 lines

p_as_error()
- remove invalid (negative) cases
- add missing VAL_A_DONT_KNOW case

------------------------------------------------------------------------
r1923 | rstory | 2006-08-28 12:04:54 -0700 (Mon, 28 Aug 2006) | 1 line

revert val_astatus_t back to u_int16_t
------------------------------------------------------------------------
r1922 | hardaker | 2006-08-28 11:27:47 -0700 (Mon, 28 Aug 2006) | 3 lines

2 C++ portability things:
  - don't use C++ reserved word "class" (changed to q_class)
  - wrap contents in extern "C" for standard cpp protection
------------------------------------------------------------------------
r1920 | rstory | 2006-08-25 15:32:40 -0700 (Fri, 25 Aug 2006) | 6 lines

- change val_astatus_t from u_int16_t to int16_t,
  (since some status macro values are negative)
- update obvious (compiler complained) prototype parameter types
  - there are probably a lot more of these the compiler isn't complaining
    about. An analysis of a grep for 'u_int16_t' is probably needed.

------------------------------------------------------------------------
r1919 | rstory | 2006-08-25 15:29:17 -0700 (Fri, 25 Aug 2006) | 3 lines

- remove unnecesary ';' in macro def
- remove redundant code in macro def

------------------------------------------------------------------------
r1918 | rstory | 2006-08-25 15:27:57 -0700 (Fri, 25 Aug 2006) | 1 line

remove unnecessary ';' in macro def
------------------------------------------------------------------------
r1917 | rstory | 2006-08-25 15:22:06 -0700 (Fri, 25 Aug 2006) | 12 lines

keep compiler happy
- add headers for missing prototypes
- remove unused vars
- match printf specifiers with types
- return a value from non-void functions
- explicity () and {} where suggested
- proper casts to match function prototypes
- remove redundant ';' in macro decl

find_rr_set()
- match returned value to prototype 

------------------------------------------------------------------------
r1914 | rstory | 2006-08-24 10:31:25 -0700 (Thu, 24 Aug 2006) | 2 lines

read_res_config_file(): cleanup allocated memory on error

------------------------------------------------------------------------
r1913 | rstory | 2006-08-24 10:29:34 -0700 (Thu, 24 Aug 2006) | 1 line

fix saving of original quer name in verify_provably_unsecure
------------------------------------------------------------------------
r1912 | rstory | 2006-08-24 09:44:08 -0700 (Thu, 24 Aug 2006) | 1 line

reduce indention a level in parse_etc_hosts
------------------------------------------------------------------------
r1911 | hardaker | 2006-08-24 08:21:32 -0700 (Thu, 24 Aug 2006) | 1 line

fix completely broken etc host parsing loops with incorrect paren matching
------------------------------------------------------------------------
r1910 | hardaker | 2006-08-24 08:11:58 -0700 (Thu, 24 Aug 2006) | 1 line

variable typo
------------------------------------------------------------------------
r1907 | rstory | 2006-08-22 15:04:41 -0700 (Tue, 22 Aug 2006) | 1 line

fix minor compile errors from previous checkin
------------------------------------------------------------------------
r1906 | rstory | 2006-08-22 14:09:25 -0700 (Tue, 22 Aug 2006) | 1 line

move var decl up one devel
------------------------------------------------------------------------
r1905 | rstory | 2006-08-22 14:07:52 -0700 (Tue, 22 Aug 2006) | 1 line

fix cut-n-paste var name
------------------------------------------------------------------------
r1904 | rstory | 2006-08-22 14:03:07 -0700 (Tue, 22 Aug 2006) | 1 line

move var decls to top of correct code block
------------------------------------------------------------------------
r1903 | rstory | 2006-08-22 13:56:57 -0700 (Tue, 22 Aug 2006) | 1 line

fix check for minimum length
------------------------------------------------------------------------
r1902 | rstory | 2006-08-22 13:55:19 -0700 (Tue, 22 Aug 2006) | 12 lines

general cleanup
 - check for null parameters
 - check fo rnull ptr before dereference
 - move var decls to tops of code blocks

make_sigfield()
 - check for overflow of allocated memory
 - cleanup memory on error
 
hash_is_equal()
 - add (another) note that this function isn't implemented

------------------------------------------------------------------------
r1901 | rstory | 2006-08-21 15:16:05 -0700 (Mon, 21 Aug 2006) | 2 lines

fix typos/compiler warnings introduced by fixes in my previous checkin

------------------------------------------------------------------------
r1894 | rstory | 2006-08-18 13:16:40 -0700 (Fri, 18 Aug 2006) | 17 lines

general cleanup
 - check for null params
 - check for null ptr before dereference
 - defer some var inits til after ptr checks
 - cleanup allocated memory for error cases
 - misc audit notes

init_rr_set()
 - fix double-free of memory in error handling

find_rr_set()
 - rename 'try' (C++ keyword) -> tryit
                                                                                                                           
copy_rrset_rec()
 - note unintended consequences shallow copy of struct w/ptrs.
   fix left as exercise for author

------------------------------------------------------------------------
r1890 | rstory | 2006-08-17 16:09:09 -0700 (Thu, 17 Aug 2006) | 21 lines

general cleanup
 - check for null parameters
 - check for null ptr before dereference
 - move var decls to tops of code blocks
 - defer var initilization til after null param checks

register_query()
 - change from TRUE/FALSE return to 1/0/-1 for error cases
 - don't use callers ptr to walk list (i.e. dropping the head into the bit
   bucket each iteration in the process)
 - plug minor memory leaks

weird_al_realloc()
 - don't memcpy from beyond end of old ptr
 - don't realloc for new size < old size (but do clear end of buffer)
 - rename 'new' var (C++ reserved word)

extract_glue_from_rdata()
 - use temp ptr to expand ns list, so we have original in case of error
 - add parens for explicit operator precedence

------------------------------------------------------------------------
r1889 | rstory | 2006-08-16 17:47:36 -0700 (Wed, 16 Aug 2006) | 22 lines

general cleanup
 - check for null parameters
 - check for null before ptr deref
 - declare static struct w/fixed size so compiler will notice under/over-flow
 - move var decls to tops of code blocks

parse_trust_anchor(), parse_zone_security_expectation()
 - clean up memory on errors
 
free_zone_security_expectation()
 - clear ptr that's just been freed
 
get_next_policy_fragment()
 - plug small memory leak

read_root_hints_file()
 - close file before returning
 
parse_etc_hosts()
 - use strncpy instead of memcpy+strlen
 - cleanup on memory errors, but return data gathered so far

------------------------------------------------------------------------
r1888 | rstory | 2006-08-16 15:50:49 -0700 (Wed, 16 Aug 2006) | 5 lines

general cleanup
 - check for null parameters
 - check for buffer overflows
 - move var decls to top of code blocks

------------------------------------------------------------------------
r1887 | rstory | 2006-08-16 15:06:31 -0700 (Wed, 16 Aug 2006) | 15 lines

get_hex_string()
 - null ptr checks
 
val_log_rrset(), val_log_rrsig_rdata()
 - don't reuse buffer in single function call

val_log_assertion()
 - move var decl to top of code block

send_log_message()
 - close socket before returning
 
val_log()
 - only print into buffer if necessary

------------------------------------------------------------------------
r1886 | rstory | 2006-08-16 14:34:44 -0700 (Wed, 16 Aug 2006) | 6 lines

general cleanup
 - move var dcls to top of code blocks

get_hostent_from_etc_hosts()
 - clean up host list memory before returning

------------------------------------------------------------------------
r1885 | rstory | 2006-08-16 07:18:04 -0700 (Wed, 16 Aug 2006) | 24 lines

general cleanup
 - check for null parameters
 - check ptrs for null before dereferences
 - move var decls to tops of code blocks
 - misc audit notes

val_free_result_chain()
 - free data from correct ptr

free_query_chain()
 - remove unnecessary assigments

is_trusted_zone()
 - pass printable zone, not wire format, to val_log

verify_provably_unsecure(val_
 - save original zone name for final log msg
 
clone_result_assertions()
 - note potential memory leaks

val_resolve_and_check()
 - rename parameter using C++ reserved word (class)

------------------------------------------------------------------------
r1883 | rstory | 2006-08-14 14:25:36 -0700 (Mon, 14 Aug 2006) | 11 lines

append_val_addr_info()
 - optimization for null parameter

process_service_and_hints()
 - 2 notes for review by code owner

general cleanup
 - check/handle null parameter
 - check for null returns when allocating memory
 - check for null ptr before dereference

------------------------------------------------------------------------
r1882 | rstory | 2006-08-14 12:37:43 -0700 (Mon, 14 Aug 2006) | 4 lines

val_create_context()
 - bail on null ptr addr
 - clear ptr @ returned addr if freed

------------------------------------------------------------------------
r1863 | rstory | 2006-08-09 16:52:51 -0700 (Wed, 09 Aug 2006) | 2 lines

bump LIBCURRENT for next release (0.9.3?) due to name_server struct reorder

------------------------------------------------------------------------
r1862 | rstory | 2006-08-09 16:49:36 -0700 (Wed, 09 Aug 2006) | 4 lines

- move ns_address array to last item in name_server structure
- add big warning that ns_address MUST be the last item
- reorder other items, since binary compatiblity already broken

------------------------------------------------------------------------
r1861 | rstory | 2006-08-09 16:35:15 -0700 (Wed, 09 Aug 2006) | 2 lines

handle NULL context in RETRIEVE_POLICY macro

------------------------------------------------------------------------
r1850 | hserus | 2006-08-06 19:17:16 -0700 (Sun, 06 Aug 2006) | 3 lines

In bootstrap_referral() do not assume in that the referral element in val_query_chain will always exist. 
While bootstrapping the referral from the name server cache we may end up having to fetch glue.  

------------------------------------------------------------------------
r1844 | hserus | 2006-08-03 19:39:56 -0700 (Thu, 03 Aug 2006) | 2 lines

Use the zone cut information when ever possible for determining whether EDNS0 option must be used.

------------------------------------------------------------------------
r1843 | rstory | 2006-08-03 14:58:36 -0700 (Thu, 03 Aug 2006) | 2 lines

reformat to find on 80 char/line pages

------------------------------------------------------------------------
r1841 | hserus | 2006-08-03 13:59:41 -0700 (Thu, 03 Aug 2006) | 15 lines

- Return a copied authentication_chain in the val_result_chain structure instead of returning this from the
  context. In that way, we can destroy the context independently of the result structure. We only copy the
public elements from this list, so the respondent server information is not copied over. We will eventually
have to figure out a way to export the respondent server information in the API.
- val_ac_rrset_next is now within the "digested" portion of the assertion.
- Store the zonecut information in the query when ever we are following a referral. Also store the zoncut
  information for any resource records that are returned from this zone.
- Implement the F_DONT_VALIDATE flag for val_resolve_and_check(). This is used when we are trying to locate
  the zone cut for a given name.
- Implement the VAL_A_PROVABLY_UNSECURE condition. This state is equivalent to the TRUST_FLAG being set.
- Implement logic for testing the "provably unsecure" condition.
- Send queries to name servers more intelligently. Try and find the closest matching delegation that is
  available in the cache and direct queries at that instead of always trying to recurse from root.


------------------------------------------------------------------------
r1840 | hserus | 2006-08-03 13:59:18 -0700 (Thu, 03 Aug 2006) | 5 lines

- Added zonecut fields to rrset_rec, delegation_info and val_query_chain
- Defined the F_DONT_VALIDATE flag for val_resolve_and_check()
- Moved val_ac_rrset_next from the val_result_chain structure to the val_rrset_digested structure.


------------------------------------------------------------------------
r1839 | hserus | 2006-08-03 13:58:55 -0700 (Thu, 03 Aug 2006) | 7 lines

- Manage zonecut information in the query structure
- Create a common function bootstrap_referral to handle the creation of a referral-related query from name server resource records.
- Always use the name servers within the val_query_chain structure as the ones to direct the query to. This
  value should already be constructed from context etc. in ask_resolver();
- Implement routine for finding the zonecut given a resource record.


------------------------------------------------------------------------
r1838 | hserus | 2006-08-03 13:58:26 -0700 (Thu, 03 Aug 2006) | 2 lines

- Recognize the VAL_A_PROVABLY_UNSECURE and VAL_A_DONT_VALIDATE status values.

------------------------------------------------------------------------
r1837 | hserus | 2006-08-03 13:58:13 -0700 (Thu, 03 Aug 2006) | 5 lines

- Use only public members from val_authentication_chain for logging data. Name server information will
  always be NULL till such time that we figure out a way to export the respondent server information.
- Recognize the VAL_A_PROVABLY_UNSECURE and VAL_A_DONT_VALIDATE status values.


------------------------------------------------------------------------
r1836 | hserus | 2006-08-03 13:57:48 -0700 (Thu, 03 Aug 2006) | 2 lines

- Manage the zonecut information for a resource record

------------------------------------------------------------------------
r1835 | hserus | 2006-08-03 13:56:03 -0700 (Thu, 03 Aug 2006) | 4 lines

- Maintain separate cache for referral information
- Add routine get_matching_nslist() to retrieve matching nslist for a given query.


------------------------------------------------------------------------
r1834 | hserus | 2006-08-03 13:55:09 -0700 (Thu, 03 Aug 2006) | 5 lines

- Check for NULL name server list in destroy_respol
- Don't set the default name server for a context to root in read_res_config_file(). Look for the closest
  matching name server from the cache instead while sending out a query.


------------------------------------------------------------------------
r1833 | hserus | 2006-08-03 12:09:32 -0700 (Thu, 03 Aug 2006) | 6 lines

The previous version was what was submitted to the IETF as draft-hayatnagarkar-dnsext-validator-api-01.

val_ac_rrset_next is no longer a member of the public val_authentication_chain structure.
Added note about the VAL_A_PROVABLY_UNSECURE authentication chain status value.


------------------------------------------------------------------------
r1832 | hserus | 2006-08-03 12:07:09 -0700 (Thu, 03 Aug 2006) | 4 lines

val_ac_rrset_next and val_ac_next and no longer members of the public val_authentication_chain structure.
They now appear in the "digested" portion.
Added note about the VAL_A_PROVABLY_UNSECURE authentication chain status value.

------------------------------------------------------------------------
r1821 | hserus | 2006-07-31 07:27:16 -0700 (Mon, 31 Jul 2006) | 2 lines

Move include for resolv.conf after include for validator.h to fix Darwin build error

------------------------------------------------------------------------
r1820 | hserus | 2006-07-31 07:25:35 -0700 (Mon, 31 Jul 2006) | 2 lines

Fix indentation

------------------------------------------------------------------------
r1819 | hserus | 2006-07-31 06:39:45 -0700 (Mon, 31 Jul 2006) | 2 lines

Keep track of which DNSKEY in the key set is part of the chain of trust

------------------------------------------------------------------------
r1818 | rstory | 2006-07-30 15:26:06 -0700 (Sun, 30 Jul 2006) | 3 lines

- convert rfc 1035 domain names to ascii before logging
- add ascii class/type to send query debug log msg

------------------------------------------------------------------------
r1817 | rstory | 2006-07-30 14:44:35 -0700 (Sun, 30 Jul 2006) | 2 lines

change log id from decimal ctx-id to libval(ctd-id)

------------------------------------------------------------------------
r1813 | hserus | 2006-07-25 10:32:53 -0700 (Tue, 25 Jul 2006) | 2 lines

Use VAL_GENERIC_ERROR in place of VAL_ERROR for generic internal errors

------------------------------------------------------------------------
r1812 | hserus | 2006-07-25 10:30:19 -0700 (Tue, 25 Jul 2006) | 2 lines

Use VAL_GENERIC_ERROR in place of VAL_ERROR for internal errors

------------------------------------------------------------------------
r1801 | baerm | 2006-07-18 09:33:13 -0700 (Tue, 18 Jul 2006) | 2 lines

fixed reverse lookup problem.

------------------------------------------------------------------------
r1800 | baerm | 2006-07-14 13:40:20 -0700 (Fri, 14 Jul 2006) | 3 lines

changed /etc/resolv.conf parsing to skip IPv6 nameserver
addresses and continue parsing the file.

------------------------------------------------------------------------
r1786 | hserus | 2006-06-23 11:06:08 -0700 (Fri, 23 Jun 2006) | 2 lines

More edits

------------------------------------------------------------------------
r1785 | hserus | 2006-06-23 09:38:48 -0700 (Fri, 23 Jun 2006) | 2 lines

Nits etc.

------------------------------------------------------------------------
r1784 | hserus | 2006-06-22 14:27:54 -0700 (Thu, 22 Jun 2006) | 2 lines

Global search and replace assertion_chain to authentication_chain

------------------------------------------------------------------------
r1783 | hserus | 2006-06-22 13:59:18 -0700 (Thu, 22 Jun 2006) | 3 lines

Removed pointer types for rrset_rec.rrs and val_assertion_chain._as
Also move val_ac_next from val_assertion_chain to val_rrset_digested

------------------------------------------------------------------------
r1782 | hserus | 2006-06-22 13:52:39 -0700 (Thu, 22 Jun 2006) | 2 lines

Add documentation for val_res_query()

------------------------------------------------------------------------
r1781 | hserus | 2006-06-21 13:23:07 -0700 (Wed, 21 Jun 2006) | 2 lines

Modify text for VAL_PROVABLY_UNSECURE. Also add new description for val_res_query().

------------------------------------------------------------------------
r1780 | hserus | 2006-06-21 12:02:07 -0700 (Wed, 21 Jun 2006) | 2 lines

#define VAL_OUT_OF_MEMORY to VAL_RESOURCE_UNAVAILABLE

------------------------------------------------------------------------
r1779 | hserus | 2006-06-21 11:59:55 -0700 (Wed, 21 Jun 2006) | 2 lines

Address some of Robert's comments from his mail dated 06/21

------------------------------------------------------------------------
r1778 | hserus | 2006-06-21 09:59:11 -0700 (Wed, 21 Jun 2006) | 2 lines

Add new interface for val_res_query()

------------------------------------------------------------------------
r1777 | hserus | 2006-06-21 09:54:21 -0700 (Wed, 21 Jun 2006) | 2 lines

Use EAI_FAIL instead of the validator error code when val_create_context() fails

------------------------------------------------------------------------
r1772 | hserus | 2006-06-21 06:02:14 -0700 (Wed, 21 Jun 2006) | 2 lines

New members for val_addrinfo and val_response. Also add definition for val_query() and val_free_response()

------------------------------------------------------------------------
r1771 | hserus | 2006-06-21 05:57:02 -0700 (Wed, 21 Jun 2006) | 2 lines

Use new struct addrinfo member ai_val_status in place of val_status

------------------------------------------------------------------------
r1770 | hserus | 2006-06-21 05:55:27 -0700 (Wed, 21 Jun 2006) | 2 lines

Remove unused error codes

------------------------------------------------------------------------
r1769 | hserus | 2006-06-21 05:54:30 -0700 (Wed, 21 Jun 2006) | 2 lines

Change definition for val_query()

------------------------------------------------------------------------
r1768 | hserus | 2006-06-21 05:52:10 -0700 (Wed, 21 Jun 2006) | 2 lines

Update description for val_query() following the API change

------------------------------------------------------------------------
r1767 | hserus | 2006-06-21 05:50:37 -0700 (Wed, 21 Jun 2006) | 2 lines

Use new val_query() interface and/or struct member names

------------------------------------------------------------------------
r1766 | hserus | 2006-06-20 05:44:37 -0700 (Tue, 20 Jun 2006) | 2 lines

Remove C-style comments from spec.

------------------------------------------------------------------------
r1757 | hardaker | 2006-06-19 16:58:00 -0700 (Mon, 19 Jun 2006) | 1 line

version number update (0.2)
------------------------------------------------------------------------
r1746 | hserus | 2006-06-19 12:09:33 -0700 (Mon, 19 Jun 2006) | 2 lines

Set results parameter initially to NULL in val_resolve_and_check() 

------------------------------------------------------------------------
r1745 | hserus | 2006-06-19 10:34:48 -0700 (Mon, 19 Jun 2006) | 2 lines

Remove perror() statements.

------------------------------------------------------------------------
r1744 | hserus | 2006-06-16 14:34:03 -0700 (Fri, 16 Jun 2006) | 2 lines

Add check to ensure that context creation was successful. 

------------------------------------------------------------------------
r1743 | hserus | 2006-06-16 14:32:25 -0700 (Fri, 16 Jun 2006) | 2 lines

Allow NULL values to be specified for ctx parameter in val_resolve_and_check()

------------------------------------------------------------------------
r1742 | hserus | 2006-06-16 13:41:59 -0700 (Fri, 16 Jun 2006) | 2 lines

More changes based on comments received earlier.

------------------------------------------------------------------------
r1741 | hserus | 2006-06-16 09:57:18 -0700 (Fri, 16 Jun 2006) | 2 lines

Add more sample policy statements

------------------------------------------------------------------------
r1740 | hserus | 2006-06-16 09:56:00 -0700 (Fri, 16 Jun 2006) | 2 lines

Set policy to the requested scope when creating a new context 

------------------------------------------------------------------------
r1739 | hserus | 2006-06-16 09:55:06 -0700 (Fri, 16 Jun 2006) | 2 lines

Make sure that default policies are read; also fix bug in memory deallocation

------------------------------------------------------------------------
r1738 | hserus | 2006-06-16 09:52:24 -0700 (Fri, 16 Jun 2006) | 2 lines

Add new option to perform validation using a specific policy label

------------------------------------------------------------------------
r1737 | hserus | 2006-06-15 14:27:08 -0700 (Thu, 15 Jun 2006) | 2 lines

Make sure that custom defines are generated in the header file

------------------------------------------------------------------------
r1736 | hserus | 2006-06-15 12:19:07 -0700 (Thu, 15 Jun 2006) | 2 lines

Make changes to the High-level API section + other miscellaneous edits

------------------------------------------------------------------------
r1730 | hserus | 2006-06-14 14:56:58 -0700 (Wed, 14 Jun 2006) | 2 lines

Check for bad arguments

------------------------------------------------------------------------
r1729 | hserus | 2006-06-14 12:41:28 -0700 (Wed, 14 Jun 2006) | 2 lines

Add support for VAL_NOTRUST

------------------------------------------------------------------------
r1728 | hserus | 2006-06-14 12:39:23 -0700 (Wed, 14 Jun 2006) | 2 lines

Add description for VAL_NOTRUST

------------------------------------------------------------------------
r1725 | baerm | 2006-06-14 09:23:19 -0700 (Wed, 14 Jun 2006) | 2 lines

set a couple more AF family values I missed before

------------------------------------------------------------------------
r1724 | hserus | 2006-06-14 06:49:25 -0700 (Wed, 14 Jun 2006) | 2 lines

Remove reference to validator_api.xml

------------------------------------------------------------------------
r1720 | baerm | 2006-06-12 14:50:20 -0700 (Mon, 12 Jun 2006) | 2 lines

set sockaddr_in family values

------------------------------------------------------------------------
r1719 | baerm | 2006-06-12 14:45:24 -0700 (Mon, 12 Jun 2006) | 2 lines

fixed malloc problem

------------------------------------------------------------------------
r1716 | hserus | 2006-06-09 13:11:33 -0700 (Fri, 09 Jun 2006) | 2 lines

Create man pages for different functions within libval(3)

------------------------------------------------------------------------
r1713 | hserus | 2006-06-09 11:58:28 -0700 (Fri, 09 Jun 2006) | 2 lines

Added a new man page for dnsval.conf; man page for libval now references this other man page. 

------------------------------------------------------------------------
r1712 | hserus | 2006-06-09 10:23:43 -0700 (Fri, 09 Jun 2006) | 2 lines

Added note about VAL_NOTRUST

------------------------------------------------------------------------
r1711 | hserus | 2006-06-09 07:56:43 -0700 (Fri, 09 Jun 2006) | 2 lines

Use ISC's implementation for inet_nsap_ntoa

------------------------------------------------------------------------
r1710 | hserus | 2006-06-09 07:53:58 -0700 (Fri, 09 Jun 2006) | 2 lines

Use inet_pton in place of inet_aton

------------------------------------------------------------------------
r1709 | hserus | 2006-06-09 07:53:03 -0700 (Fri, 09 Jun 2006) | 3 lines

Don't use strsep and inet_aton since these are not portable; implement code code differently for the former
and use inet_pton for the latter. 

------------------------------------------------------------------------
r1708 | hserus | 2006-06-09 07:49:01 -0700 (Fri, 09 Jun 2006) | 2 lines

Add nsap_add.c to the list of files to be compiled.

------------------------------------------------------------------------
r1707 | hserus | 2006-06-09 07:39:51 -0700 (Fri, 09 Jun 2006) | 2 lines

Don't use non-portable functions when they are not defined

------------------------------------------------------------------------
r1706 | hserus | 2006-06-09 07:38:34 -0700 (Fri, 09 Jun 2006) | 2 lines

Check for availability of non-portable functions and specific symbols

------------------------------------------------------------------------
r1694 | hserus | 2006-06-08 10:44:50 -0700 (Thu, 08 Jun 2006) | 2 lines

Suppor the root zone in the zone-security-expectation policy construct

------------------------------------------------------------------------
r1692 | hserus | 2006-06-06 12:08:41 -0700 (Tue, 06 Jun 2006) | 2 lines

Update the documentation for libval to match with current implementation.

------------------------------------------------------------------------
r1687 | hserus | 2006-06-06 10:39:50 -0700 (Tue, 06 Jun 2006) | 2 lines

Use val_status_t and val_astatus_t types as parameters to p_val_error() and p_as_error() respectively.

------------------------------------------------------------------------
r1686 | hserus | 2006-06-06 09:54:13 -0700 (Tue, 06 Jun 2006) | 2 lines

Update documentation for libsres to keep current with implementation

------------------------------------------------------------------------
r1685 | hserus | 2006-06-06 09:48:19 -0700 (Tue, 06 Jun 2006) | 2 lines

Re-order struct member so that length and value are located next to each other

------------------------------------------------------------------------
r1684 | hserus | 2006-06-06 09:36:22 -0700 (Tue, 06 Jun 2006) | 2 lines

Only include prototypes that have to be exported from the library

------------------------------------------------------------------------
r1683 | hserus | 2006-06-06 09:33:02 -0700 (Tue, 06 Jun 2006) | 3 lines

Create new header files to store prototypes that were previously stored in validator.h and reference those in various C
files 

------------------------------------------------------------------------
r1681 | hserus | 2006-06-06 07:35:13 -0700 (Tue, 06 Jun 2006) | 2 lines

Minor edit in comments

------------------------------------------------------------------------
r1680 | hserus | 2006-06-06 07:31:59 -0700 (Tue, 06 Jun 2006) | 2 lines

Update the implementation notes for libval

------------------------------------------------------------------------
r1679 | hserus | 2006-06-05 14:39:51 -0700 (Mon, 05 Jun 2006) | 2 lines

Update to make description more current with the implementation.

------------------------------------------------------------------------
r1678 | hserus | 2006-06-05 14:29:42 -0700 (Mon, 05 Jun 2006) | 2 lines

Update to use new error code definitions

------------------------------------------------------------------------
r1677 | hserus | 2006-06-05 13:39:28 -0700 (Mon, 05 Jun 2006) | 2 lines

Updated with current list of files in this directory

------------------------------------------------------------------------
r1676 | hserus | 2006-06-05 12:57:56 -0700 (Mon, 05 Jun 2006) | 2 lines

Add one-line descriptions for command-line utilities

------------------------------------------------------------------------
r1675 | hserus | 2006-06-05 12:46:42 -0700 (Mon, 05 Jun 2006) | 2 lines

Add one-line description for each configuration file needed by the validator

------------------------------------------------------------------------
r1674 | hserus | 2006-06-05 12:45:18 -0700 (Mon, 05 Jun 2006) | 2 lines

Updated new location for docs and apps

------------------------------------------------------------------------
r1673 | hserus | 2006-06-05 12:44:47 -0700 (Mon, 05 Jun 2006) | 2 lines

Updated new location for docs

------------------------------------------------------------------------
r1672 | hserus | 2006-06-05 12:42:56 -0700 (Mon, 05 Jun 2006) | 2 lines

Added a top-level README file that describes the structure of the validator portion of the tree.

------------------------------------------------------------------------
r1671 | hserus | 2006-06-05 12:38:16 -0700 (Mon, 05 Jun 2006) | 2 lines

Add a sample resolv.conf file

------------------------------------------------------------------------
r1670 | hserus | 2006-06-05 11:23:21 -0700 (Mon, 05 Jun 2006) | 2 lines

Use error codes prefixed with VAL_

------------------------------------------------------------------------
r1669 | hserus | 2006-06-05 11:19:49 -0700 (Mon, 05 Jun 2006) | 4 lines

First step towards bring code in sync with draft-hayatnagarkar-dnsext-validator-api-02
Prefix error codes with VAL_ 
reference rrset details from within struct val_rrset.

------------------------------------------------------------------------
r1668 | hserus | 2006-06-05 10:35:27 -0700 (Mon, 05 Jun 2006) | 2 lines

Moved validator configuration files to a separate etc/ directory

------------------------------------------------------------------------
r1667 | hserus | 2006-06-05 10:21:42 -0700 (Mon, 05 Jun 2006) | 9 lines

The previous version was draft-hayatnagarkar-dnsext-validator-api-00.
This version contains the first set of changes for -01 
    - made some changes to the terminology section
    - used val_create_context() instead of val_get_context()
    - changed some of the low-level interfaces
    - Added definitions for assertion status values since this does not seem to be something that is going to come out as a
      separate draft. Have to still change the acknowledgements section to include the work done in the dnssec-app forum.


------------------------------------------------------------------------
r1666 | rstory | 2006-06-01 08:28:21 -0700 (Thu, 01 Jun 2006) | 1 line

do not ignore aclocal.m4
------------------------------------------------------------------------
r1665 | rstory | 2006-06-01 08:27:19 -0700 (Thu, 01 Jun 2006) | 1 line

copy autoconf files from top dir (some slightly modified)
------------------------------------------------------------------------
r1664 | rstory | 2006-06-01 08:26:03 -0700 (Thu, 01 Jun 2006) | 1 line

copy autoconf files from top dir (some slightly modified)
------------------------------------------------------------------------
r1659 | rstory | 2006-05-31 16:17:22 -0700 (Wed, 31 May 2006) | 1 line

run autoheader and autoconf
------------------------------------------------------------------------
r1658 | rstory | 2006-05-31 16:16:38 -0700 (Wed, 31 May 2006) | 3 lines

- explict subst for LIBS
- fix paths for Makefile.(top|bot)

------------------------------------------------------------------------
r1653 | rstory | 2006-05-31 13:45:09 -0700 (Wed, 31 May 2006) | 1 line

run autoheader & autoconf
------------------------------------------------------------------------
r1652 | rstory | 2006-05-31 13:43:14 -0700 (Wed, 31 May 2006) | 1 line

update for validatory reorg
------------------------------------------------------------------------
r1651 | rstory | 2006-05-31 13:41:13 -0700 (Wed, 31 May 2006) | 1 line

remove reorg rename flub
------------------------------------------------------------------------
r1650 | rstory | 2006-05-31 13:39:11 -0700 (Wed, 31 May 2006) | 3 lines

- tweak include for reorg paths
- remove unused subdir logic

------------------------------------------------------------------------
r1649 | rstory | 2006-05-31 13:34:54 -0700 (Wed, 31 May 2006) | 1 line

ignore generated file
------------------------------------------------------------------------
r1648 | rstory | 2006-05-31 13:33:57 -0700 (Wed, 31 May 2006) | 1 line

fix reorg rename flub
------------------------------------------------------------------------
r1647 | rstory | 2006-05-31 13:32:20 -0700 (Wed, 31 May 2006) | 1 line

remove deleted file
------------------------------------------------------------------------
r1646 | rstory | 2006-05-31 13:24:16 -0700 (Wed, 31 May 2006) | 2 lines

dnssec-tools-config.h -> validator-config.h

------------------------------------------------------------------------
r1643 | rstory | 2006-05-31 12:39:05 -0700 (Wed, 31 May 2006) | 2 lines

move libsres

------------------------------------------------------------------------
r1642 | rstory | 2006-05-31 10:41:21 -0700 (Wed, 31 May 2006) | 2 lines

dnssec-tools-config.h -> validator-config.h

------------------------------------------------------------------------
r1641 | rstory | 2006-05-31 10:29:18 -0700 (Wed, 31 May 2006) | 2 lines

move lival to validator dir

------------------------------------------------------------------------
r1639 | rstory | 2006-05-31 09:59:38 -0700 (Wed, 31 May 2006) | 1 line

merge in libsres makefile
------------------------------------------------------------------------
r1638 | rstory | 2006-05-31 09:56:41 -0700 (Wed, 31 May 2006) | 2 lines

- directory reorg for validation libs/apps/docs/etc

------------------------------------------------------------------------
