# Copyright 2004-2005 SPARTA, Inc.  All rights reserved.
# See the COPYING file included with the dnssec-tools package for details.


			     DNSSEC-Tools
			Is your domain secure?


This directory contains a patch to apply to the mozilla code for
enabling DNSSEC checking of URL DNS names.  It is in alpha/beta form
with a lot of debugging but should be usable in testing environments.

1) Install the dnssec-tools package first (we need a library)

2) Apply the patch found in this directory to the mozilla source tree
   (1.7.11 is the last tested).  The configure portion of the patch
   will probably fail, so run 'autoconf' (version 2.13 or so, not
   2.5x) after you apply the patch.

2b) If compiling on a recent fedora core/freetype position the
    compilation may fail.  See the following web site for a patch (the
    one labeled "Freetype 2.1.8 patch for mozilla 1.7.7 worked for
    me):

    https://bugzilla.mozilla.org/attachment.cgi?id=181857

3) Build mozilla adding in the --with-system-val flag to their
   configure script.  If you're using a ~/.mozconfig file then add
   this line to it:

     ac_add_options --with-system-val

   My complete .mozconfig script looks like the following

     # build firefox with dnssec enabled
     mk_add_options MOZ_OBJDIR=/PATH/TO/object_dir
     . $topsrcdir/browser/config/mozconfig
     ac_add_options --disable-tests
     ac_add_options --with-system-val

   After which the following builds firefox with the dnssec patch applied:

     make -f client.mk build

