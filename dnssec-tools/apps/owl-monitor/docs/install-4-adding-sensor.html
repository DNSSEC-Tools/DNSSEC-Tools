<html>

<head>
<title>Owl Monitoring System -- Installation Manual -- Adding Sensors</title>
</head>

<body>

<p>

<center><h2>Owl Monitoring System</h2></center>
<center><h2>Installation Manual</h2></center>

<p>

<!*****************************************************************************>

<a name="4."></a>
<h3>4. Adding Sensors</h3>

<p>

<!------------------------------------------------------------>

<table align=right width="35%">

<tr valign=top>
<td valign=top>

<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.">4.1.</a><td>&nbsp;<td>Actions on Sensor</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.1.">4.1.1.</a><td>&nbsp;<td>Firewall Configuration</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.2.">4.1.2.</a><td>&nbsp;<td>SSH Set-up</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.3.">4.1.3.</a><td>&nbsp;<td>Get Configuration Data from Manager</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.4.">4.1.4.</a><td>&nbsp;<td>Set Up the Owl Configuration File</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.5.">4.1.5.</a><td>&nbsp;<td>Test Transfer to Manager</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.6.">4.1.6.</a><td>&nbsp;<td>Add Start-up Entries</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.7.">4.1.7.</a><td>&nbsp;<td>Add <b>cron</b> Entries</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.1.8.">4.1.8.</a><td>&nbsp;<td>Start Owl Daemons</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.">4.2.</a><td>&nbsp;<td>Actions on Manager</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.1.">4.2.1.</a><td>&nbsp;<td>Create Directories and Files for Sensor's Data </tr>
<tr><td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.2.">4.2.2.</a><td>&nbsp;<td>Firewall Configuration</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.3.">4.2.3.</a><td>&nbsp;<td>SSH Set-up</tr>
<tr valign=top><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.4.">4.2.4.</a><td>&nbsp;<td>Provide Configuration Information to Sensor Administrator</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.5.">4.2.5.</a><td>&nbsp;<td>Test Transfer from Sensor</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.6.">4.2.6.</a><td>&nbsp;<td>Wait for Sensor Data</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.7.">4.2.7.</a><td>&nbsp;<td>Build Nagios Sensor Objects</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.8.">4.2.8.</a><td>&nbsp;<td>Nagios Modifications</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.8.1.">4.2.8.1.</a><td>&nbsp;<td><b>nagios.cfg</tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.8.2.">4.2.8.2.</a><td>&nbsp;<td><b>owl-hostgroups.cfg</b> (Nagios)</b></tr>
<tr><td>&nbsp;<td><a href="install-4-adding-sensor.html#4.2.9.">4.2.9.</a><td>&nbsp;<td>Restart Nagios</tr>
<tr><td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;</tr>

<tr><td width=20>&nbsp;<td width=20>&nbsp;<td>&nbsp;<td>&nbsp;</tr>

</table>

<p>

<!------------------------------------------------------------>

Whenever a new Owl sensor is added to those handled by an Owl manager, there
are a number of actions that must take place on both the sensor and the
manager.  These actions should be followed consecutively within each section.
However, there is some amount of necessary interleaving of actions.  For
example, a particular sensor action may be required before a particular
manager action.

<p>

It is acceptable for the Owl sensor and Owl manager to be under completely
different administrative control.  Each host may even be owned by different
commercial, educational, governmental, or other such entity.  All that is
required is that there be some initial coordination between administrators
when the sensor is first configured, along with (probably) aperiodic support
from time to time later.

<p>

The discussions on adding Owl sensors assumes that the sensor and manager
are under different administrative control.  Required actions will not change
if they are under unified administrative control, but they may be easier to
accomplish. 

<p>

<!------------------------------------------------------->

<a name="4.1."></a>
<h3>4.1. Actions on Sensor</h3>

<p>

This section describes the configuration and testing actions that must be
undertaken in order to have a working Owl sensor.  It assumes the installation
procedures detailed in
<a href="install-2-installation.html#2.1.">section 2.1</a>
have been completed.

<p>

<!----------------------------------->

<a name="4.1.1."></a>
<h3>4.1.1. Firewall Configuration</h3>

<p>

The Owl sensor and the Owl manager communicate by way SSH and HTTP.  If the
Owl sensor is protected by a firewall (either on the sensor host itself or
by an enterprise-level firewall) then the sensor must be allowed to connect to
the manager for these services.  These modifications are far beyond the scope
of this document.

<p>

<!----------------------------------->

<a name="4.1.2."></a>
<h3>4.1.2. SSH Set-up</h3>

<p>

You must generate a new SSH key for the sensor's Owl user and provide the
public key to the administrator of the Owl manager.  This key will allow
<b>owl-transfer</b> to pass Owl sensor data to the manager.  You must generate
keys with key characteristics (e.g., length and type) that are acceptable to
the manager's administrator.

<p>

<!----------------------------------->

<a name="4.1.3."></a>
<h3>4.1.3. Get Configuration Data from Manager</h3>

<p>

There are several pieces of information that must be provided by the
administrator of the Owl manager.  These include values for the sensor's
configuration file and the sensor's name.

<p>

The following data will allow the sensor to work with the Owl manager as
expected.  These data are used, in conjunction with the <i>manager</i>
keyword, in the sensor's configuration file.

<p>

<table>

<tr>
<td valign=top>Configuration&nbsp;Field
<td valign=top width=20>&nbsp;
<td valign=top>Purpose
<td valign=top width=20>&nbsp;
<td valign=top>Example

<tr>
<td valign=top><i>ssh-user</i>
<td width=20>&nbsp;
<td valign=top>user on Owl manager with which <b>owl-transfer</b> will connect via <b>ssh</b>
<td width=20>&nbsp;
<td valign=top>sensor-ottawa@owl-manager.example.com

<tr>
<td valign=top><i>heartbeat</i>
<td width=20>&nbsp;
<td valign=top>URL to provide "heartbeat" data to manager
<td width=20>&nbsp;
<td valign=top>http://owl.example.com/cgi-bin/owl-sensor-heartbeat.cgi

</table>

<p>

The <i>heartbeat</i> field is only necessary if your Owl sensor will be
providing "heartbeat" information to the manager.

<p>

In addition to these data, it would be a good idea for you and the manager
administrator to agree on a name for the sensor.  This is not a hostname, but
is a name by which your sensor will be known to the Owl Monitoring System.
Name agreement between sensor and manager isn't required, but it will probably
make things easier for you both in the long run to refer to the sensor by the
same name.

<p>

The sensor name can be very generic, such as <i>sensor42</i>, <i>sensor-d</i>,
or <i>owl-us-east</i>.  It can also be very specific, such as
<i>washdc-1600-penn-ave-nw</i> or <i>cheltenham-bldg4</i>.  The intent is
to provide distinguishing information to the intended audience of the DNS
monitoring data.  You should use names that easily distinguish sensors and
are acceptable to the manager and sensor administrators.

<p>

<!----------------------------------->

<a name="4.1.4."></a>
<h3>4.1.4. Set Up the Owl Configuration File</h3>

<p>

The Owl configuration file must be initialized.  The data fields include
sensor information, query definitions, file locations, transfer intervals,
and information about contacting the manager.

<p>

The following is a sample <b>owl.conf</b> file:

<pre>
	sensor name rome-sensor
	sensor sensorargs	-config /home/owl/conf/owl.conf
	sensor transferargs	-conf /home/owl/conf/owl.conf
	sensor admin		owl-mgmt bob@example.com

	query		example.com	d	ns
	query		example.com	d	a
	query		.		h	A
	query		.		m

	data	dir		data
	data	interval	60

	log	dir		log

	manager	ssh-user	owl-mgr@owlmonitor.example.com

	manager	heartbeat	http://owlmonitor.example.com/cgi-bin/owl-sensor-heartbeat.cgi
</pre>

<p>

The full definition of the configuration file may be found in the
<b>owl-config.pod</b> manpage.

<p>

The sensor configuration file must include a set of query
definitions.  These are best specified by the administrator of the Owl
manager, but you must be willing to generate and transfer the volume of
data required by those queries.  The impact won't be as large for the
sensor as it will be for the manager.

<p>

In addition, the manager-contact fields must be set with data provided by the
administrator of the Owl manager.  The <i>ssh-user</i> field is required for
transfer of data files.  The <i>heartbeat</i> field is optional, but must be
specified if the sensor will provide "heartbeat" information to the manager.

<p>

When translated to the configuration file format, the example lines from
<a href="install-4-adding-sensor.html#4.2.4.">section 4.2.4</a>
will look like the following:

<pre>
	manager ssh-user        sensor-ottawa@owl-manager.example.com
	manager heartbeat	http://owl.example.com/cgi-bin/owl-sensor-heartbeat.cgi
</pre>

<p>

<!----------------------------------->

<a name="4.1.5."></a>
<h3>4.1.5. Test Transfer to Manager</h3>

<p>

At this point, the manager should be ready to accept data from the Owl
sensor.  Test that this will succeed with the following steps:

<p>

<ol>
<li>Ensure the Owl manager's administrator is ready for this test.
<li>Put a file in the data directory -- specified in the <i>data dir</i>
field of the configuration file.  It doesn't matter what the file's name is
nor its contents.
<li>Inform the manager's administrator of the name of the file.
<li>Run "owl-transfer -config &lt;config-file&gt; -foreground".
</ol>

<p>

If the file was successfully transferred, then the Owl sensor is ready to
start generating data and providing it to the manager.

<p>

If not, you must determine why the file wasn't transferred.
<b>owl-transfer</b> uses the <b>rsync</b> and <b>ssh</b> commands
to perform the transfer, so problem diagnosis should start with them.

<p>

<!----------------------------------->

<a name="4.1.6."></a>
<h3>4.1.6. Add Start-up Entries</h3>

<p>

As discussed in
<a href="install-1-overview.html#1.1.">section 1.1</a>,
you must decide whether you will run the
Owl sensor using the <b>owl-sensord</b> daemon or if you will run
<b>owl-dnstimer</b> and <b>owl-transfer</b> directly.  Both methods are
acceptable; the first is more robust in the case of problems.

<p>

In any event, you must add entries to your operating system's boot process
to start the appropriate Owl daemons.  This is highly dependent on the
operating system, and may involve such things as adding some lines to
<b>/etc/rc.local</b> or adding a start-up file to <b>/etc/rc.d/rc2.d</b>.

<p>

These lines executing the Owl sensor daemons may look something like this:

<pre>
        /home/owl/bin/owl-sensord -config /home/owl/bin/conf/owl.conf
</pre>

or

<pre>
        /home/owl/bin/owl-dnstimer -config /home/owl/bin/conf/owl.conf
        /home/owl/bin/owl-transfer -config /home/owl/bin/conf/owl.conf
</pre>

<p>

It is incumbent upon the installer to determine the proper method of Owl
start-up and the proper place to set up execution.

<p>

<!----------------------------------->

<a name="4.1.7."></a>
<h3>4.1.7. Add <b>cron</b> Entries</h3>

<p>

The <b>owl-dataarch</b>, <b>owl-archold</b>, and <b>owl-heartbeat</b> programs
provide additional services for the Owl Monitoring System.  These programs are
not required, but they can ease some of the burden of administering an Owl
sensor.  However, due to the volume of data generated by an Owl sensor, it
is strongly advised that <b>owl-dataarch</b> be run.

<p>

These programs may be set up as <b>cron</b> jobs.  This will remove the
necessity for the administrator to run these programs manually, and it will
provide regularity to their execution.

<p>

<b>owl-dataarch</b> periodically moves sensor data from the data directory to
an archive directory.  It should be run on a daily basis.

<p>

<b>owl-archold</b> will create a compressed tarfile of a month's data that has
been previously stored in the archive directory.  It should be run on a
monthly basis -- but not on the first or second day of the month.  If the
sensor host is used for much other than as an Owl sensor, then it would be
best to run <b>owl-archold</b> whenever the system is normally at "off hours."

<p>

<b>owl-heartbeat</b> touches a webpage (specified in the configuration file)
and is intended to inform the Owl manager that the sensor is up and running.
This may be run as often as desired.  The more frequently it's run, the more
up-to-date is the information on the Owl manager.  The less frequently it's
run, the lower the granularity of the sensor-availability information on the
manager.  Once per minute or hour is probably sufficient for most purposes. 

<p>

<center>
<table border=1>
<tr>
<td width=120 align=center><b>Program</b>
<td width=275 align=center><b>Frequency of Execution</b>
</tr>

<tr>
<td>&nbsp;<b>owl-dataarch</b>
<td>&nbsp;once per day

<tr>
<td>&nbsp;<b>owl-archold</b>
<td>&nbsp;once per month,<br>&nbsp;on the 3rd of the month or later

<tr>
<td>&nbsp;<b>owl-heartbeat</b>
<td>&nbsp;as desired,<br>&nbsp;but once per minute or hour is reasonable

</table>
</center>

<p>

<!----------------------------------->

<a name="4.1.8."></a>
<h3>4.1.8. Start Owl Daemons</h3>

<p>

Installation and configuration are complete for the Owl sensor.  The Owl
sensor is now ready to gather timing data on DNS queries and submit them to
the Owl manager.  To start the Owl sensor daemons, you can either start them
manually (either by running just <b>owl-sensord</b> or by running both
<b>owl-dnswatch</b> and <b>owl-transfer</b>) or reboot your system.

<p>

<!------------------------------------------------------->

<a name="4.2."></a>
<h3>4.2. Actions on Manager</h3>

<p>

This section describes the various actions that must be performed on the
Owl manager in order to configure a new sensor for it.  This assumes the
installation procedures detailed in
<a href="install-2-installation.html#2.2.">section 2.2</a>
have been completed.

<p>

<!----------------------------------->

<a name="4.2.1."></a>
<h3>4.2.1. Create Directories and Files for Sensor's Data </h3>

<p>

A set of directories and files must be created for a new sensor.  These are
the sensor directory, the sensor's data directory.  history directory, data
archive directory, and heartbeat file.

<p>

These files are best by the <b>owl-initsensor</b> command, but they may also
be created manually.  If they are created manually, you <b>must</b>use the
names and organization as given in the examples below.  The locations of the
directories may change (i.e., the <b>/owl/data</b> and <b>/owl/archive</b>
portions), but that's it.

<p>

For example, when adding the new sensors <b>helsinki</b> and <b>canberra</b>,
you might create the following sets of directories:

<center>
<table>
<tr>
<td>
sensor directory<br>
data directory<br>
heartbeat file<br>
history directory<br>
archive directory<br>
<td width=50>&nbsp;

<td>
<b>/owl/data/helsinki/</b><br>
<b>/owl/data/helsinki/data/</b><br>
<b>/owl/data/helsinki/heartbeat</b><br>
<b>/owl/data/helsinki/history/</b><br>
<b>/owl/archive/helsinki/</b><br>
<td width=50>&nbsp;

<td>
<b>/owl/data/canberra/</b><br>
<b>/owl/data/canberra/data/</b><br>
<b>/owl/data/canberra/heartbeat</b><br>
<b>/owl/data/canberra/history/</b><br>
<b>/owl/archive/canberra/</b><br>
</td>
</tr>
</table>
</center>

<p>

The archive directory must be writable by the manager's Owl user, but the
others must be writable by the manager's Owl user and the manager's web
server.

<p>

<!----------------------------------->

<a name="4.2.2."></a>
<h3>4.2.2. Firewall Configuration</h3>

<p>

The Owl sensor and the Owl manager communicate by way SSH and HTTP.  If the
Owl manager is protected by a firewall (either on the manager host itself or
by an enterprise-level firewall) then the sensor must be allowed to connect to
the manager for these services.  These modifications are far beyond the scope
of this document.

<p>

<!----------------------------------->

<a name="4.2.3."></a>
<h3>4.2.3. SSH Set-up</h3>

<p>

The administrator of the new sensor must generate a new SSH key for the
sensor's Owl user and provide the public key to you.  You must then add it to
the <b>.ssh/authorized_keys</b> file of the Owl manager user.  The entry for
this sensor will contain the <b>rrsync</b> command and the new sensor's data
directory.  See the example below.

<p>

The <b>authorized_keys</b> file restricts access to known sensor hosts and
controls where each Owl sensor's data are stored.  This file should only have
one entry per sensor, and each sensor should have a unique data directory.

<p>

Example entries (with abbreviated keys):

<pre>
    command="/usr/local/bin/rrsync /owl/data/sensor1" ssh-rsa AAAA...Qw== sensor@sensor1.example.com
    command="/usr/local/bin/rrsync /owl/data/sensor8" ssh-rsa AAAA...gM== sensor@sensor8.example.au
</pre>

<p>

The parts of the line from "ssh-rsa " to the end of the line are the public
SSH key provided by the sensor's administrator.  You will add everything
before the "ssh-rsa ", using the proper paths for <b>rrsync</b> and the
sensor's data directory.

<p>

<!----------------------------------->

<a name="4.2.4."></a>
<h3>4.2.4. Provide Configuration Information to Sensor Administrator</h3>

<p>

There are several pieces of information that must be provided to the
administrator of the Owl sensor.  These include values for the sensor's
configuration file and the sensor's name.

<p>

The following data will allow the sensor to work with the Owl manager as
expected.  These data are used, in conjunction with the <i>manager</i>
keyword, in the sensor's configuration file.

<p>

<table>

<tr>
<td valign=top>Configuration&nbsp;Field
<td valign=top width=20>&nbsp;
<td valign=top>Purpose
<td valign=top width=20>&nbsp;
<td valign=top>Example

<tr>
<td valign=top><i>ssh-user</i>
<td width=20>&nbsp;
<td valign=top>user on Owl manager with which <b>owl-transfer</b> will connect via <b>ssh</b>
<td width=20>&nbsp;
<td valign=top>sensor-ottawa@owl-manager.example.com

<tr>
<td valign=top><i>heartbeat</i>
<td width=20>&nbsp;
<td valign=top>URL to provide "heartbeat" data to manager
<td width=20>&nbsp;
<td valign=top>http://owl.example.com/cgi-bin/owl-sensor-heartbeat.cgi

</table>

<p>

In addition to these data, it would be a good idea for you and the sensor
administrator to agree on a name for the sensor.  This isn't required, but
it will probably make things easier for you both in the long run to refer
to the sensor by the same name.

<p>

The sensor name can be very generic, such as <i>sensor42</i>, <i>sensor-d</i>,
or <i>owl-us-east</i>.  It can also be very specific, such as
<i>washdc-1600-penn-ave-nw</i> or <i>cheltenham-bldg4</i>.  The intent is
to provide distinguishing information to the intended audience of the DNS
monitoring data.  You should use names that easily distinguish sensors and
are acceptable to the manager and sensor administrators.

<p>

<!----------------------------------->

<a name="4.2.5."></a>
<h3>4.2.5. Test Transfer from Sensor</h3>

<p>

At this point, the Owl manager should be ready to accept data from the Owl
sensor.  Coordinate with the sensor administrator to test data transfer.
After they have said that a data file (of any sort, it doesn't have to be an
Owl data file) has transferred, you must check the sensor's data directory
to ensure the file has arrived as expected.

<p>

Once the test file successfully appears in the new sensor's data directory,
the sensor is ready to start collecting data and transferring it to the
manager.  You must inform the sensor administrator of this, so they can start
the Owl sensor daemons.

<p>

<!----------------------------------->

<a name="4.2.6."></a>
<h3>4.2.6. Wait for Sensor Data</h3>

<p>

The sensor should now be in the process of collecting DNS response data.
You must now wait for sensor data to show up in the sensor's data directory.
The time this takes will depend on how frequently the sensor transfers data
to the manager.  This is a configuration option set by the sensor
administrator.

<p>

You will know when the sensor is transferring data because the new sensor's
data directory will start holding files whose names reflect the queries you
are expecting.  You may proceed when you have found files for all the
queries the sensor will be performing.

<p>

<!----------------------------------->

<a name="4.2.7."></a>
<h3>4.2.7. Build Nagios Sensor Objects</h3>

<p>

Once all the sensor's data directory contains files for all the queries
expected from the new sensor, Nagios objects must be built for those queries.
This may be done automatically using the <b>owl-newsensor</b> command.
A file containing these Nagios objects must be created, and it will be
added to the Nagios environment in
<a href="install-4-adding-sensor.html#4.2.8.1.">section 4.2.8.1</a>.

<p>

<b>owl-newsensor</b> can be used like this to create the Nagios objects:

<pre>
    $ owl-newsensor -out sensor8.cfg /owl/data/sensor8
</pre>

<p>

Passing <b>owl-newsensor</b> the <i>-heartbeat</i> option will cause an
object to be created that will allow Nagios to display heartbeat information
about the new sensor.

<p>

<!----------------------------------->

<a name="4.2.8."></a>
<h3>4.2.8. Nagios Modifications</h3>

<p>

Several Nagios configuration files must be modified to account for the new
sensor.  These changes will allow Nagios to start reporting current status
of the new sensor as well as saving historical data to be used in graphing.

<p>

<!------------------------->

<a name="4.2.8.1."></a>
<h3>4.2.8.1. <b>nagios.cfg</b></h3>

<p>

The following modifications must be made to the <b>nagios.cfg</b> file to
prepare Nagios for monitoring Owl sensor data.

<ul>

<li>Add the following entries to <b>nagios.cfg</b>:

<pre>
    cfg_file=/owl/nagios/etc/objects/owl-contacts.cfg
    cfg_file=/owl/nagios/etc/objects/owl-hosts.cfg
    cfg_file=/owl/nagios/etc/objects/owl-commands.cfg
    cfg_file=/owl/nagios/etc/objects/owl-services.cfg
</pre>

These files contain basic Nagios object definitions used by the Owl sensor
objects.  They should follow all the other standard <i>cfg_file</i> lines.

<p>

<li>Once Nagios object configuration files have been created for your sensors
(as described in
<a href="install-4-adding-sensor.html#4.2.7.">4.2.7</a>),
<b>nagios.cfg</b> must be modified to include
the new files.  Add a new <i>cfg_file</i> entry for each of the sensor object
files.  These entries will look something like this:
<pre>
    cfg_file=/owl/nagios/etc/objects/owl-sensor21.cfg
    cfg_file=/owl/nagios/etc/objects/sensor-london.cfg
</pre>
The sensor lines should follow all four of the <i>cfg_file</i> lines listed
in the previous point.

<p>

<li>Add the following line after the sensor <i>cfg_file</i> lines described
in the previous point.
<pre>
    cfg_file=/owl/etc/objects/owl-hostgroups.cfg
</pre>
Modification of the <b>owl-hostgroups.cfg</b> file is described below.

<p>

<li>Find the <i>service_perfdata_command</i> line and change it to:
"service_perfdata_command=service-perfdata-for-owl"

<p>

<li>Find the <i>service_perfdata_file_processing_command</i> line and change
it to:  "service_perfdata_file_processing_command=service-perfdata-for-owl"

<p>

</ul>

<p>

Examples for the <i>cfg_file</i> modifications may be found in
<b>nagios.cfg-owl.mods</b> in the Owl manager distribution.

<p>

<!------------------------->

<a name="4.2.8.2."></a>
<h3>4.2.8.2. <b>owl-hostgroups.cfg</b> (Nagios)</h3>

<p>

This file contains the Nagios <i>hostgroup</i> object that lists the Owl
sensor hosts.  All your Owl sensors should be listed in the "<i>DNS Response
Time Sensors</i>" object.

<p>

<ul>

<li>Add the new sensor name to the <i>members</i> field in the "<i>DNS Response
Time Sensors</i>" object.  The names must be separated by commas.

</ul>

<p>

You may add your own <i>hostgroup</i> objects to this file.  Use the "<i>DNS
Response Time Sensors</i>" object as a guide to create custom groups.  This
can be used, for example, to group all the sensors in a geographical region or
that are running a particular operating system.  The <i>hostgroup</i> object
allows you to group a set of hosts in a manner that makes sense for your
purposes.

<p>

<!----------------------------------->

<a name="4.2.9."></a>
<h3>4.2.9. Restart Nagios</h3>

<p>

Nagios must be restarted in order for it to see your new sensor's objects.

<p>

Prior to the restart, verify that your object modifications won't cause
a problem for Nagios.  Execute this command (assuming you are in the
directory containing the Nagios files):

<pre>
    $ nagios -v nagios.cfg
</pre>

It will read the configuration files and ensure they all look okay.
If there are problems, they must be resolved before Nagios is started.

<p>

Once the Nagios configuration file is validated and without problems, Nagios
may be restarted:

<pre>
    $ nagios stop
    $ nagios start
</pre>

<p>

It will probably take several minutes for Nagios to check all its services.
Clicking on the "Services" link in the left-hand sidebar will bring up the
configured services and you can watch the status of your new sensor.

<p>

<!*****************************************************************************>

<br><br>

<center>

<hr width="70%">

<p>

<!-------------------------------------->
<table width="100%">
<tr>
<td width="33%" align=left>
<a href="install-3-about-queries.html">Section 3.<br>An Interlude on<br>Sensor Queries</a>
<td width="33%" align=center>
<a href="install-0-intro.html">Owl Monitoring System -- Installation Guide</a>
<td width="33%" align=right>
<a href="install-5-define-graphs.html">Section 5.<br>Defining Graphs</a>
</tr>
</table>
<p>
<!-------------------------------------->

<a href="http:www.dnssec-tools.org">DNSSEC Tools</a>

</center>

<p>

</body>
</html>
