<html>

<head>
<title>Owl Monitoring System -- Installation Manual -- Owl Commands</title>
</head>

<body>

<p>

<center><h2>Owl Monitoring System</h2></center>
<center><h2>Installation Manual</h2></center>

<p>

<!*****************************************************************************>

<a name="7."></a>
<h3>7. Owl Commands</h3>

<p>

<!------------------------------------------------------------>

<table align=right width="30%">

<tr><td>&nbsp;<td><a href="install-7-commands.html#7.1">7.1</a><td>&nbsp;<td>Owl Sensor Commands</tr>
<tr><td>&nbsp;<td><a href="install-7-commands.html#7.2">7.2</a><td>&nbsp;<td>Owl Manager Commands</tr>
<tr><td width="10%">&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;</tr>

</table>

<p>

<!------------------------------------------------------------>

The Owl manager and the Owl sensor each have a number of Owl-specific
commands required for their operation.  This section provides a brief
overview of the commands available to each.  These are all Perl scripts
and have self-contained man pages, which contain greater details about
their use.  These scripts are intended to run as an unprivileged user.

<!------------------------------------------------------->

<a name="7.1"></a>
<h3>7.1 Owl Sensor Commands</h3>

<p>

This section briefly describes the software used on the Owl sensor hosts.

<ul>

<li><b>owl-archold</b><br>
This script archives previously archived Owl sensor data into monthly
archives.  A compressed <b>tar</b> file is created that contains the archived
data files from a particular month.  It should only be run on a particular
month's archive after the month has been completed.  This script is exactly
the same as the <b>owl-archold</b> on the Owl manager host.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-dataarch</b><br>
This script moves data from the Owl sensor's active data directory to a
year/month-specific archive directory.  This script archives Owl sensor
data by moving old data from the Owl data directory to an archive directory.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-dnstimer</b><br>
This script is the primary part of the Owl sensor.  It sends periodic DNS
requests to the root nameservers and records the time each request takes.
These query records are provided to the Owl manager for aggregation and
display.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-heartbeat</b><br>
This script periodically contacts the Owl manager to let it know the sensor
is still alive.  <b>owl-heartbeat</b> is an optional service for the benefit
of the Owl manager's administrators; the Owl sensor will run just fine if a
sensor's administrator elects not to run it.  This is intended to be a
<b>cron</b> job that runs once a minute, but other time periods may be chosen.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-sensord</b><br>
This script executes the <b>owl-dnstimer</b> and <b>owl-transfer</b> daemons
and monitors their execution.  If either of the daemons exits unexpectedly,
then <b>owl-sensord</b> will restart it.  In order to keep configuration or
other problems from causing rapid re-executions, <b>owl-sensord</b> will
temporarily suspend execution of one of the daemons if a certain number of
execution attempts fail within a short period of time.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-status</b><br>
This script gives the user a simple view of the status of the three primary
Owl sensor components.  It reports whether or not <b>owl-dnstimer</b>,
<b>owl-sensord</b>, and <b>owl-transfer</b> are running.  An additional
option shows the query parameters used by <b>owl-dnstimer</b> and the time
that each root nameserver was last queried.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-transfer</b><br>
This script periodically transfers Owl sensor data from the sensor host to
the manager host.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

</ul>

<p>

<!------------------------------------------------------->

<a name="7.2"></a>
<h3>7.2 Owl Manager Commands</h3>

<p>

This section briefly describes the software used on the Owl manager.

<ul>

<li><b>owl-archdata</b><br>
This script archives Owl sensor data for all the defined sensors.  Old data
are moved from the Owl data directory to an archive directory.
<b>owl-archdata</b> runs the <b>owl-dataarch-mgr</b> script for each sensor.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-archold</b><br>
This script archives previously archived Owl sensor data into monthly
archives.  A compressed <b>tar</b> file is created that contains the archived
data files from a particular month.  It should only be run on a particular
month's archive after the month has been completed.  This script is exactly
the same as the <b>owl-archold</b> on the Owl sensor hosts.  <b>owl-archold</b>
is executed by <b>owl-monthly</b>, but may be used on its own.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-dataarch-mgr</b><br>
This script archives Owl sensor data for a single sensor.  Old data are moved
from the Owl data directory to an archive directory.  <b>owl-dataarch-mgr</b>
is executed by <b>owl-archdata</b>, but may be used on its own.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-dnswatch</b><br>
This script retrieves Owl sensor DNS response data and makes it available to
the Nagios monitoring system.
<br>
This script should live in the Nagios <b>libexec</b> directory of plugins.

<p>

<li><b>owl-initsensor</b><br>
This script creates the required directories and heartbeat file when adding a
new Owl sensor.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-monthly</b><br>
This script archives previously archived Owl sensor data for all the sensors
defined for an Owl manager.  Compressed <b>tar</b> files are created that
contain the archived data files from a particular months, one <b>tar</b> file
for each sensor.  <b>owl-monthly</b> executes <b>owl-archold</b> to perform
the actually archiving.
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-newsensor</b><br>
This script creates required Nagios objects for a new Owl sensor.  The
objects to be created are based on the data files from the new sensor that
have arrived on the Owl manager. 
<br>
This script is assumed to live in the Owl user's home or <b>bin</b> directory.

<p>

<li><b>owl-perfdata</b><br>
This script is translates Owl sensor data from the format provided to Nagios
into the format required by the graphing and database software.
<br>
This script should live in the Nagios <b>libexec</b> directory of plugins.

<p>

<li><b>owl-sensor-heartbeat.cgi</b><br>
This script records a "heartbeat" for Owl sensors.  When a sensor runs this
script (by way of the Owl manager's web server), the time of the execution
will be recorded for that sensor.
<br>
This script should live in the <b>cgi-bin</b> directory for either the web
server or for Nagios.

<p>

<li><b>owl-stethoscope</b><br>
This script gathers Owl sensor "heartbeat" data and makes it available to the
Nagios monitoring system.
<br>
This script should live in the Nagios <b>libexec</b> directory of plugins.

<p>

</ul>

<p>

<!*****************************************************************************>

<br><br>

<center>

<hr width="70%">

<p>

<!-------------------------------------->
<table width="100%">
<tr>
<td width="33%" align=left>
<a href="install-6-adding-queries.html">Section 6.<br>Adding New Queries to<br>Existing Owl Sensors</a>
<td width="33%" align=center>
<a href="install-0-intro.html">Owl Monitoring System -- Installation Guide</a>
<td width="33%" align=right>
&nbsp;
</tr>
</table>
<p>
<!-------------------------------------->

<a href="http:www.dnssec-tools.org">DNSSEC Tools</a>

</center>

<p>

</body>
</html>
