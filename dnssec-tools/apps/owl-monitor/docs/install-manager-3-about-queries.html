<html>

<head>
<title>Owl Monitoring System -- Manager Installation Manual -- Sensor Queries</title>
</head>

<body>

<p>

<table>
<tr>
<td>
<img align=left src="owl-logo.jpg"><br>
<td width=30>&nbsp;
<td align=center valign=top>
<br>
<center><h2>Owl Monitoring System</h2></center>
<center><h2>Manager Installation Manual</h2></center>
</tr>
</table>

<p>

<!--- {docula start} --->
<!*****************************************************************************>

<a name="ig-manager-3."></a>
<h3>3. An Interlude on Sensor Queries</h3>

<p>

<!------------------------------------------------------------>
<!--- {docula end} --->

<table align=right width="35%">

<tr valign=top>
<td valign=top>

<tr valign=top><td>&nbsp;<td><a href="install-manager-3-about-queries.html#ig-manager-3.1.">3.1.</a><td>&nbsp;<td>Gathering and Storing Sensor Data</tr>
<tr valign=top><td>&nbsp;<td><a href="install-manager-3-about-queries.html#ig-manager-3.2.">3.2.</a><td>&nbsp;<td>Transferring Sensor Data</tr>
<tr valign=top><td>&nbsp;<td><a href="install-manager-3-about-queries.html#ig-manager-3.3.">3.3.</a><td>&nbsp;<td>Sensor Heartbeats</tr>
<tr valign=top><td width=20>&nbsp;<td width=20>&nbsp;<td>&nbsp;<td>&nbsp;</tr>

</table>

<p>

<!------------------------------------------------------------>

<!--- {docula start} --->
Before running your Owl Monitoring System, you must consider a number of
questions.  How many Owl sensors will be providing data to the Owl manager?
How many queries will the sensors be performing?  What queries will the
sensors be performing?  Will each sensor be performing the same queries?  Will
the sensor be providing "heartbeat" information to the manager?  Who will
transfer the sensor data to the manager?  These questions are important for
the sensor administrator, but they are critical for the manager administrator.

<p>

<!*********************************************************>

<a name="ig-manager-3.1."></a>
<h3>3.1. Gathering and Storing Sensor Data</h3>

A query consists of three parts:  a nameserver, a target host, and a query
type.  Responses to each query will be kept in their own datafile.  The
amount of data generated by each sensor will depend on the number of queries
and the frequency with which the queries are performed.

<p>

The sensors will have to gather the data and more queries will result in more
data that will be collected.  The data will all have to be transferred from
the sensor to the manager.  If the manager is configured for graphing, then
data from each query will be stored in its own database.  These databases can
be quite large, so the manager host must have a good amount of available disk
space.

<p>

The administrators of an Owl sensor and the Owl manager (if they are different
people) must coordinate the queries that the sensor will be performing.  The
manager's administrator can request that a set of queries be performed, but it
is up to the sensor's administrator to actually configure the sensor for the
queries.  The manager is effectively at the mercy of the sensor.

<p>

Sensor data filenames contain metadata about the sensor data contained
therein.  Therefore, the filenames will reflect the queries that generated
the files.  The fields are separated by commas and have this format:

<pre>
        121129.1701,seattle-sensor,example.com,a.root-servers.net,A.dns
        121129.1701,seattle-sensor,example.com,m.root-servers.net,A.dns
        121129.1701,seattle-sensor,example.com,m.root-servers.net,NS.dns
        121129.1701,portland-sensor,example.com,a.root-servers.net,A.dns
</pre>

<p>

Breaking out the fields of the last example above gives this table:

<p>

<table>

<tr>
<td valign=top width=50>&nbsp;
<td valign=top><b>Field</b>
<td valign=top width=20>&nbsp;
<td valign=top><b>Purpose</b>
<td valign=top width=20>&nbsp;
<td valign=top><b>Example</b>

<tr>
<td valign=top>&nbsp;
<td valign=top>Timestamp
<td valign=top>&nbsp;
<td valign=top>File creation timestamp; (YYMMDD.hhmm)
<td valign=top>&nbsp;
<td valign=top>121129.1701

<tr>
<td valign=top>&nbsp;
<td valign=top>Sensor Name
<td valign=top>&nbsp;
<td valign=top>Name of sensor that recorded data
<td valign=top>&nbsp;
<td valign=top>portland-sensor

<tr>
<td valign=top>&nbsp;
<td valign=top>Target Name
<td valign=top>&nbsp;
<td valign=top>Host whose name was target of DNS lookups
<td valign=top>&nbsp;
<td valign=top>example.com

<tr>
<td valign=top>&nbsp;
<td valign=top>Nameserver Name
<td valign=top>&nbsp;
<td valign=top>Name of queried nameserver
<td valign=top>&nbsp;
<td valign=top>a.root-servers.net

<tr>
<td valign=top>&nbsp;
<td valign=top>Query Type
<td valign=top>&nbsp;
<td valign=top>Type of DNS query
<td valign=top>&nbsp;
<td valign=top>A

<tr>
<td valign=top>&nbsp;
<td valign=top>File suffix
<td valign=top>&nbsp;
<td valign=top>File suffix
<td valign=top>&nbsp;
<td valign=top>.dns

</table>

<p>

<!*********************************************************>

<a name="ig-manager-3.2."></a>
<h3>3.2. Transferring Sensor Data</h3>

<p>

The Owl Monitoring System provides utilities to transfer sensor data from
the sensor to the manager.  One utility, <b>owl-transfer</b> runs on the
sensor and transfers the data to the manager.  The other utility,
<b>owl-transfer-mgr</b> runs on the manager and transfers the data from
the sensor.  Both utilities are front-ends for the <b>rsync</b> program
and run using an <b>ssh</b>-initiated connection.

<p>

In both cases, the transferring host <u>must</u> be able to <b>ssh</b> into
the remote host without a password.  The FOSS <b>rrsync</b> ("restricted
rsync", written by Joe Smith, modified by Wayne Davison) is used to restrict
the transferring host's access to the remote host.

<p>

The administrators of the sensor and the manager must agree on which host
will be transferring data to the manager.  The appropriate SSH public keys
from the transferring host must be placed on the other host, so that the
password-less <b>ssh</b> (as described above) may be performed.

<p>

An Owl system with multiple sensors may have a mixed transfer configuration.
In such a system, some sensors will transfer their data to the manager, while
the manager will transfer data from other sensors.

<p>

<!*********************************************************>

<a name="ig-manager-3.3."></a>
<h3>3.3. Sensor Heartbeats</h3>

The "heartbeat" facility allows an Owl sensor to periodically contact a
manager to let it know that the sensor is still alive and network accessible.
The heartbeat is sent by contacting a particular webpage on the Owl manager.

<p>

The heartbeat facility is not necessary for Owl operation and Owl runs
perfectly well without it.  However, it can provide a useful assurance to
the manager administrator that the sensor is still working.  Enabling this
facility on the sensor is at the discretion of the sensor administrator.
Since this requires a webserver to be running on the manager host, that
aspect is at the discretion of the manager administrator.

<p>

<!*****************************************************************************>
<!--- {docula end} --->


<!*****************************************************************************>

<br><br>

<center>

<hr width="70%">

<p>

<!-------------------------------------->
<table width="100%">
<tr>
<td width="33%" align=left>
<a href="install-manager-2-installation.html">Section 2.<br>Installation</a>
<td width="33%" align=center>
<a href="install-sensor.html">Owl Monitoring System<br>Manager Installation Manual</a>
<td width="33%" align=right>
<a href="install-manager-4-adding-sensor.html">Section 4.<br>Adding Sensors</a>
</tr>
</table>
<p>
<!-------------------------------------->

<a href="http:www.dnssec-tools.org">DNSSEC Tools</a>

</center>

<p>

</body>
</html>
