#
# Copyright 2004 Sparta, Inc.  All rights reserved.
# See the COPYING file distributed with this software for details.
#

CC= gcc
CFLAGS= -g -I@SPF2_INCDIR@ -I@SENDMAIL_SRCDIR@/include -I@SENDMAIL_SRCDIR@
LIBS=-lmilter -pthread -lresolv
LIBPATH=-L/usr/lib -L/usr/local/lib

all: dnssec-milter validator

dnssec-milter: dnssec-milter.o validator.o
	$(CC) -o dnssec-milter dnssec-milter.o validator.o $(LIBPATH) $(LIBS)

dnssec-milter.o: dnssec-milter.c
	$(CC) $(CFLAGS) -c dnssec-milter.c

validator: validator.o test.o
	$(CC) -o validator validator.o test.o $(LIBPATH) $(LIBS)

validator.o: validator.c
	$(CC) -c validator.c

test.o: test.c
	$(CC) -c test.c

clean:
	\rm -rf *.o dnssec-milter validator
