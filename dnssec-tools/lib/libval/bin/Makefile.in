
INCL= ../../libsres
LIB= ../../libsres
CFLAGS_EX=-I$(INCL) -I.. -I../../libsres/include 
EXTRALIBS=-lcrypto -lpthread
LOCALLIBS=../libval.la ../../libsres/libsres.la
LDFLAGS_EX=$(LOCALLIBS) $(EXTRALIBS)

SRC=  	val_resquery.c \
	crypto/val_dsasha1.c

# can't use gmake conventions to translate SRC -> OBJ for portability
OBJ=  	validator_driver.o \
	getaddr.o \
	gethost.o

LOBJ=   validator_driver.lo \
	getaddr.lo \
	gethost.lo

VALIDATOR=validate
GETHOST=gethost
GETADDR=getaddr

all: $(VALIDATOR) $(GETHOST) $(GETADDR)

clean:
	$(RM) -f $(LOBJ) $(OBJ) $(VALIDATOR) $(GETHOST) $(GETADDR)

$(VALIDATOR): validator_driver.lo $(LOCALLIBS)
	$(LIBTOOLLD) -o $@ validator_driver.lo $(LDFLAGS) $(LIBS)

$(GETHOST): gethost.lo $(LOCALLIBS)
	$(LIBTOOLLD) -o $@ gethost.lo $(LDFLAGS) $(LIBS)

$(GETADDR): getaddr.lo $(LOCALLIBS)
	$(LIBTOOLLD) -o $@ getaddr.lo $(LDFLAGS) $(LIBS)

install:
	$(MKPATH) $(bindir)
	$(LIBTOOLIN) validate $(bindir)	
