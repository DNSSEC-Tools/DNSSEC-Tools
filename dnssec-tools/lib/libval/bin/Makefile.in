
INCL= ../../libsres
LIB= ../../libsres
CFLAGS_EX=-I$(INCL) -I.. -I../../libsres/include 
EXTRALIBS=-lval -lsres -lcrypto -lpthread
LDFLAGS_EX=-L.. -L$(LIB) $(EXTRALIBS)

SRC=  	val_resquery.c \
	crypto/val_dsasha1.c

# can't use gmake conventions to translate SRC -> OBJ for portability
OBJ=  	validator_driver.o \
	getaddr.o \
	gethost.o

LOBJ=   validator_driver.lo \
	getaddr.lo \
	gethost.lo

VALIDATOR=validate
GETHOST= gethost
GETADDR= getaddr

all: $(VALIDATOR) $(GETHOST) $(GETADDR)

clean:
	$(RM) -f $(LOBJ) $(OBJ) $(VALIDATOR) $(GETHOST) $(GETADDR)

$(VALIDATOR): validator_driver.lo
	$(LIBTOOLLD) -o $@ validator_driver.lo $(LDFLAGS)

$(GETHOST): gethost.lo
	$(LIBTOOLLD) -o $@ gethost.lo $(LDFLAGS)

$(GETADDR): getaddr.lo
	$(LIBTOOLLD) -o $@ getaddr.lo $(LDFLAGS)

install:
	$(INSTALL) validate $(bindir)	
