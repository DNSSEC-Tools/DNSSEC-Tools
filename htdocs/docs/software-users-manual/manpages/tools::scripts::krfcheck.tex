\clearpage

\subsubsection{\bf krfcheck}

{\bf NAME}

\cmd{krfcheck} - Check a DNSSEC-Tools {\it keyrec} file for problems and
inconsistencies.

{\bf SYNOPSIS}

\begin{verbatim}
    krfcheck [options] keyrec-file
\end{verbatim}

{\bf DESCRIPTION}

\cmd{krfcheck} checks a {\it keyrec} file for problems, potential problems,
and inconsistencies.

Recognized problems include:

\begin{description}

\item {\it no zones defined}\verb" "

The {\it keyrec} file does not contain any zone {\it keyrec}s.

\item {\it no sets defined}\verb" "

The {\it keyrec} file does not contain any set {\it keyrec}s.

\item {\it no keys defined}\verb" "

The {\it keyrec} file does not contain any key {\it keyrec}s.

\item {\it unknown zone {\it keyrec}s}\verb" "

A set {\it keyrec} or a key {\it keyrec} references a non-existent zone
{\it keyrec}.

\item {\it missing key from zone {\it keyrec}}\verb" "

A zone {\it keyrec} does not have both a KSK key and a ZSK key.

\item {\it missing key from set {\it keyrec}}\verb" "

A key listed in a set {\it keyrec} does not have a key {\it keyrec}.

\item {\it expired zone {\it keyrec}s}\verb" "

A zone has expired.

\item {\it mislabeled key}\verb" "

A key is labeled as a KSK (or ZSK) and its owner zone has it labeled as the
opposite.

\item {\it invalid zone data values}\verb" "

A zone's {\it keyrec} data are checked to ensure that they are valid.  The
following conditions are checked:  existence of the zone file, existence of
the KSK file, existence of the KSK and ZSK directories, the end-time is
greater than one day, and the seconds-count and date string match.

\item {\it invalid key data values}\verb" "

A key's {\it keyrec} data are checked to ensure that they are valid.  The
following conditions are checked:  valid encryption algorithm, key length
falls within algorithm's size range, random generator file exists, and the
seconds-count and date string match.

\end{description}

Recognized potential problems include:

\begin{description}

\item {\it imminent zone expiration}\verb" "

A zone will expire within one week. 

\item {\it odd zone-signing date}\verb" "

A zone's recorded signing date is later than the current system clock.

\item {\it orphaned keys}\verb" "

A key {\it keyrec} is unreferenced by any set {\it keyrec}.

\item {\it missing key directories}\verb" "

A zone {\it keyrec}'s key directories ({\it kskdirectory} or {\it zskdirectory}) does
not exist.

\end{description}

Recognized inconsistencies include:

\begin{description}

\item {\it key-specific fields in a zone {\it keyrec}}\verb" "

A zone {\it keyrec} contains key-specific entries.  To allow for site-specific
extensibility, \cmd{krfcheck} does not check for undefined {\it keyrec} fields.

\item {\it zone-specific fields in a key {\it keyrec}}\verb" "

A key {\it keyrec} contains zone-specific entries.  To allow for site-specific
extensibility, \cmd{krfcheck} does not check for undefined {\it keyrec} fields.

\item {\it mismatched zone timestamp}\verb" "

A zone's seconds-count timestamp does not match its textual timestamp.

\item {\it mismatched set timestamp}\verb" "

A set's seconds-count timestamp does not match its textual timestamp.

\item {\it mismatched key timestamp}\verb" "

A key's seconds-count timestamp does not match its textual timestamp.

\end{description}

{\bf OPTIONS}

\begin{description}

\item {\it -zone}\verb" "

Only perform checks of zone {\it keyrec}s.  This option may not be combined
with the {\bf -set} or {\bf -key} options.

\item {\it -set}\verb" "

Only perform checks of set {\it keyrec}s.  This option may not be combined
with the {\bf -zone} or {\bf -key} options.

\item {\it -key}\verb" "

Only perform checks of key {\it keyrec}s.  This option may not be combined
with the {\bf -set} or {\bf -zone} options.

\item {\it -count}\verb" "

Display a final count of errors.

\item {\it -quiet}\verb" "

Do not display messages.  This option supersedes the setting of the {\it -v}
option.

\item {\it -verbose}\verb" "

Display many messages.  This option is subordinate to the {\it -q} option.

\item {\it -Version}\verb" "

Display the \cmd{krfcheck} version number and exit.

\item {\it -help}\verb" "

Display a usage message.

\end{description}

{\bf SEE ALSO}

\cmd{cleankrf(8)},
\cmd{fixkrf(8)},
\cmd{lskrf(1)},
\cmd{zonesigner(8)}

\perlmod{Net::DNS::SEC::Tools::keyrec.pm(3)}

\path{keyrec(5)}
