\clearpage

\subsubsection{keyarch}

{\bf NAME}

\cmd{keyarch} - DNSSEC-Tools daemon to archive old KSK and ZSK keys

{\bf SYNOPSIS}

\begin{verbatim}
  keyarch [options] <keyrec_file | rollrec_file>
\end{verbatim}

{\bf DESCRIPTION}

The \cmd{keyarch} program archives old KSK and ZSK keys.  Keys are considered
old if they are obsolete and are marked as either {\it kskobs} or {\it zskobs}.
Archived keys are prefixed with the seconds-since-epoch as a means of
distinguishing a zone's keys that have the same five digit number.

If the required file argument is a \struct{keyrec} file, then expired keys
listed in that file are archived.  If the file argument is a \struct{rollrec}
file, the \struct{keyrec} files of the zones in that file are checked for
expired keys.

If the {\it -zone} option is given, then only obsolete keys belonging to the
specified zone will be archived.

The archive directory is either zone-specific (listed in the zone's
\struct{keyrec} record in the zone's \struct{keyrec} file) or the default
archive directory given in the DNSSEC-Tools configuration file.

The count of archived keys is given as the program's exit code.  Error exit
codes are negative. 

{\bf OPTIONS}

The following options are recognized:

\begin{description}

\item {\bf -zone zone\_file}\verb" "

Name of the zone whose KSKs will be archived.  If this is not given, then
all the zones defined in the \struct{rollrec} file will be checked.

\item {\bf -kskonly}\verb" "

Only archive KSK keys.

\item {\bf -zskonly}\verb" "

Only archive ZSK keys.

\item {\bf -quiet}\verb" "

No output will be given.

\item {\bf -verbose}\verb" "

Verbose output will be given.

\item {\bf -help}\verb" "

Display a usage message.

\item {\bf -Version}\verb" "

Display the program versions.

\end{description}

{\bf EXIT VALUES}

On success, \cmd{keyarch}'s exit code is the number of keys archived.

\cmd{keyarch} has a 0 exit code if the help message is given.

\cmd{keyarch} has a negative exit code if an error is encountered.

{\bf SEE ALSO}

rollerd(8),
zonesigner(8)

Net::DNS::SEC::Tools::conf.pm(3),
Net::DNS::SEC::Tools::dnssectools.pm(3), \\
Net::DNS::SEC::Tools::defaults.pm(3),
Net::DNS::SEC::Tools::keyrec.pm(3), \\
Net::DNS::SEC::Tools::rollrec.pm(3)

keyrec(5),
rollrec(5)

