<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Manual ZSK Rollover</title><meta name="generator" content="DocBook XSL Stylesheets V1.70.1"><link rel="start" href="index.html" title="Step-by-Step DNSSEC-Tools Operator Guidance Document"><link rel="up" href="step-rollover-zsk.html" title="Chapter 9. Current ZSK Rollover (Pre-Publish Scheme)"><link rel="prev" href="step-rollover-zsk-tools.html" title="ZSK Rollover Using DNSSEC-Tools"><link rel="next" href="step-rollover-ksk.html" title="Chapter 10. KSK Rollover (Double-Signature Scheme)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Manual ZSK Rollover</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="step-rollover-zsk-tools.html">Prev</a> </td><th width="60%" align="center">Chapter 9. Current ZSK Rollover (Pre-Publish Scheme)</th><td width="20%" align="right"> <a accesskey="n" href="step-rollover-ksk.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="step-rollover-zsk-manual"></a>Manual ZSK Rollover</h2></div></div></div><p>The steps for performing a manual ZSK rollover are given
        below.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-1"></a>Ensure that Sufficient Time has Elapsed Since the Last
            Rollover</h3></div></div></div><p>The time between rollovers has to be at least twice the
            maximum zone TTL period. This is the largest TTL in the entire
            zone file multiplied by two.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-2"></a>Sign Zone with the KSK and Published ZSK</h3></div></div></div></div><p>Follow steps ??? - ??? if the zone does no delegation. Follow
        steps ??? - ??? if the zone does delegation. The ZSK used in the
        signing process in Section ??? or ??? must be the key that is marked
        as the Published key (P) in the key-tag table. The KSK used as input
        to <span><strong class="command">dnssec-signzone</strong></span> does not change, so the keyset
        does not change and does not have to be re-sent to the parent.</p><p>Record the signature expiry date in the key-tag table.</p><div class="table"><a name="id939657"></a><p class="title"><b>Table 9.1. </b></p><div class="table-contents"><table border="1"><colgroup><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col></colgroup><tbody><tr><td rowspan="2" align="center">
                            <span class="bold"><strong>Zone</strong></span>
                        </td><td colspan="4" align="center">
                            <span class="bold"><strong>ZSKs</strong></span>
                        </td><td colspan="4" align="center">
                            <span class="bold"><strong>KSKs</strong></span>
                        </td><td rowspan="2" align="center">
                            <span class="bold"><strong>Exp</strong></span>
                        </td></tr><tr><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td></tr><tr><td rowspan="2" align="center">
                            <span class="emphasis"><em>zone-name</em></span>
                        </td><td align="center">
                            <span class="underline">zsktag-cur</span>
                        </td><td align="center">1024</td><td align="center">
                            <span class="underline">date</span>
                        </td><td align="center">C</td><td rowspan="2" align="center">
                            <span class="underline">ksktag</span>

                            <span class="underline"></span>
                        </td><td rowspan="2" align="center">2048</td><td rowspan="2" align="center">
                            <span class="underline">date</span>

                            <span class="underline"></span>
                        </td><td rowspan="2" align="center">C</td><td rowspan="2" align="center">
                            <span class="underline">date</span>

                            <span class="underline"></span>
                        </td></tr><tr><td align="center">
                            <span class="underline">zsktag-pub</span>
                        </td><td align="center">1024</td><td align="center">
                            <span class="underline">date</span>
                        </td><td align="center">P</td></tr></tbody></table></div></div><br class="table-break"><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-3"></a>Reload the Zone</h3></div></div></div><p>The <span><strong class="command">rndc</strong></span> will reload the name server
            configuration files and the zone contents. The name server process
            is assumed to be already running.</p><table class="simplelist" border="0" summary="Simple list"><tr><td>
                    <span><strong class="command"># rndc reload zone-name</strong></span>
                </td></tr><tr><td>
                    <span><strong class="command">#</strong></span>
                </td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-4"></a>Wait for Old Zone Data to Expire from Caches</h3></div></div></div><p>Wait at least twice the maximum zone TTL period for the old
            zone data to expire from name server caches. This is the largest
            TTL in the entire zone file multiplied by two. This will also
            allow the new data to propagate.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-5"></a>Generate a New ZSK</h3></div></div></div><p>Generate a new ZSK as described in Section ???. Update the
            Key-Tag Table with the new ZSK and set its status to New
            (N).</p><div class="table"><a name="id939992"></a><p class="title"><b>Table 9.2. </b></p><div class="table-contents"><table border="1"><colgroup><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col></colgroup><tbody><tr><td rowspan="2" align="center">
                                <span class="bold"><strong>Zone</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>ZSKs</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>KSKs</strong></span>
                            </td><td rowspan="2" align="center">
                                <span class="bold"><strong>Exp</strong></span>
                            </td></tr><tr><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td></tr><tr><td rowspan="3" align="center">
                                <span class="emphasis"><em>zone-name</em></span>

                                <span class="emphasis"><em></em></span>

                                <span class="emphasis"><em></em></span>
                            </td><td align="center">
                                <span class="underline">zsktag-cur</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">C</td><td rowspan="3" align="center">
                                <span class="underline">ksktag</span>

                                <span class="underline"></span>

                                <span class="underline"></span>
                            </td><td rowspan="3" align="center">2048</td><td rowspan="3" align="center">
                                <span class="underline">date</span>

                                <span class="underline"></span>

                                <span class="underline"></span>
                            </td><td rowspan="3" align="center">C</td><td align="center">
                                <span class="underline">date</span>
                            </td></tr><tr><td align="center">
                                <span class="underline">zsktag-pub</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">P</td><td align="center">
                                <span class="underline"></span>
                            </td></tr><tr><td align="center">
                                <span class="underline">zsktag-new</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">N</td><td align="center">
                                <span class="underline"></span>
                            </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-6"></a>Modify the Zone File</h3></div></div></div><p>The zone file must be modified to account for the key
            changes. The Current ZSK must be deleted and the New ZSK must be
            added. Also, the SOA serial number must be changed so that the
            zone file's new contents will be recognized.</p><p>The required key changes are made by modifying the <span class="bold"><strong>$INCLUDE</strong></span> lines at the end of the file. The
            <span class="bold"><strong>$INCLUDE</strong></span> line for the Current ZSK
            must be deleted. A <span class="bold"><strong>$INCLUDE</strong></span> line
            for the New ZSK must be added.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-7"></a>Update the Key-Tags Table</h3></div></div></div><p>Update the key-tags table to reflect the changed key status.
            Delete the old Current ZSK. Change the status of the Published ZSK
            to Current. Change the status of the New ZSK to Published.</p><div class="table"><a name="id940352"></a><p class="title"><b>Table 9.3. </b></p><div class="table-contents"><table border="1"><colgroup><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col></colgroup><tbody><tr><td rowspan="2" align="center">
                                <span class="bold"><strong>Zone</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>ZSKs</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>KSKs</strong></span>
                            </td><td rowspan="2" align="center">
                                <span class="bold"><strong>Exp</strong></span>
                            </td></tr><tr><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td></tr><tr><td rowspan="5" align="center">
                                <span class="emphasis"><em>zone-name</em></span>

                                <span class="emphasis"><em></em></span>

                                <span class="emphasis"><em></em></span>
                            </td><td align="center">
                                <span class="underline">zsktag-cur</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">C</td><td rowspan="5" align="center">
                                <span class="underline">ksktag</span>

                                <span class="underline"></span>

                                <span class="underline"></span>
                            </td><td rowspan="5" align="center">2048</td><td rowspan="5" align="center">
                                <span class="underline">date</span>

                                <span class="underline"></span>

                                <span class="underline"></span>
                            </td><td rowspan="5" align="center">C</td><td rowspan="2" align="center">
                                <span class="underline">date</span>

                                <span class="underline"></span>
                            </td></tr><tr><td rowspan="2" align="center">
                                <span class="underline">zsktag-pub</span>
                            </td><td rowspan="2" align="center">1024</td><td rowspan="2" align="center">
                                <span class="underline">date</span>
                            </td><td rowspan="2" align="center">
                                <p>P</p>

                                <p>C</p>
                            </td></tr><tr><td align="center"> </td></tr><tr><td rowspan="2" align="center">
                                <span class="underline">zsktag-new</span>
                            </td><td rowspan="2" align="center">1024</td><td rowspan="2" align="center">
                                <span class="underline">date</span>
                            </td><td rowspan="2" align="center">
                                <p>N</p>

                                <p>P</p>
                            </td><td align="center">
                                <span class="underline"></span>
                            </td></tr><tr><td align="center"> </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-8"></a>Sign the Zone with the KSK and Current ZSK</h3></div></div></div><p>Follow the steps in sections ??? - ??? if the zone does no
            delegation. Follow the steps in sections ??? - ??? if the zone
            does delegation. The ZSK used in the signing process in ??? or ???
            must be the key that is marked as the Current key (C) in the
            key-tag table (this was the older Published key.) The KSK used as
            input to <span class="bold"><strong>dnssec-signzone</strong></span> does not
            change, so the keyset does not change and does not have to be
            re-sent to the parent.</p><p>Record the signature expiry date in the Key-Tag
            table.</p><div class="table"><a name="id940723"></a><p class="title"><b>Table 9.4. </b></p><div class="table-contents"><table border="1"><colgroup><col><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col></colgroup><tbody><tr><td rowspan="2" align="center">
                                <span class="bold"><strong>Zone</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>ZSKs</strong></span>
                            </td><td colspan="4" align="center">
                                <span class="bold"><strong>KSKs</strong></span>
                            </td><td rowspan="2" align="center">
                                <span class="bold"><strong>Exp</strong></span>
                            </td></tr><tr><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td><td align="center">Tag</td><td align="center">Size</td><td align="center">Creat</td><td align="center">S</td></tr><tr><td rowspan="2" align="center">
                                <span class="emphasis"><em>zone-name</em></span>
                            </td><td align="center">
                                <span class="underline">zsktag-pub</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">C</td><td rowspan="2" align="center">
                                <span class="underline">ksktag</span>

                                <span class="underline"></span>
                            </td><td rowspan="2" align="center">2048</td><td rowspan="2" align="center">
                                <span class="underline">date</span>

                                <span class="underline"></span>
                            </td><td rowspan="2" align="center">C</td><td rowspan="2" align="center">
                                <span class="underline">date</span>

                                <span class="underline"></span>
                            </td></tr><tr><td align="center">
                                <span class="underline">zsktag-new</span>
                            </td><td align="center">1024</td><td align="center">
                                <span class="underline">date</span>
                            </td><td align="center">P</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-9"></a>Reload the Zone</h3></div></div></div><p>The <span><strong class="command">rndc</strong></span> will reload the name server
            configuration files and the zone contents. The name server process
            is assumed to be already running.</p><table class="simplelist" border="0" summary="Simple list"><tr><td>
                    <span><strong class="command"># rndc reload zone-name</strong></span>
                </td></tr><tr><td>
                    <span><strong class="command">#</strong></span>
                </td></tr></table></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="step-rollover-zsk-manual-10"></a>Dispose of the Old Zone Key</h3></div></div></div><p>Delete the old ZSK's <span class="emphasis"><em>.private</em></span> and
            <span class="emphasis"><em>.key</em></span> files.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="step-rollover-zsk-tools.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="step-rollover-zsk.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="step-rollover-ksk.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ZSK Rollover Using DNSSEC-Tools </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 10. KSK Rollover (Double-Signature Scheme)</td></tr></table></div></body></html>
