<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>rollinit - Create new I&lt;rollrec&gt; records for a DNSSEC-Tools I&lt;rollrec&gt; file.</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#zonefile_and_keyrec_fields">ZONEFILE and KEYREC FIELDS</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#examples">EXAMPLES</a></li>
	<ul>

		<li><a href="#example_1__one_domain__no_options">Example 1.  One domain, no options</a></li>
		<li><a href="#example_2__one_domain__zone_option">Example 2.  One domain, -zone option</a></li>
		<li><a href="#example_3__one_domain__keyrec_option">Example 3.  One domain, -keyrec option</a></li>
		<li><a href="#example_4__one_domain__zone_and_keyrec_options">Example 4.  One domain, -zone and -keyrec options</a></li>
		<li><a href="#example_5__one_domain__skip_option">Example 5.  One domain, -skip option</a></li>
		<li><a href="#example_6__multiple_domains__no_options">Example 6.  Multiple domains, no options</a></li>
		<li><a href="#example_7__multiple_domains__zone_option">Example 7.  Multiple domains, -zone option</a></li>
		<li><a href="#example_8__multiple_domains__keyrec_option">Example 8.  Multiple domains, -keyrec option</a></li>
		<li><a href="#example_9__multiple_domains__zone_and_keyrec_options">Example 9.  Multiple domains, -zone and -keyrec options</a></li>
		<li><a href="#example_10__single_domain__zone_and_keyrec_options_with_template">Example 10.  Single domain, -zone and -keyrec options with template</a></li>
		<li><a href="#example_11__multiple_domains__zone_and_keyrec_options_without_template">Example 11.  Multiple domains, -zone and -keyrec options without template</a></li>
	</ul>

	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>rollinit - Create new <em>rollrec</em> records for a DNSSEC-Tools <em>rollrec</em> file.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
  rollinit [options] &lt;zonename1&gt; ... &lt;zonenameN&gt;</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>rollinit</strong> creates new <em>rollrec</em> entries for a <em>rollrec</em> file.  This
<em>rollrec</em> file will be used by <strong>rollerd</strong> to manage key rollover for
the named domains.</p>
<p>A <em>rollrec</em> entry has this format:</p>
<pre>
    roll &quot;example.com&quot;
        zonefile        &quot;example.com.signed&quot;
        keyrec          &quot;example.com.krf&quot;
        kskphase        &quot;0&quot;
        zskphase        &quot;0&quot;
        administrator   &quot;bob@bobhost.example.com&quot;
        directory       &quot;/var/dns/zones/example.com&quot;
        loglevel        &quot;phase&quot;
        ksk_rolldate    &quot; &quot;
        ksk_rollsecs    &quot;0&quot;
        zsk_rolldate    &quot; &quot;
        zsk_rollsecs    &quot;0&quot;
        maxttl          &quot;604800&quot;
        display         &quot;1&quot;
        phasestart      &quot;Mon Jan 9 16:00:00 2006&quot;</pre>
<p>The <em>zonefile</em> and <em>keyrec</em> fields are set according to command-line options
and arguments.  The manner of generating the <em>rollrec</em>'s actual values is a
little complex and is described in the ZONEFILE And KEYREC FIELDS section
below.</p>
<p>The <em>administrator</em> field is set to <a href="mailto:``bob@bobhost.example.com''">``bob@bobhost.example.com''</a> to indicate
that the email messages to the zone's administrator should be sent to
<a href="mailto:``bob@bobhost.example.com''.">``bob@bobhost.example.com''.</a></p>
<p>The <em>directory</em> field is set to ``/var/dns/zones/example.com'' to indicate
that the files for this zone (zone file, signed zone file, <em>keyrec</em> file,
etc.) should be found in <strong>/var/dns/zones/example.com</strong>.</p>
<p>The <em>loglevel</em> field is set to ``phase'' to indicate that <strong>rollerd</strong> should
only log phase-level (and greater) log messages for this zone.</p>
<p>The <em>kskphase</em> field is set to 0 to indicate that the zone is in
normal operation (non-rollover) for KSK keys.
The <em>zskphase</em> field is set to 0 to indicate that the zone is in
normal operation (non-rollover) for ZSK keys.</p>
<p>The <em>ksk_rolldate</em> and <em>ksk_rollsecs</em> fields are set to indicate that the
zone has not yet undergone KSK rollover.</p>
<p>The <em>zsk_rolldate</em> and <em>zsk_rollsecs</em> fields are set to indicate that the
zone has not yet undergone ZSK rollover.</p>
<p>The <em>display</em> field is set to indicate that <strong>blinkenlights</strong> should display
the record.  The <em>maxttl</em> and <em>phasestart</em> fields are set to dummy values.</p>
<p>The keywords <strong>roll</strong> and <strong>skip</strong> indicate whether <strong>rollerd</strong> should process
or ignore a particular <em>rollrec</em> entry.  <strong>roll</strong> records are created by
default; <strong>skip</strong> entries are created if the <em>-skip</em> option is specified.</p>
<p>The newly generated <em>rollrec</em> entries are written to standard output,
unless the <em>-out</em> option is specified.</p>
<p>
</p>
<hr />
<h1><a name="zonefile_and_keyrec_fields">ZONEFILE and KEYREC FIELDS</a></h1>
<p>The <em>zonefile</em> and <em>keyrec</em> fields may be given by using the <em>-zone</em>
and <em>-keyrec</em> options, or default values may be used.</p>
<p>The default values use the <em>rollrec</em>'s zone name, taken from the command
line, as a base.  <strong>.signed</strong> is appended to the domain name for the zone file;
<strong>.krf</strong> is appended to the domain name for the <em>keyrec</em> file.</p>
<p>If <em>-zone</em> or <em>-keyrec</em> are specified, then the options values are
used in one of two ways:</p>
<ol>
<li><strong><a name="item_a_single_domain_name_is_given_on_the_command_line_">A single domain name is given on the command line.</a></strong>

<p>The option values for <em>-zone</em> and/or <em>-keyrec</em> are used for the actual
<em>rollrec</em> fields.</p>
</li>
<li><strong><a name="item_multiple_domain_names_are_given_on_the_command_lin">Multiple domain names are given on the command line.</a></strong>

<p>The option values for <em>-zone</em> and/or <em>-keyrec</em> are used as templates
for the actual <em>rollrec</em> fields.  The option values must contain 
the string <strong>=</strong>.  This string is replaced by the domain whose <em>rollrec</em>
is being created.</p>
</li>
</ol>
<p>See the EXAMPLES section for examples of how options are used by <strong>rollinit</strong>.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<p><strong>rollinit</strong> may be given the following options:</p>
<dl>
<dt><strong><a name="item__2dzone_zonefile"><em>-zone zonefile</em></a></strong>

<dd>
<p>This specifies the value of the <em>zonefile</em> field.
See the ZONEFILE And KEYREC FIELDS and EXAMPLES sections for more details.</p>
</dd>
</li>
<dt><strong><a name="item__2dkeyrec_keyrec_2dfile"><em>-keyrec keyrec-file</em></a></strong>

<dd>
<p>This specifies the value of the <em>keyrec</em> field.
See the ZONEFILE And KEYREC FIELDS and EXAMPLES sections for more details.</p>
</dd>
</li>
<dt><strong><a name="item__2dadmin"><em>-admin</em></a></strong>

<dd>
<p>This specifies the value of the <em>administrator</em> field.  If it is not given,
an <em>administrator</em> field will not be included for the record.</p>
</dd>
</li>
<dt><strong><a name="item__2ddirectory"><em>-directory</em></a></strong>

<dd>
<p>This specifies the value of the <em>directory</em> field.  If it is not given,
a <em>directory</em> field will not be included for the record.</p>
</dd>
</li>
<dt><strong><a name="item__2dloglevel"><em>-loglevel</em></a></strong>

<dd>
<p>This specifies the value of the <em>loglevel</em> field.  If it is not given, a
<em>loglevel</em> field will not be included for the record.</p>
</dd>
</li>
<dt><strong><a name="item__2dskip"><em>-skip</em></a></strong>

<dd>
<p>By default, <strong>roll</strong> records are generated.  If this option is given, then
<strong>skip</strong> records will be generated instead.</p>
</dd>
</li>
<dt><strong><a name="item__2dout_output_2dfile"><em>-out output-file</em></a></strong>

<dd>
<p>The new <em>rollrec</em> entries will be appended to <em>output-file</em>.
The file will be created if it does not exist.</p>
</dd>
<dd>
<p>If this option is not given, the new <em>rollrec</em> entries will be written
to standard output.</p>
</dd>
</li>
<dt><strong><a name="item__2dhelp"><em>-help</em></a></strong>

<dd>
<p>Display a usage message.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<p>The following options should make clear how <strong>rollinit</strong> deals with options and
the new <em>rollrec</em>s.  Example 1 will show the complete new <em>rollrec</em> record.
For the sake of brevity, the remaining examples will only show the newly
created <em>zonefile</em> and <em>keyrec</em> records.</p>
<p>
</p>
<h2><a name="example_1__one_domain__no_options">Example 1.  One domain, no options</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, without any options.</p>
<pre>
    $ rollinit example.com
        roll    &quot;example.com&quot;
            zonefile        &quot;example.com.signed&quot;
            keyrec          &quot;example.com.krf&quot;
            kskphase        &quot;0&quot;
            zskphase        &quot;0&quot;
            ksk_rolldate    &quot; &quot;
            ksk_rollsecs    &quot;0&quot;
            zsk_rolldate    &quot; &quot;
            zsk_rollsecs    &quot;0&quot;
            maxttl          &quot;0&quot;
            display         &quot;1&quot;
            phasestart      &quot;new&quot;</pre>
<p>
</p>
<h2><a name="example_2__one_domain__zone_option">Example 2.  One domain, -zone option</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, with the <em>-zone</em> option.</p>
<pre>
    $ rollinit -zone signed-example example.com
        roll    &quot;example.com&quot;
            zonefile        &quot;signed-example&quot;
            keyrec          &quot;example.com.krf&quot;</pre>
<p>
</p>
<h2><a name="example_3__one_domain__keyrec_option">Example 3.  One domain, -keyrec option</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, with the <em>-keyrec</em> option.</p>
<pre>
    $ rollinit -keyrec x-rrf example.com
        roll    &quot;example.com&quot;
            zonefile        &quot;example.com.signed&quot;
            keyrec          &quot;x-rrf&quot;</pre>
<p>
</p>
<h2><a name="example_4__one_domain__zone_and_keyrec_options">Example 4.  One domain, -zone and -keyrec options</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, with the <em>-zone</em> and <em>-keyrec</em> options.</p>
<pre>
    $ rollinit -zone signed-example -keyrec example.rrf example.com
        roll    &quot;example.com&quot;
            zonefile        &quot;signed-example&quot;
            keyrec          &quot;xkrf&quot;</pre>
<p>
</p>
<h2><a name="example_5__one_domain__skip_option">Example 5.  One domain, -skip option</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, with the <em>-zone</em> and <em>-keyrec</em> options.</p>
<pre>
    $ rollinit -skip example.com
        skip    &quot;example.com&quot;
            zonefile        &quot;example.com.signed&quot;
            keyrec          &quot;example.com.krf&quot;</pre>
<p>
</p>
<h2><a name="example_6__multiple_domains__no_options">Example 6.  Multiple domains, no options</a></h2>
<p>This example shows the <em>rollrec</em>s generated by giving <strong>rollinit</strong> several
domains, without any options.</p>
<pre>
    $ rollinit example1.com example2.com
        roll    &quot;example1.com&quot;
                zonefile        &quot;example1.com.signed&quot;
                keyrec          &quot;example1.com.krf&quot;</pre>
<pre>
        roll    &quot;example2.com&quot;
                zonefile        &quot;example2.com.signed&quot;
                keyrec          &quot;example2.com.krf&quot;</pre>
<p>
</p>
<h2><a name="example_7__multiple_domains__zone_option">Example 7.  Multiple domains, -zone option</a></h2>
<p>This example shows the <em>rollrec</em>s generated by giving <strong>rollinit</strong> several
domains, with the <em>-zone</em> option.</p>
<pre>
    $ rollinit -zone =-signed example1.com example2.com
        roll    &quot;example1.com&quot;
                zonefile        &quot;example1.com-signed&quot;
                keyrec          &quot;example1.com.krf&quot;</pre>
<pre>
        roll    &quot;example2.com&quot;
                zonefile        &quot;example2.com-signed&quot;
                keyrec          &quot;example2.com.krf&quot;</pre>
<p>
</p>
<h2><a name="example_8__multiple_domains__keyrec_option">Example 8.  Multiple domains, -keyrec option</a></h2>
<p>This example shows the <em>rollrec</em>s generated by giving <strong>rollinit</strong> several
domains, with the <em>-keyrec</em> option.</p>
<pre>
    $ rollinit -keyrec zone-=-keyrec example1.com example2.com
        roll    &quot;example1.com&quot;
                zonefile        &quot;example1.com.signed&quot;
                keyrec          &quot;zone-example1.com-keyrec&quot;</pre>
<pre>
        roll    &quot;example2.com&quot;
                zonefile        &quot;example2.com.signed&quot;
                keyrec          &quot;zone-example2.com-keyrec&quot;</pre>
<p>
</p>
<h2><a name="example_9__multiple_domains__zone_and_keyrec_options">Example 9.  Multiple domains, -zone and -keyrec options</a></h2>
<p>This example shows the <em>rollrec</em>s generated by giving <strong>rollinit</strong> several
domains, with the <em>-zone</em> and <em>-keyrec</em> options.</p>
<pre>
    $ rollinit -zone Z-= -keyrec =K example1.com example2.com
        roll    &quot;example1.com&quot;
                zonefile        &quot;Z-example1.com&quot;
                keyrec          &quot;example1.comK&quot;</pre>
<pre>
        roll    &quot;example2.com&quot;
                zonefile        &quot;Z-example2.com&quot;
                keyrec          &quot;example2.comK&quot;</pre>
<p>
</p>
<h2><a name="example_10__single_domain__zone_and_keyrec_options_with_template">Example 10.  Single domain, -zone and -keyrec options with template</a></h2>
<p>This example shows the <em>rollrec</em> generated by giving <strong>rollinit</strong> a single
domain, with the <em>-zone</em> and <em>-keyrec</em> options.  The options use the
multi-domain <strong>=</strong> template.</p>
<pre>
    $ rollinit -zone Z-= -keyrec =.K example.com
        roll    &quot;example.com&quot;
                zonefile        &quot;Z-=&quot;
                keyrec          &quot;=.K&quot;</pre>
<p>This is probably not what is wanted, since it results in the <em>zonefile</em> and
<em>keyrec</em> field values containing the <strong>=</strong>.</p>
<p>
</p>
<h2><a name="example_11__multiple_domains__zone_and_keyrec_options_without_template">Example 11.  Multiple domains, -zone and -keyrec options without template</a></h2>
<p>This example shows the <em>rollrec</em>s generated by giving <strong>rollinit</strong> several
domains, with the <em>-zone</em> and <em>-keyrec</em> options.  The options do not use the
multi-domain <strong>=</strong> template.</p>
<pre>
    $ rollinit -zone ex.zone -keyrec ex.krf example1.com example2.com
        roll    &quot;example1.com&quot;
                zonefile        &quot;ex.zone&quot;
                keyrec          &quot;ex.krf&quot;</pre>
<pre>
        roll    &quot;example2.com&quot;
                zonefile        &quot;ex.zone&quot;
                keyrec          &quot;ex.krf&quot;</pre>
<p>This may not be what is wanted, since it results in the same <em>zonefile</em>
and <em>keyrec</em> fields values for each <em>rollrec</em>.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright 2006-2007 SPARTA, Inc.  All rights reserved.
See the COPYING file included with the DNSSEC-Tools package for details.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Wayne Morrison, <a href="mailto:tewok@users.sourceforge.net">tewok@users.sourceforge.net</a></p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><strong>lsroll(1)</strong>,
<strong>rollerd(8)</strong>,
<strong>rollchk(8)</strong>,
<strong>zonesigner(8)</strong></p>
<p><strong>Net::DNS::SEC::Tools::keyrec.pm(3)</strong>,
<strong>Net::DNS::SEC::Tools::rollrec.pm(3)</strong></p>
<p><strong>Net::DNS::SEC::Tools::file-keyrec.pm(5)</strong>,
<strong>Net::DNS::SEC::Tools::file-rollrec.pm(5)</strong></p>

</body>

</html>
