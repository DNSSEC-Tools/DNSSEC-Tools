<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>donuts - analyze DNS zone files for errors and warnings</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>donuts - analyze DNS zone files for errors and warnings</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<pre>
  donuts [-h] [-H] [-v] [-l LEVEL] [-r RULEFILES] [-i IGNORELIST]
         [-C] [-c configfile] ZONEFILE DOMAINNAME...</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>donuts</strong> is a DNS Lint application that examines DNS zone files looking
for particular problems.  This is especially important for zones
making use of DNSSEC security records, since many subtle problems can
occur.</p>
<p>If the <strong>Text::Wrap</strong> Perl module is installed, <strong>donuts</strong> will give better
output formatting.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<dl>
<dt><strong><a name="item__2dh">-h</a></strong>

<dd>
<p>Displays a help message.</p>
</dd>
</li>
<dt><strong><a name="item__2dv">-v</a></strong>

<dd>
<p>Turns on more verbose output.</p>
</dd>
</li>
<dt><strong><a name="item__2dq">-q</a></strong>

<dd>
<p>Turns on more quiet output.</p>
</dd>
</li>
<dt><strong><a name="item__2dl_level">-l <em>LEVEL</em></a></strong>

<dd>
<p>Sets the level of errors to be displayed.  The default is level 5.
The maximum value is level 9, which displays many debugging results.
You probably want to run no higher than level 8.</p>
</dd>
</li>
<dt><strong><a name="item__2dr_rulefiles">-r <em>RULEFILES</em></a></strong>

<dd>
<p>A comma-separated list of rule files to load.  The strings will be
passed to <em>glob()</em> so * wildcards can be used to specify multiple files.</p>
</dd>
</li>
<dt><strong><a name="item__2di_ignorelist">-i <em>IGNORELIST</em></a></strong>

<dd>
<p>A comma-separated list of regex patterns which are checked against
rule names to determine if some should be ignored.  Run with <em>-v</em> to
figure out rule names if you're not sure which rule is generating
errors you don't wish to see.</p>
</dd>
</li>
<dt><strong><a name="item__2dl">-L</a></strong>

<dd>
<p>Include rules that require live queries of data.  Generally, these
rules concentrate on pulling remote DNS data to test;
for example, parent/child zone relationships.</p>
</dd>
</li>
<dt><strong><a name="item__2dc_configfile">-c <em>CONFIGFILE</em></a></strong>

<dd>
<p>Parse a configuration file to change constraints specified by rules.
This defaults to <strong>$HOME/.donuts.conf</strong>.</p>
</dd>
</li>
<dt><strong><a name="item__2dc">-C</a></strong>

<dd>
<p>Don't read user configuration files at all, such as those specified by
the <em>-c</em> option or the <strong>$HOME/.donuts.conf</strong> file.</p>
</dd>
</li>
<dt><strong><a name="item__2dt_interface">-t <em>INTERFACE</em></a></strong>

<dd>
<p>Specifies that <em>tcpdump</em> should be started on <em>INTERFACE</em> (e.g.,
``eth0'') just before donuts begins its run of rules for each domain
and will stop it just after it has processed the rules.  This is
useful when you wish to capture the traffic generated by the <em>live</em>
feature, described above.</p>
</dd>
</li>
<dt><strong><a name="item__2dt_filter">-T <em>FILTER</em></a></strong>

<dd>
<p>When <em>tcpdump</em> is run, this <em>FILTER</em> is passed to it for purposes of
filtering traffic.  By default, this is set to <em>port 53 || ip[6:2] &amp;
0x1fff != 0</em>, which limits the traffic to traffic destined to port 53
(DNS) or fragmented packets.</p>
</dd>
</li>
<dt><strong><a name="item__2do_file">-o <em>FILE</em></a></strong>

<dd>
<p>Saves the <em>tcpdump</em> captured packets to <em>FILE</em>.  The following
special fields can be used to help generate unique file names:</p>
</dd>
<dl>
<dt><strong><a name="item__d">%d</a></strong>

<dd>
<p>This is replaced with the current domain name being analyzed (e.g.,
``example.com'').</p>
</dd>
</li>
<dt><strong><a name="item__t">%t</a></strong>

<dd>
<p>This is replaced with the current epoch time (i.e., the number of
seconds since Jan 1, 1970).</p>
</dd>
</li>
</dl>
<p>This field defaults to <em>%d.%t.pcap</em>.</p>
<dt><strong><a name="item__2dh">-H</a></strong>

<dd>
<p>Displays the personal configuration file rules and tokens that are
acceptable in a configuration file.  The output will
consist of a rule name, a token, and a description of its meaning.</p>
</dd>
<dd>
<p>Your configuration file (e.g., <strong>$HOME/.donuts.conf</strong>) may have lines in it
that look like this:</p>
</dd>
<dd>
<pre>
  # change the default minimum number of legal NS records from 2 to 1
  name: DNS_MULTIPLE_NS
  minnsrecords: 1</pre>
</dd>
<dd>
<pre>
  # change the level of the following rule from 8 to 5
  name: DNS_REASONABLE_TTLS
  level: 5</pre>
</dd>
<dd>
<p>This allows you to override certain aspects of how rules are executed.</p>
</dd>
</li>
<dt><strong><a name="item__2dr">-R</a></strong>

<dd>
<p>Displays a list of all known rules along with their description (if
available).</p>
</dd>
</li>
<dt><strong><a name="item__2df_list">-F LIST</a></strong>

<dt><strong><a name="item__2d_2dfeatures_3dlist">--features=LIST</a></strong>

<dd>
<p>The --features option specifies additional rule features that should
be executed.  Some rules are turned off by default because they are
more intensive or require a live network connection, for instance.
Use the --features flag to turn them on.  The LIST argument should be
a comma separated list.  Example usage:</p>
</dd>
<dd>
<pre>
  --features live,data_check</pre>
</dd>
<dd>
<p>Features available in the default rule set:</p>
</dd>
<dl>
<dt><strong><a name="item_live">live</a></strong>

<dd>
<p>The <em>live</em> feature allows rules that need to perform live DNS queries
to run.  Most of these <em>live</em> rules query parent and children of the
current zone, when appropriate, to see that the parent/child
relationships have been built properly.  For example, if you have a
DS record which authenticates the key used in a child zone the <em>live</em>
feature will let a rule run which checks to see if the child is
actually publishing the DNSKEY that corresponds to the test zone's DS
record.</p>
</dd>
</li>
</dl>
<dt><strong><a name="item__2d_2dshow_2dgui">--show-gui</a></strong>

<dd>
<p>[alpha code]</p>
</dd>
<dd>
<p>Displays a browsable GUI screen showing the results of the donuts tests.</p>
</dd>
<dd>
<p>The <strong>QWizard</strong> and <strong>Gtk2</strong> Perl modules must be installed for this to work.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2dlive">--live</a></strong>

<dd>
<p>Obsolete command line option.  Please use <em>--features live</em> instead.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>Copyright 2004-2007 SPARTA, Inc.  All rights reserved.
See the COPYING file included with the DNSSEC-Tools package for details.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Wes Hardaker &lt;<a href="mailto:hardaker@users.sourceforge.net">hardaker@users.sourceforge.net</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p>For writing rules that can be loaded by donuts:</p>
<pre>
  B&lt;Net::DNS::SEC::Tools::Donuts::Rule&gt;,</pre>
<p>General DNS and DNSSEC usage:</p>
<pre>
  B&lt;Net::DNS&gt;, B&lt;Net::DNS::SEC&gt;</pre>
<p><strong>Gtk2.pm(3)</strong>,
<strong>QWizard.pm(3)</strong></p>
<p><a href="http://dnssec-tools.sourceforge.net/">http://dnssec-tools.sourceforge.net/</a></p>

</body>

</html>
