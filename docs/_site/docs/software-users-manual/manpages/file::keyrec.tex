\clearpage

\subsubsection{Keyrec Files}

{\bf NAME}

\struct{keyrec} - Zone and key data used by DNSSEC-Tools programs.

{\bf DESCRIPTION}

\struct{keyrec} files contain data about zones signed by and keys generated by
the DNSSEC-Tools programs.  A \struct{keyrec} file is organized in sets of
\struct{keyrec} records.  Each \struct{keyrec} record must be either of {\it
zone} type, {\it set} type, or {\it key} type.  Zone \struct{keyrec}s describe
how the zones were signed.  Set \struct{keyrec}s describe sets of key
\struct{keyrec}s.  Key \struct{keyrec}s describe how encryption keys were
generated.  A \struct{keyrec} consists of a set of keyword/value entries.

The DNSSEC-Tools {\bf keyrec.pm} module manipulates the contents of a
\struct{keyrec} file.  Module interfaces exist for looking up \struct{keyrec}
records, creating new records, and modifying existing records.

Comment lines and blank lines are ignored by the DNSSEC-Tools programs.
Comment lines start with either a `\#' character or a `;' character.

A \struct{keyrec}'s name may consist of alphabetic characters, numbers, and
several special characters.  The special characters are the minus sign, the
plus sign, the underscore, the comma, the period, and the colon.

The values in a \struct{keyrec}'s entries may consist of alphabetic characters,
numbers, and several special characters.  The special characters are the minus
sign, the plus sign, the underscore, the comma, the period, the colon, the
forward-slash, the space, and the tab.

{\bf FIELDS}

The fields in a \struct{keyrec} record are described in this section.  The
fields in each type of record (zone, set, key) are described in their own
subsection.

{\bf Zone Keyrec Fields}

\begin{description}

\item {\it archivedir}\verb" "

The name of the key archive directory for this zone.

\item {\it endtime}\verb" "

The time when the zone's SIG records expire.  This field is passed to
{\bf dnssec-signzone} as the argument to the {\it -e} option.

\item {\it gends}\verb" "

Boolean value to indicate whether or not DS records should be generated for
the zone.

\item {\it keyrec\_signdate}\verb" "

The textual timestamp of the zone \struct{keyrec}'s last update.
This is a translation of the {\it keyrec\_signsecs} field.

\item {\it keyrec\_signsecs}\verb" "

The numeric timestamp of the zone \struct{keyrec}'s last update.
This is measured in seconds since the epoch.

\item {\it ksdir}\verb" "

The name of the directory to hold the zone's keyset files.

\item {\it kskcount}\verb" "

The number of KSKs to generate for the zone.

\item {\it kskcur}\verb" "

The name of the zone's Current KSK signing set.
This is used as the name of the signing set of KSK keys \struct{keyrec} fields.

\item {\it kskpub}\verb" "

The name of the zone's Published KSK signing set.

\item {\it kskdirectory}\verb" "

The directory that holds the KSK keys.

\item {\it lastset}\verb" "

The most recently generated signing set for the zone.

\item {\it serial}\verb" "

The most recent serial number for the zone.

\item {\it szopts}\verb" "

Optional arguments passed to the {\bf dnssec-signzone} command.

\item {\it signedzone}\verb" "

The name of the signed zone file for this zone.

\item {\it zonefile}\verb" "

The name of the zone file for this zone.

\item {\it zskcount}\verb" "

The number of ZSKs to generate for the zone.

\item {\it zskcur}\verb" "

The name of the signing set for the current ZSK keys.
This is the name of the signing set's set \struct{keyrec}.

\item {\it zskdirectory}\verb" "

The directory that holds the ZSK keys.

\item {\it zskpub}\verb" "

The name of the signing set for the current ZSK keys.
This is the name of the signing set's set \struct{keyrec}.

\item {\it zsknew}\verb" "

\end{description}

The name of the signing set for the current ZSK keys.
This is the name of the signing set's set \struct{keyrec}.

{\bf Set Keyrec Fields}

\begin{description}

\item {\it keys}\verb" "

The list of keys in this signing set.  Each key listed should have a
corresponding key \struct{keyrec} whose name matches the key name.

\item {\it keyrec\_setdate}\verb" "

The textual timestamp of the signing set's last modification.
This is a translation of the {\it keyrec\_setsecs} field.

\item {\it keyrec\_setsecs}\verb" "

The numeric timestamp of the signing set's last modification.
This is measured in seconds since the epoch.

\item {\it zonename}\verb" "

The name of the zone for which this signing set was generated.

\end{description}

{\bf Key Keyrec Fields}

\begin{description}

\item {\it algorithm}\verb" "

The encryption algorithm used to generate this key.

\item {\it keypath}\verb" "

The path to the key.  This may be an absolute or relative path, but it should
be one which {\bf zonesigner} may use (in conjunction with other \struct{keyrec}
fields to find the key.

\item {\it keyrec\_gendate}\verb" "

The textual timestamp of the key's creation.  This is a translation of
the {\it keyrec\_gensecs} field.

\item {\it keyrec\_gensecs}\verb" "

The numeric timestamp of the key's creation.  This is measured in seconds
since the epoch.

\item {\it kgopts}\verb" "

Additional options to pass to the {\bf dnssec-keygen} command.

\item {\it ksklength}\verb" "

The length of a KSK key.  This is only included in \struct{keyrec}s for KSK keys.

\item {\it ksklife}\verb" "

The life of a KSK key.  This is only included in \struct{keyrec}s for KSK keys.

\item {\it random}\verb" "

The random number generator used to generate this key.

\item {\it zonename}\verb" "

The name of the zone for which this key was generated.

\item {\it zsklength}\verb" "

The length of a ZSK key.  This is only included in \struct{keyrec}s for ZSK
keys.

\item {\it zsklife}\verb" "

\end{description}

The life of a ZSK key.  This is only included in \struct{keyrec}s for ZSK keys.

{\bf EXAMPLES}

The following is an example of a zone \struct{keyrec}:

\begin{verbatim}

    zone        "example.com"
            zonefile        "db.example.com"
            signedzone      "db.example.com.signed"
            endtime         "+604800"
            archivedir      "/usr/etc/dnssec-tools/key-vault"
            kskcur          "signing-set-41"
            kskdirectory    "keydir"
            zskcur          "signing-set-42"
            zskpub          "signing-set-43"
            zsknew          "signing-set-44"
            lastset         "signing-set-44"
            keyrec_signsecs "1123771721"
            keyrec_signdate "Thu Aug 11 14:48:41 2005"

\end{verbatim}

The following is an example of a set \struct{keyrec}:

\begin{verbatim}

    set        "signing-set-42"
            zonename        "example.com"
            keys            "Kexample.com.+005+88888"
            keyrec_setsecs  "1123771350"
            keyrec_setdate  "Thu Aug 11 14:42:30 2005"

\end{verbatim}

The following is an example of a key \struct{keyrec}:

\begin{verbatim}

    key        "Kexample.com.+005+88888"
            zonename        "example.com"
            keyrec_type     "kskcur"
            algorithm       "rsasha1"
            random          "/dev/urandom"
            keypath         "./Kexample.com.+005+88888.key"
            ksklength       "1024"
            keyrec_gensecs  "1123771354"
            keyrec_gendate  "Thu Aug 11 14:42:34 2005"

\end{verbatim}

{\bf SEE ALSO}

lskrf(1)

dnssec-signzone(8),
keyarch(8)
signset-editor(8),
zonesigner(8)

Net::DNS::SEC::Tools::keyrec(3)

